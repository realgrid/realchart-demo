
/** 
 * RealReport-Chart v0.0.1
 * Copyright (C) 2023-2023 WooriTech Inc.
 * All Rights Reserved. 
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).RealChart={})}(this,(function(t){"use strict";let e=0;class s{static destroy(t){return t&&t.destroy()}constructor(t){this.$_destroyed=!1,this.$_destroying=!1,t||(this.$_hash=String(e++))}destroy(){return this.$_destroyed||this.$_destroying||(this.$_destroyed=!0,this.$_destroying=!0,this._doDestory()),null}_doDestory(){}get destroying(){return this.$_destroying}get hash(){return this.$_hash}isMe(t){return t===this.$_hash}toString(){return this.constructor.name}toBool(t){return"string"==typeof t?"true"===t:t}toNum(t,e=NaN){return t=parseFloat(t),isNaN(t)?e:t}}class i extends s{wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}createWrapper(t){const e=this._wrapper=new t;return e.$_c=this,e}setWrapper(t){return this._wrapper=t,t.$_c=this,t}isWrapper(t){return t===this._wrapper}}const r="http://www.w3.org/2000/svg",n=function(t){return t&&"object"==typeof t&&!Array.isArray(t)},h=Array.isArray,a=function(t){return"string"==typeof t},o=function(t){return"number"==typeof t},l=function(t,e){return t=parseFloat(t),isNaN(t)?parseFloat(e):t},c=function(t,e){return void 0!==t?t:e},d=function(t,e,s){return void 0!==t?t:void 0!==e?e:s};class u{static setLogging(t=!0){this._logging=t}static log(...t){this._logging&&console.log.apply(console,t)}}u._logging=!1;class _{static setDebugging(t=!0){this._debugging=t}static debugging(){this._debugging}}_._debugging=!1;const p={ko:{dateFormat:"yyyy.MM.dd",am:"오전",pm:"오후",notExistsDataField:"존재하지 않는 필드입니다: %1",notSpecifiedDataField:"하나 이상의 데이터필드가 설정돼야 합니다.",invalidFieldName:"잘못된 데이터필드 이름입니다: %1",invalidFieldIndex:"잘못된 데이터필드 index입니다: %1",invalidRowIndex:"잘못된 데이터행 index입니다: %1",canNotModifyData:"읽기 전용 데이터를 변경할 수 없습니다.",canNotModifyDeleted:"삭제 상태 행을 변경할 수 없습니다: %1",requiredField:"반드시 값을 지정해야 하는 필드입니다: %1",invalidValueInDomain:"값이 필드 값 도메인에 포함되지 않습니다: %1",invalidValueInRange:"값이 필드 값 범위에 포함되지 않습니다: %1",invalidToIndex:"잘못된 'to' index입니다.: %1",requireSourceData:"원본 data가 반드시 지정돼야 합니다.",requireFilterName:"필터 이름이 반드시 지정돼야 합니다.",alreadyEditing:"이미 데이터 편집 중입니다.",invalidDateFormat:"잘못된 시간 날짜 형식입니다: %1",invalidSizeValue:"잘못된 Size 값입니다: %1",invalidOuterDiv:"잘못된 외부 div 입니다: %1",canNotHorzGrouping:"수평 모드일 때 그룹핑할 수 없습니다.",dataMustSet:"데이터가 먼저 설정돼야 합니다.",requireGroupingInfos:"하나 이상의 행 그룹핑 정보가 설정돼야 합니다.",canNotRowGrouping:"데이터링크 view에 대해 행그룹핑 할 수 없습니다. dataGroupBy()를 사용하세요.",canNotDataGrouping:"데이터링크 view가 아니면 데이터그룹핑할 수 없습니다. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"그룹핑 상태일 때 수평모드로 변경할 수 없습니다.",unknownLayoutType:"잘못된 layout 종류입니다: %1",layoutMustSet:"레이아웃 모델이 반드시 설정돼야 합니다.",unknownItemViewType:"잘못된 item view 종류입니다: %1",requireCommandName:"Command 이름이 지정돼야 합니다.",commandNameDuplicated:"이미 존재하는 command 이름입니다: %1",requireDataOrGroup:"데이터소스나 그룹 모델이 반드시 지정돼야 합니다.",requireTableName:"테이블모델의 이름이 지정돼야 합니다.",alreadyTableExists:"이미 존해하는 테이블모델입니다: %1",selectEditRowFirst:"수정하거나 삽입할 행을 먼저 선택하세요."},en:{dateFormat:"M/d/yyyy",am:"AM",pm:"PM",notExistsDataField:"A data field is not exists: %1",notSpecifiedDataField:"At least one datafield must be set.",invalidFieldName:"Invalid field name: %1",invalidFieldIndex:"Invalid field index: %1",invalidRowIndex:"Invalid row index: %1",canNotModifyData:"Can not modify a readonly data.",canNotModifyDeleted:"Can not modify a deleted row: %1",requiredField:"Required field: %1",invalidValueInDomain:"The value is not int the domain: %1",invalidValueInRange:"The value is not int the range: %1",invalidToIndex:"Invalid 'to' index: %1",requireSourceData:"A source data must be set.",requireFilterName:"A filter name must be set.",alreadyEditing:"DataView is already editing.",invalidDateFormat:"Invalid datetime format: %1",invalidSizeValue:"Invalid size value: %1",invalidOuterDiv:"Invalid outer div element: %1",canNotHorzGrouping:"Can not row grouping in horz mode.",dataMustSet:"A data must be set first.",requireGroupingInfos:"At least one grouping info must be set.",canNotRowGrouping:"Can not row grouping by data link view. use dataGroupBy().",canNotDataGrouping:"Can not data grouping without data link view. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"Can not change to horz mode while grouping",unknownLayoutType:"Invalid layout: %1",layoutMustSet:"A layout model must be set.",unknownItemViewType:"Unknow item view type: %1",requireCommandName:"Command name must be supplied.",commandNameDuplicated:"Command name is already exists: %1",requireDataOrGroup:"A data or group view must be set.",requireTableName:"The name of table model is required.",alreadyTableExists:"A table model is already exists: %1",selectEditRowFirst:"First select the row you want to edit or insert."}};let g=p.ko;const m="%".charCodeAt(0),y=-Math.PI/2,x=Math.ceil;function w(t){return parseFloat(t.toPrecision(12))}function f(t,e){let s,i;if(null==t||Number.isNaN(t)){if(e)return null;i=0,s=!0}else if(!(s=!isNaN(i=+t))){const s=t.trim();if(s.charCodeAt(s.length-1)===m&&(i=1===s.length?NaN:parseFloat(s)),isNaN(i)){if(e)return null;S(g.invalidSizeValue,t)}}return{size:i,fixed:s}}function b(t,e){return t?t.fixed?t.size:t.size*e/100:NaN}class v extends Error{}const A=function(t,e){if(!t)throw new v(e)};var M;!function(t){t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right"}(M||(M={}));const S=(t,e)=>{throw new Error(((t,e)=>t.replace("%1",e))(t,e))};var P,T,L;!function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right"}(P||(P={})),function(t){t.TOP="top",t.MIDDLE="middle",t.BOTTOM="bottom"}(T||(T={})),function(t){t[t.LEFT=0]="LEFT",t[t.TOP=1]="TOP",t[t.BOTTOM=2]="BOTTOM",t[t.RIGHT=3]="RIGHT"}(L||(L={}));let k=651212;class E{static getWin(t){return t.defaultView||t.parentWindow}static isVisible(t){return t&&"none"!==t.style.display}static setVisible(t,e,s=""){return t.style.display=e?s||"":"none",e}static hide(t){t.style.display="none"}static show(t,e=""){t.style.display=e}static addClass(t,e){if(e){e.split(/\s+/g).forEach((e=>t.classList.add(e)))}return t}static removeClass(t,e){if(e){e.split(/\s+/g).forEach((e=>t.classList.remove(e)))}return t}static getImageUrl(t){const e=t.backgroundImage;if(e&&e.startsWith('url("'))return e.substring(5,e.length-2)}static getFocused(){let t=document.getSelection().focusNode;for(;t;){if(t instanceof HTMLElement)return t;t=t.parentElement}}static isAncestorOf(t,e){let s=e;for(;s;){if(s==t)return!0;s=s.parentElement}return!1}static getOffset(t){const e=t.ownerDocument,s=e.defaultView,i=t.getBoundingClientRect(),r=e.body,n=e.documentElement,h=s.pageYOffset||n.scrollTop||r.scrollTop,a=s.pageXOffset||n.scrollLeft||r.scrollLeft,o=n.clientTop||r.clientTop||0,l=n.clientLeft||r.clientLeft||0,c=i.left+a-l,d=i.top+h-o;return{x:Math.round(c),y:Math.round(d)}}static getSize(t){const e=t.getBoundingClientRect();return{width:e.width,height:e.height}}static moveX(t,e){t.style.left=e+"px"}static moveY(t,e){t.style.top=e+"px"}static move(t,e,s){t.style.left=e+"px",t.style.top=s+"px"}static moveI(t,e,s){t.style.left=(e>>>0)+"px",t.style.top=(s>>>0)+"px"}static resize(t,e,s){t.style.width=e+"px",t.style.height=s+"px"}static resizeSVG(t,e,s){t.setAttribute("viewBox",`0 0 ${e} ${s}`)}static setWidth(t,e){t.style.width=e+"px"}static setHeight(t,e){t.style.height=e+"px"}static getBrowserSize(t){const e=t?t.ownerDocument:document,s=e.defaultView;return{width:s.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:s.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}}static setRect(t,e){const s=t.style;s.left=e.x+"px",s.top=e.y+"px",s.width=e.width+"px",s.height=e.height+"px"}static setBounds(t,e,s,i,r){const n=t.style;n.left=e+"px",n.top=s+"px",n.width=i+"px",n.height=r+"px"}static setBoundsEx(t,e,s,i,r){const n=t.style;!isNaN(e)&&(n.left=e+"px"),!isNaN(s)&&(n.top=s+"px"),!isNaN(e)&&(n.width=i+"px"),!isNaN(e)&&(n.height=r+"px")}static getClientRect(t){const e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e}static getChildIndex(t){if(t){const e=t.parentNode;if(e){const s=e.children;for(let e=s.length;e--;)if(s[e]===t)return e}}return-1}static clearChildren(t){let e;for(;e=t.lastChild;)t.removeChild(e)}static clearElements(t){let e;for(;e=t.lastChild;)E.clearElements(e),t.removeChild(e)}static append(t,e){e.parentNode!==t&&t.appendChild(e)}static addChild(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)}static removeChild(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)}static removeChildren(t,e){e.forEach((e=>{e instanceof Element?e.parentNode===t&&t.removeChild(e):e&&e.dom().parentNode==t&&t.removeChild(e.dom())}))}static remove(t){const e=t&&t.parentElement;return e&&e.removeChild(t),null}static clearStyle(t){t.style.cssText=""}static removeStyles(t,e){if(e)for(const s in e)t[s]=""}static setStyle(t,e){e&&Object.assign(t.style,e)}static replaceStyle(t,e,s){if(e!=s){if(s)for(const e in s)t[e]="";return e&&Object.assign(t,e),e}return s}static createElement(t,e,s){const i=t.createElement(e);return s&&Object.assign(i.style,s),i}static htmlEncode(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML}static setData(t,e,s){null==s||""===s?delete t.dataset[e]:t.dataset[e]=s}static toggleData(t,e,s){s?t.dataset[e]="1":delete t.dataset[e]}static getData(t,e){return t.dataset[e]}static hasData(t,e){return void 0!==t.dataset[e]}static setVar(t,e,s){t.style.setProperty(e,s)}static animate(t,e,s,i,r=150,n="none"){const h={},a={};return h[e]=s,a[e]=i,t.animate([h,a],{duration:r,fill:n})}static setAttr(t,e,s){null!=s&&""!==s?t.setAttribute(e,s):t.removeAttribute(e)}static setAttrs(t,e){for(const s in e)t.setAttribute(s,e[s])}static getDomId(){return"-rtc-"+k++}static createBR(t,e){const s=t.createElement("br");return s.className=e,s}static createSpan(t,e){const s=t.createElement("span");return e&&Object.assign(s.style,e),s}static createCheckBox(t,e){const s=t.createElement("input");return s.type="checkbox",e&&Object.assign(s.style,e),s}static createRadio(t,e){const s=t.createElement("input");return s.type="radio",e&&Object.assign(s.style,e),s}static getPadding(t){const e=getComputedStyle(t);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0}}static getPaddingEx(t){const e=this.getPadding(t);return e.horz=e.left+e.right,e.vert=e.top+e.bottom,e}static getPaddingBorder(t){const e=getComputedStyle(t);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0,borderLeft:parseFloat(e.borderLeftWidth)||0,borderRight:parseFloat(e.borderRightWidth)||0,borderTop:parseFloat(e.borderTopWidth)||0,borderBottom:parseFloat(e.borderBottomWidth)||0}}static stopAnimation(t){if(t)try{t.finish()}catch(t){_.debugging(),console.error(t)}return null}static childByPath(t,e){let s=t;if(e){let t=0;for(;t<e.length;)s=s.childNodes[e[t++]]}return s}static childByClass(t,e){return t.getElementsByClassName(e)[0]}static setDisabled(t,e){this.setAttr(t,"disabled",!!e||void 0)}static setImportantStyle(t,e,s){t.setProperty(e,s,"important")}}const N=(new Date).getTime();Element.prototype.animate||(Element.prototype.animate=function(t){});const V=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,C=!!window.chrome&&!V;Object.prototype.toString.call(HTMLElement).indexOf("Constructor")>0||!C&&!V&&navigator.userAgent.indexOf("Safari"),navigator.userAgent.toLocaleLowerCase().indexOf("samsungbrowser"),navigator.userAgent.toLocaleLowerCase().indexOf("miuibrowser");const O=/"([^"]*(?="))"/,R=/'([^']*(?='))'/,D='"'.charCodeAt(0),B="'".charCodeAt(0);class I{static now(){return+new Date}static stopEvent(t,e=!1){t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()}static getErrorStack(t){const e=t.stack;return e?e.split("\n").map((t=>t+"<br/>")):""}static getBaseClassName(t){return Object.getPrototypeOf(t.constructor).name}static isObject(t){return t&&"object"==typeof t&&!h(t)}static assign(t,e){this.isObject(e)&&Object.assign(t,e)}static isValidObject(t){if(this.isObject(t))for(let e in t)if(t.hasOwnProperty(e))return!0}static copyObject(t){if(t&&"object"==typeof t&&!h(t))return Object.assign({},t)}static checkArray(t){return h(t)?t:void 0}static makeArray(t,e=!1){return null!=t?h(t)?t:[t]:e?[]:void 0}static makeNumArray(t){return h(t)?t.map((t=>+t)):null!=t?[+t]:[]}static getIntArray(t,e=0){const s=[];for(let i=e,r=e+t;i<r;i++)s.push(i);return s}static isValueArray(t){if(h(t)){for(let e=t.length-1;e>=0;e--)if(null!=t[e]&&"object"==typeof t[e])return!1;return!0}return!1}static toArray(t){return h(t)?t:null!=t?[t]:null}static copyArray(t){return h(t)?t.slice(0):null!=t?[t]:void 0}static push(t,e){if(e&&e.length>0)for(let s=0,i=e.length;s<i;s++)t.push(e[s])}static isDefined(t){return null!=t}static isNotDefined(t){return null==t}static isNumber(t){return"number"==typeof t}static isValidNumber(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}static getNumber(t,e=0){const s=parseFloat(t);return isFinite(s)?s:e}static toNumber(t,e=0){return isNaN(t)||null===t||""===t?e:+t}static getEnumValues(t){return Object.keys(t).map((e=>t[e]))}static compareText(t,e,s=!1){return t=t||"",e=e||"",s&&(t=t.toLocaleLowerCase(),e=e.toLocaleLowerCase()),t>e?1:t<e?-1:0}static getTimeF(){return(new Date).getTime()/1e3}static getTimer(){return(new Date).getTime()-N}static isWhiteSpace(t){return!t||!t.trim()}static pad(t,e,s){return e=Math.max(e||2,1),s=s||"0",new Array(e-String(t).length+1).join(s)+t}static pad16(t,e,s){return e=Math.max(e||2,1),s=s||"0",new Array(e-t.toString(16).length+1).join(s)+t.toString(16)}static pick(...t){const e=t.length;let s;for(let i=0;i<e;i++)if(s=t[i],null!=s)return s}static pickNum(...t){const e=t.length;for(let s=0;s<e;s++)if(!isNaN(t[s])&&null!==t[s])return t[s];return NaN}static included(t,...e){const s=e.length;for(let i=0;i<s;i++)if(e[i]==t)return!0;return!1}static compareTextValue(t,e,s,i){if(t===e)return!0;let r=String(t),n=null==e?void 0:String(e);return!r&&!n||!(!r||!n)&&(s||(r=r.toLowerCase(),n=n.toLowerCase()),i?n.indexOf(r)>=0:r==n)}static cast(t,e){return t instanceof e?t:null}static irandom(t,e){if(void 0!==e){const s=t>>0,i=e>>0;return Math.random()*(i-s)+s>>>0}{const e=t>>0;return Math.random()*e>>0}}static irandomExcept(t,e,s){if(0===t&&1===e&&isNaN(s))throw new Error("Invalid irandom2");for(;;){const i=this.irandom(e,s);if(i!==t)return i}}static brandom(){return Math.random()>.5}static srandom(t,e){let s="";const i=this.irandom(t,e);for(let t=0;t<i;t++)s+=String.fromCharCode(this.irandom(97,123));return s}static erandom(t){const e=Object.values(t);return e[this.irandom(e.length)]}static arandom(t){return t[Math.random()*t.length>>0]}static iarandom(t,e,s){const i=new Array;for(let s=t;s<e;s++)i.push(s);for(;i.length>s;)i.splice(I.irandom(i.length),1);return i}static alert(t){window.alert(t)}static toInt(t,e){const s=parseInt(t,e||10);return isNaN(s)?0:s}static toFloat(t){const e=parseFloat(t);return isNaN(e)?0:e}static toEven(t){return 1&t?t+1:t}static hex(t,e=2,s="0"){e=Math.max(e||2,1);const i=t.toString(16);return s=s||"0",new Array(e-i.length+1).join(s)+i}static toStr(t){return Number.isNaN(t)||null==t?"":String(t)}static extend(t,e){t=t||{};for(let s in e)t[s]=e[s];return t}static equalNumbers(t,e){return isNaN(t)==isNaN(e)&&!isNaN(t)&&t==e}static equalArrays(t,e){if(t===e)return!0;if(null==t||null==e)return!1;const s=t.length;if(s!=e.length)return!1;for(let i=0;i<s;++i)if(t[i]!==e[i])return!1;return!0}static equalObjects(t,e){if(t===e)return!0;if(!t&&!e)return!0;if(!t||!e)return!1;for(var s in t)if(t.hasOwnProperty(s)&&t[s]!==e[s])return!1;for(var s in e)if(e.hasOwnProperty(s)&&t[s]!==e[s])return!1;return!0}static parseDate(t,e){const s=new Date(t);return isNaN(s.getTime())?e||new Date:s}static isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static incMonth(t,e){const s=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(s,I.month_days[I.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t}static minDate(t,e){return null!==t?t:null!==e?e:t.getTime()<e.getTime()?t:e}static maxDate(t,e){return null!==t?e:null!==e||t.getTime()>e.getTime()?t:e}static getTextLength2(t){let e=0,s=0,i=0;for(;i=t.charCodeAt(s++);e+=i>>7?2:1);return e}static getClassName(t){if(t&&t.constructor)return t.constructor.name||function(t){let e=t.toString();return e=e.substring(9),e=e.substring(0,e.indexOf("(")),e}(t.constructor)}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isEmpty(t){if(t)for(let e in t)return!1;return!0}static isNotEmpty(t){if(t)for(let e in t)return!0;return!1}static capitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return e>="A"&&e<="Z"?t:e.toUpperCase()+t.slice(1)}static uncapitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return e>="a"&&e<="z"?t:e.toLowerCase()+t.slice(1)}static labelize(t){if("string"!=typeof t)return"";const e=t.charAt(0);let s=(t=e>="A"&&e<="Z"?t:e.toUpperCase()+t.slice(1)).charAt(0);for(let e=1;e<t.length;e++){const i=t.charAt(e);i>="A"&&i<="Z"&&(s+=" "),s+=i}return s}static deepClone(t){if(t instanceof Date)return new Date(t);if(null==t||"object"!=typeof t)return t;{const e=h(t)?[]:{};for(let s of Object.keys(t))e[s]=I.deepClone(t[s]);return e}}static getArray(t,e){const s=[];for(let i=0;i<t;i++)s.push(e);return s}static getNumArray(t,e=0){const s=[];for(let i=0;i<t;i++)s.push(e);return s}static hasSetter(t,e){for(;t;){const s=Reflect.getOwnPropertyDescriptor(t,e);if(s)return s.writable||!!s.set;t=Object.getPrototypeOf(t)}return!1}static dataUriToBinary(t){const e=";base64,",s=t.indexOf(e)+8,i=t.substring(s),r=window.atob(i),n=r.length,h=new Uint8Array(new ArrayBuffer(n));for(let t=0;t<n;t++)h[t]=r.charCodeAt(t);return h}static assignProps(t,e){let s=!1;if(e)for(let i in e)e[i]!==t[i]&&(t[i]=e[i],s=!0);return s}static assignStyleAndProps(t,e){let s=!1;if(e)for(let i in e)("style"===i||t.hasOwnProperty(i))&&(t[i]=e[i],s=!0);return s}static dedupe(t,e){for(let s=(t=t.sort(e||((t,e)=>t>e?1:t<e?-1:0))).length-1;s>0;s--)t[s]===t[s-1]&&t.splice(s,1);return t}static isUnique(t,e){for(let s=(t=t.sort(e||((t,e)=>t>e?1:t<e?-1:0))).length-1;s>0;s--)if(t[s]===t[s-1])return!1;return!0}static sortNum(t){return t.sort(((t,e)=>t-e))}static logElapsed(t,e){const s=+new Date;e(),console.log(t,+new Date-s+"ms")}static clamp(t,e,s){return isNaN(s)||(t=Math.min(t,s)),isNaN(e)||(t=Math.max(t,e)),t}static splice(t,e,s,i){const r=[e,s].concat(i);Array.prototype.splice.apply(t,r)}static makeIntArray(t,e){const s=new Array(Math.max(0,e-t));for(let i=t;i<e;i++)s[i-t]=i;return s}static setInterval(t,e){return setInterval(t,e)}static clearInterval(t){clearInterval(t)}static isStringArray(t){return h(t)&&t.every((t=>"string"==typeof t))}static isNumberArray(t){return h(t)&&t.every((t=>"number"==typeof t))}static makeLineSeparator(t){if(h(t)){if(t.length>0){let e=t[0];for(let s=1,i=t.length;s<i;s++)e+="|"+t[s];return new RegExp(e,"g")}}else if(t)return new RegExp(t,"g")}static stripQuotes(t){const e=t.charCodeAt(0);return e===D?t=t.replace(O,"$1"):e===B&&(t=t.replace(R,"$1")),t}static isDate(t){return"[object Date]"===Object.prototype.toString.call(t)}static isValidDate(t){return t.getTime()==t.getTime()}static asFunction(t){return"function"==typeof t?t:void 0}static getFieldProp(t){const e=t.indexOf(".");if(e>=0)return{field:t.substring(0,e),props:t.substring(e+1).split(".")}}static watch(){return new F}static startsWith(t,e){if(t&&e)return 0===t.indexOf(e)}static endsWith(t,e){if(t&&e)return t.indexOf(e,-t.length)===t.length-e.length}static scaleNumber(t,e,s){const i=Math.abs(t);if(i>=1e3){let r=e.length-1;for(;r;){const n=Math.pow(1e3,r--);if(n<=Math.pow(10,Math.log(i)*Math.LOG10E)&&(s||10*i%n==0))return{value:t/n,symbol:e[r]}}}}}I.week_days=["일","월","화","수","목","금","토"],I.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],I.uniqueKey=function(){let t=Math.random().toString(36).substring(2,9)+"-",e=0;return function(){return"rr-chart-"+t+e++}}();class F{constructor(){this._started=+new Date}elapsed(t=!1){const e=+new Date-this._started;return t&&(this._started=+new Date),e}elapsedText(t=!1,e="ms."){return this.elapsed(t)+e}}function z(t){return{width:t.width,height:t.height}}class ${static create(t,e,s,i){return I.isObject(t)?new $(t.x,t.y,t.width,t.height):I.isEmpty(e)?new $(t,t,t,t):I.isEmpty(s)?new $(t,e,t,e):new $(t,e,s,i)}constructor(t=0,e=0,s=0,i=0){this.x=t,this.y=e,this.width=s,this.height=i}get left(){return this.x}set left(t){const e=t-this.x;this.x+=e,this.width-=e}get right(){return this.x+this.width}set right(t){const e=t-(this.x+this.width);this.width+=e}get top(){return this.y}set top(t){const e=t-this.y;this.y+=e,this.height-=e}get bottom(){return this.y+this.height}set bottom(t){const e=t-(this.y+this.height);this.height+=e}get isEmpty(){return 0===this.width||0===this.height}get isValid(){return t=this,!(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height));var t}clone(){return new $(this.x,this.y,this.width,this.height)}getInner(){return new $(0,0,this.width,this.height)}equals(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}leftBy(t){return this.x+=t,this.width-=t,this}rightBy(t){return this.width+=t,this}topBy(t){return this.y+=t,this.height-=t,this}bottomBy(t){return this.height+=t,this}shrink(t,e){return this.width-=t,this.height-=e,this}expand(t,e){return this.width+=t,this.height+=e,this}contains(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}setEmpty(){return this.width=this.height=0,this}move(t=0,e=0){return this.x=t,this.y=e,this}set(t,e,s,i){return this.x=t,this.y=e,this.width=s,this.height=i,this}setWidth(t){return this.width=t,this}copy(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyHorz(t){return this.x=t.x,this.width=t.width,this}copyVert(t){return this.y=t.y,this.height=t.height,this}inflate(t=0,e=void 0,s=void 0,i=void 0){return e=void 0!==e?e:t,s=void 0!==s?s:t,i=void 0!==i?i:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),s&&(this.right=this.right+s),i&&(this.bottom=this.bottom+i),this}offset(t,e){return this.x+=t,this.y+=e,this}round(){const t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t}union(t){const e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e}normalize(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this}toString(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"}}var H;$.Empty=new $,$.Temp=new $,function(t){t.LINE="line",t.LINES="lines",t.CIRCLE="circle",t.DIAMOND="diamond",t.RECTANGLE="rectangle",t.SQUARE="square",t.TRIANGLE="triangle",t.ITRIANGLE="itriangle"}(H||(H={})),I.getEnumValues(H);class j{static line(t,e,s,i){return["M",t,e,"L",s,i]}static lines(t){let e=0;const s=["M",t[e],t[e+1]];for(;e<t.length;e++)s.push("L",t[e++],t[e]);return s.push("Z"),s}static rect(t){return this.rectangle(t.x,t.y,t.width,t.height)}static rectangle(t,e,s,i){return["M",t,e,"L",t+s,e,"L",t+s,e+i,"L",t,e+i,"Z"]}static square(t,e,s,i){const r=Math.min(s,i);return["M",t+=(s-r)/2,e+=(i-r)/2,"L",t+r,e,"L",t+r,e+r,"L",t,e+r,"Z"]}static circle(t,e,s){return this.arc(t,e,s,s,0,2*Math.PI,!1)}static arc(t,e,s,i,r,n,h){const a=.001,o=Math.abs(n-r-2*Math.PI)<a;n-=a,h=I.pick(h,o);const l=Math.cos(r),c=Math.sin(r),d=Math.cos(n),u=Math.sin(n),_=n-r-Math.PI<a?0:1,p=[];return p.push("M",t+s*l,e+i*c,"A",s,i,0,_,1,t+s*d,e+i*u),h||p.push("Z"),p}static sector(t,e,s,i,r,n,h,a){const o=.001,l=Math.abs(h-n-2*Math.PI)<o;h-=o;const c=Math.cos(n),d=Math.sin(n),u=Math.cos(h),_=Math.sin(h),p=a?1:0,g=h-n-Math.PI<o?0:1,m=s*r,y=i*r,x=[];return x.push("M",t+s*c,e+i*d,"A",s,i,0,g,p,t+s*u,e+i*_),l?x.push("M",t+m*u,e+y*_):x.push("L",t+m*u,e+y*_),x.push("A",m,y,0,g,1-p,t+m*c,e+y*d),l||x.push("Z"),x}static diamond(t,e,s,i){return["M",t+s/2,e,"L",t+s,e+i/2,"L",t+s/2,e+i,"L",t,e+i/2,"Z"]}static triangle(t,e,s,i){return["M",t+s/2,e,"L",t+s,e+i,"L",t,e+i,"Z"]}static itriangle(t,e,s,i){return["M",t,e,"L",t+s,e,"L",t+s/2,e+i,"Z"]}}const W={background:"fill",border:"stroke",borderWidth:"strokeWidth",borderRadius:"borderRadius"};class G extends i{constructor(t,e,s){super(),this._inited=!1,this._testing=!1,this._dirty=!0,this._invalidElements=[],this._toAnimation=0,this._invalidateLock=!1,this._lockDirty=!1,this._cssVars={},this._windowResizeHandler=t=>{this._windowResized()},this._clickHandler=t=>{var e;this._doClick(t),null===(e=this._tool)||void 0===e||e.click(t)},this._dblClickHandler=t=>{var e;this._doDblClick(t),null===(e=this._tool)||void 0===e||e.dblClick(t)},this._touchMoveHandler=t=>{var e;this._doTouchMove(t),null===(e=this._tool)||void 0===e||e.touchMove(t)},this._pointerDownHandler=t=>{var e;this._doPointerDown(t)||null===(e=this._tool)||void 0===e||e.pointerDown(t)},this._pointerMoveHandler=t=>{var e;this._doPointerMove(t),null===(e=this._tool)||void 0===e||e.pointerMove(t)},this._pointerUpHandler=t=>{var e;this._doPointerUp(t),null===(e=this._tool)||void 0===e||e.pointerUp(t)},this._pointerCancelHandler=t=>{var e;this._doPointerCancel(t),null===(e=this._tool)||void 0===e||e.pointerCancel(t)},this._pointerLeaveHandler=t=>{var e;this._doPointerLeave(t),null===(e=this._tool)||void 0===e||e.pointerLeave(t)},this._keyPressHandler=t=>{var e;this._doKeyPress(t),null===(e=this._tool)||void 0===e||e.keyPress(t)},this._wheelHandler=t=>{var e;this._doWheel(t),null===(e=this._tool)||void 0===e||e.wheel(t)},!t&&e instanceof HTMLDivElement&&(t=e.ownerDocument),this.$_initControl(t||document,e,s),this._resigterEventHandlers(this._dom),this._inited=!0,this.invalidate(!0)}_doDestory(){this._unresigterEventHandlers(this._dom),E.remove(this._dom),this._dom=null,this._container=null}isInited(){return this._inited}isTesting(){return this._testing}doc(){return this._dom.ownerDocument}dom(){return this._dom}width(){return this._container.offsetWidth}height(){return this._container.offsetHeight}activeTool(){return this._activeTool||this._tool}setSctiveTool(t){t!==this._activeTool&&(this._activeTool=t,this._tool=t||this._defaultTool)}appendDom(t){t&&this._htmlRoot.append(t)}addElement(t){t&&this._root.add(t)}removeElement(t){this._root.removeChild(t)}invalidate(t=!1){t||!this._invalidateLock&&!this._dirty&&this._inited?(this._dirty=!0,this._requestTimer||this._testing||this.$_requestRender()):this._invalidateLock&&(this._lockDirty=!0)}invalidateLayout(t=!1){this.invalidate(t)}setLock(){this._invalidateLock=!0}releaseLock(t=!0){this._invalidateLock&&(this._invalidateLock=!1),this._lockDirty&&t&&this.invalidate(),this._lockDirty=!1}lock(t){this.setLock();try{t(this)}finally{this.releaseLock()}}silentLock(t){this.setLock();try{t(this)}finally{this.releaseLock(!1)}}getBounds(){return this._dom.getBoundingClientRect()}setAnimation(t){this._toAnimation=t||0}fling(t,e){}getCssVar(t){let e=this._cssVars[t];return t in this._cssVars?this._cssVars[t]:(e=getComputedStyle(this._root.dom).getPropertyValue(t),this._cssVars[t]=e,e)}_setTesting(){this._testing=!0,q.TESTING=!0}_setSize(t,e){isNaN(t)||(this._container.style.width=t+"px"),isNaN(e)||(this._container.style.height=e+"px")}$_addListener(t,e,s){t.addEventListener(e,s)}_resigterEventHandlers(t){window.addEventListener("resize",this._windowResizeHandler),this.$_addListener(t,"click",this._clickHandler),this.$_addListener(t,"dblclick",this._dblClickHandler),this.$_addListener(t,"touchmove",this._touchMoveHandler),this.$_addListener(t,"pointerdown",this._pointerDownHandler),this.$_addListener(t,"pointermove",this._pointerMoveHandler),this.$_addListener(t,"pointerup",this._pointerUpHandler),this.$_addListener(t,"pointercancel",this._pointerCancelHandler),this.$_addListener(t,"pointerleave",this._pointerLeaveHandler),this.$_addListener(t,"keypress",this._keyPressHandler),this.$_addListener(t,"wheel",this._wheelHandler)}_unresigterEventHandlers(t){window.removeEventListener("resize",this._windowResizeHandler),t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblClickHandler),t.removeEventListener("touchmove",this._touchMoveHandler),t.removeEventListener("pointerdown",this._pointerDownHandler),t.removeEventListener("pointermove",this._pointerMoveHandler),t.removeEventListener("pointerup",this._pointerUpHandler),t.removeEventListener("pointercancel",this._pointerCancelHandler),t.removeEventListener("pointerleave",this._pointerLeaveHandler),t.removeEventListener("keypress",this._keyPressHandler),t.removeEventListener("wheel",this._wheelHandler)}_prepareRenderers(t){}$_initControl(t,e,s){if(this._inited)return;e instanceof HTMLDivElement?this._container=e:this._container=t.getElementById(e),this._container instanceof HTMLDivElement||S(g.invalidOuterDiv,e);const i=this._container.ownerDocument,n=this._dom=i.createElement("div");Object.assign(n.style,{position:"relative",width:"100%",height:"100%",boxSizing:"border-box",overflow:"hidden","-webkit-touch-callout":"none","-webkit-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"}),n.className=s,this._container.appendChild(n);const h=this._svg=i.createElementNS(r,"svg");h.style.setProperty("overflow","visible","important"),h.setAttribute("width","100%"),h.setAttribute("height","100%");const a=i.createElement("desc");a.textContent="Created with RealReport-Chart 1.0.0",h.appendChild(a);const o=this._defs=i.createElementNS(r,"defs");h.appendChild(o),n.appendChild(h),this._root=new U(this),h.appendChild(this._root._dom),this._htmlRoot=i.createElement("div"),n.appendChild(this._htmlRoot),Object.assign(this._htmlRoot.style,{position:"absolute"}),this._defaultTool=this._tool=this._creatDefaultTool()}_render(){this.$_render()}$_invalidateElement(t){this._invalidElements.push(t),this.invalidate()}$_requestRender(){window.requestAnimationFrame?this._requestTimer=requestAnimationFrame((()=>this.$_render())):setTimeout((()=>{this.$_render()}),0)}updateNow(){this.$_render()}$_render(){const t=+new Date;if(t<=this._toAnimation)this.$_requestRender();else{try{this._doBeforeRender();const t=this._dom.getBoundingClientRect(),e=this._svg.getBoundingClientRect(),s=this._svg.clientWidth,i=this._svg.clientHeight;this._htmlRoot.style.left=e.left-t.left+"px",this._htmlRoot.style.top=e.top-t.top+"px",this._doRender({x:0,y:0,width:s,height:i})}finally{this._dirty=!1,this._requestTimer=null,this._invalidElements=[],this._doAfterRender()}u.log("render in "+(+new Date-t)+"ms.")}}_doBeforeRender(){}_doAfterRender(){}_doClick(t){}_doDblClick(t){}_doTouchMove(t){return!1}_doPointerDown(t){return!1}_doPointerMove(t){}_doPointerUp(t){}_doPointerCancel(t){}_doPointerLeave(t){}_doKeyPress(t){}_doWheel(t){}_windowResized(){this.invalidateLayout()}}class q extends s{constructor(t,e="g",s=""){super(),this._visible=!0,this._zIndex=0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._styles={},this._styleDirty=!1,this._dom=t.createElementNS(r,e),s&&this.setAttr("class",s)}_doDestory(){this.remove()}get doc(){return this._dom.ownerDocument}get dom(){return this._dom}get parent(){return this._parent}get control(){return this._parent&&this._parent.control}get zIndex(){return this._zIndex}set zIndex(t){t!==this._zIndex&&(this._zIndex=t)}get x(){return this._x}set x(t){t!==this._x&&(this._x=t,this.setAttr("x",this._x))}get y(){return this._x}set y(t){t!==this._y&&(this._y=t,this.setAttr("y",this._y))}get width(){return this._width}set width(t){t!==this._width&&(this._width=t,this.setAttr("width",isNaN(t)?"":t))}get height(){return this._height}set height(t){t!==this._height&&(this._height=t,this.setAttr("height",isNaN(t)?"":t))}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?"":"none"))}get rotation(){return this._rotation}set rotation(t){t!=this._rotation&&(this._rotation=t,this._updateTransform())}setRotaion(t,e,s){return t===this._originX&&e===this._originY&&s===this._rotation||(this._originX=t,this._originY=e,this._rotation=s,this._updateTransform()),this}getStyle(t){return window.getComputedStyle(this._dom).getPropertyValue(t)}hasStyle(t){return this.dom.classList.contains(t)}add(t){return t&&t._parent!==this&&(t._parent=this,this._dom.appendChild(t._dom),t._doAttached(this)),t}insertChild(t,e){return t&&t._parent!==this&&(t._parent=this,this._dom.insertBefore(t._dom,e._dom),t._doAttached(this)),t}insertFirst(t){return t&&t._parent!==this&&(t._parent=this,this._dom.insertBefore(t._dom,this._dom.firstChild),t._doAttached(this)),t}removeChild(t){t&&t._parent===this&&(this._dom.removeChild(t._dom),t._parent=null,t._doDetached(this))}remove(){return this._parent&&this._parent.removeChild(this),this}getAttr(t){return this.dom.getAttribute(t)}setAttr(t,e){return this.dom.setAttribute(t,e),this}setAttrs(t){for(let e in t)this.dom.setAttribute(e,t[e]);return this}unsetAttr(t){return this.dom.removeAttribute(t),this}setBounds(t,e,s,i){return this.translate(t,e),this.resize(s,i),this}setRect(t){return this.translate(t.x,t.y),this.resize(t.width,t.height),this}getRect(){return $.create(this._translateX,this._translateY,this.width,this.height)}translate(t,e){t===this._translateX&&e===this._translateY||(I.isValidNumber(t)&&(this._translateX=t),I.isValidNumber(e)&&(this._translateY=e),this._updateTransform())}resize(t,e,s=!0){return t!==this._width&&s&&this.setAttr("width",this._width=t),e!==this._height&&s&&this.setAttr("height",this._height=e),this}appendDom(t){return t&&this._dom.appendChild(t),t}insertDom(t,e){return t&&this._dom.insertBefore(t,e),t}clearDom(){const t=this._dom;let e;for(;e=t.lastChild;)t.removeChild(e)}clearStyles(){const t=this.dom.style;let e=!1;for(let s in this._styles)t.removeProperty(s),e=!0;return this._styles={},e&&(this._styleDirty=!0),e}clearStyle(t){const e=this.dom.style;let s=!1;if(t){for(let i of t)i in this._styles&&(e.removeProperty(i),delete this._styles[i],s=!0);s&&(this._styleDirty=!0)}return s}setStyles(t){const e=this.dom.style;let s=!1;if(t){for(let i in t)i in W||this._styles[i]===t[i]||(e[i]=this._styles[i]=t[i],s=!0);s&&(this._styleDirty=!0)}return s}resetStyles(t){const e=this.clearStyles();return this.setStyles(t)||e}_setBackgroundBorderRadius(t){}setBackStyles(t){const e=this.dom.style;let s=!1;if(t){for(let i in t)if(i in W&&this._styles[i]!==t[i]){if("borderRadius"===i)this._setBackgroundBorderRadius(l(parseFloat(t[i]),0)),this._styles[i]=t[i];else if(i in W){const s=W[i];e[s]=this._styles[s]=t[i]}s=!0}s&&(this._styleDirty=!0)}return s}setStyle(t,e){let s=!1;return t in W||e===this._styles[t]||(s=this._styleDirty=!0,this._styles[t]=e,this.dom.style[t]=e),s}setBackStyle(t,e){let s=!1;return t in W&&e!==this._styles[t]&&(s=this._styleDirty=!0,this._styles[t]=e,this.dom.style[t]=e),s}putStyles(t,e){if(e=e||{},t)for(let s in t)e[s]=t[s];return e}putStyle(t,e,s){return(s=s||{})[t]=e,s}removeLater(t=!0,e=.5){return this}fadeout(t,e){return this}_testing(){return q.TESTING}_doAttached(t){}_doDetached(t){}_updateTransform(){const t=this._dom;let e=this._translateX,s=this._translateY,i=[];(I.isValidNumber(e)||I.isValidNumber(s))&&(e=e||0,s=s||0,i=["translate("+e+","+s+")"]),I.isNotEmpty(this._matrix)&&i.push("matrix("+this._matrix.join(",")+")"),this._rotation&&i.push("rotate("+this._rotation+" "+I.pick(this._originX,t.getAttribute("x"),0)+" "+I.pick(this._originY,t.getAttribute("y")||0)+")");const r=I.getNumber(this._scaleX,1),n=I.getNumber(this._scaleY,1);1===r&&1===n||i.push("scale("+r+" "+n+")"),i.length&&this._dom.setAttribute("transform",i.join(" "))}}q.TESTING=!1,q.DEBUGGING=!1;class U extends q{constructor(t){super(t.doc()),this._control=t}get control(){return this._control}}class X extends q{constructor(t,e=null,s=""){super(t,"path",s),e&&this.setPath(e)}setPath(t){t!==this._path&&(this._path=t,a(t)?this.setAttr("d",t):this.setAttr("d",t.join(" ")))}renderShape(t,e,s,i){let r;switch(t){case"squre":case"diamond":case"triangle":case"itriangle":r=j[t](e-i,s-i,2*i,2*i);break;default:r=j.circle(e,s,i)}this.setPath(r)}}class Y{static empty(){return new Y}static create(t=0,e=0){return new Y(t,e)}constructor(t=0,e=0){this.x=t,this.y=e}get isEmpty(){return 0===this.x||0===this.y}clone(){return new Y(this.x,this.y)}equals(t){return t===this||t&&this.x===t.x&&this.y===t.y}setEmpty(){return this.x=this.y=0,this}set(t,e){return this.x=t,this.y=e,this}round(){const t=this.clone();return t.x>>>=0,t.y>>>=0,t}toString(){return"{x: "+this.x+", y: "+this.y+"}"}}class Z{static empty(){return new Z}static create(t=0,e=0){return new Z(t,e)}constructor(t=0,e=0){this.width=t,this.height=e}get isEmpty(){return 0===this.width||0===this.height}clone(){return new Z(this.width,this.height)}equals(t){return t===this||t&&this.width===t.width&&this.height===t.height}setEmpty(){return this.width=this.height=0,this}set(t,e){return this.width=t,this.height=e,this}round(){const t=this.clone();return t.width>>>=0,t.height>>>=0,t}toString(){return"{width: "+this.width+", height: "+this.height+"}"}}Z.EMPTY=new Z;class K extends q{constructor(t,e=""){super(t,"g",e),this._doInitChildren(t)}_movable(){return!1}setAttr(t,e){return K.IGNORE_ATTRS.hasOwnProperty(t)||super.setAttr(t,e),this}_doInitChildren(t){}}K.IGNORE_ATTRS={width:"",height:""};class Q extends X{constructor(t,e,s=""){super(t,null,s),this.setLine(e)}setLine(t,e,s,i){I.isNumber(t)?this.setPath(j.line(t,e,s,i)):t&&this.setPath(j.line(t.x1,t.y1,t.x2,t.y2))}setVLine(t,e,s){this.setPath(j.line(t,e,t,s))}setVLineC(t,e,s){const i=parseFloat(this.getStyle("stroke-width"));isNaN(i)||(t=Math.round(t)-i%2/2),this.setPath(j.line(t,e,t,s))}setHLine(t,e,s){this.setPath(j.line(e,t,s,t))}setHLineC(t,e,s){const i=parseFloat(this.getStyle("stroke-width"));isNaN(i)||(t=Math.round(t)-i%2/2),this.setPath(j.line(e,t,s,t))}}class J extends s{constructor(t,e=!0){super(),this.chart=t,this._visible=e}visible(){return this._visible}setVisible(t){var e;t!==this._visible&&(this._visible=t,null===(e=this.chart)||void 0===e||e._visibleChanged(this))}load(t){this._doLoadSimple(t)||this._doLoad(t)}prepareRender(){this._doPrepareRender(this.chart)}_changed(){var t;null===(t=this.chart)||void 0===t||t._modelChanged(this)}_doLoadSimple(t){return!1}_doLoad(t){for(const e in t){let s=t[e];h(s)?this[e]=s.slice(0):this[e]instanceof J?this[e].load(s):n(s)?this[e]=Object.assign({},s):this[e]=s}}_doPrepareRender(t){}}class tt extends J{constructor(t,e){super(t.chart),this.source=e}text(){return this.source.legendLabel()}}var et,st,it,rt,nt,ht,at,ot,lt,ct,dt;!function(t){t.BOTTOM="bottom",t.TOP="top",t.RIGHT="right",t.LEFT="left",t.PLOT="plot"}(et||(et={})),function(t){t.CHART="chart",t.PLOT="plot"}(st||(st={})),function(t){t.AUTO="auto",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(it||(it={}));class ut extends J{constructor(){super(...arguments),this.position=et.BOTTOM,this.layout=it.AUTO,this.alignBase=st.PLOT,this.align=P.CENTER,this.verticalAlign=T.MIDDLE,this.offsetX=0,this.offsetY=0,this.margin=10,this.padding=5,this.itemGap=12}items(){return this._items.slice(0)}isEmpty(){return!this._items||this._items.length<1}getLayout(){if(this.layout!==it.AUTO||this.position===et.PLOT)return this.layout;switch(this.position){case et.BOTTOM:case et.TOP:return it.HORIZONTAL;default:return it.VERTICAL}}prepareRender(){this._items=this.$_collectItems()}_doLoad(t){super._doLoad(t)}$_collectItems(){return this.chart._getLegendSources().map((t=>new tt(this,t)))}}class _t extends q{static create(t,e,s,i,r,n=0,h=""){return new _t(t,{x:e,y:s,width:i,height:r,r:n},h)}constructor(t,e=null,s=""){super(t,"rect",s),this.rect=e}get rect(){return this._rect&&Object.assign({},this._rect)}set rect(t){if(t!==this._rect&&(this._rect=t&&Object.assign({},t),t)){this.setRect(t);let e=t.rx||t.r,s=t.ry||t.r;e>0&&this.dom.setAttribute("rx",String(e)),s>0&&this.dom.setAttribute("rx",String(s))}}setBounds(t,e,s,i,r=0){return this.rect={x:t,y:e,width:s,height:i,r:r},this}setRadius(t){t>0&&(this._rect&&(this._rect.rx=this._rect.ry=t),this.dom.setAttribute("rx",String(t)),this.dom.setAttribute("ry",String(t)))}_setBackgroundBorderRadius(t){this.setRadius(t)}}class pt{static getContrast(t,e,s){return new pt(t).getContrast(e,s)}static interpolate(t,e,s){const i=(16711680&t)>>16,r=(65280&t)>>8,n=255&t;return(i+(((16711680&e)>>16)-i)*s<<16)+(r+(((65280&e)>>8)-r)*s<<8)+(n+((255&e)-n)*s)}constructor(t){this.r=0,this.g=0,this.b=0,this.a=1,(t=t&&t.trim())&&(I.startsWith(t,"rgb(")&&I.endsWith(t,")")?this.$_parseRgb(t.substring(4,t.length-1)):I.startsWith(t,"rgba(")&&I.endsWith(t,")")?this.$_parseRgb(t.substring(5,t.length-1)):I.startsWith(t,"#")&&this.$_parseNumber(t.substr(1)))}get rgba(){return"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"}getContrast(t,e){return.299*this.r+.587*this.g+.114*this.b>140?t||"#000000":e||"#FFFFFF"}brighten(t,e=null){return(e=e||new pt(null)).r=Math.ceil(this.r+(255-this.r)*t),e.g=Math.ceil(this.g+(255-this.g)*t),e.b=Math.ceil(this.b+(255-this.b)*t),e.a=this.a,e}toString(){return this.rgba}$_parseRgb(t){const e=t.split(/\,\s*/);e.length>=3&&(this.r=+e[0],this.g=+e[1],this.b=+e[2],e.length>=4?this.a=+e[3]:this.a=1)}$_parseNumber(t){}}!function(t){t.START="start",t.MIDDLE="middle",t.END="end"}(rt||(rt={})),function(t){t.TOP="top",t.MIDDLE="middle",t.BOTTOM="bottom"}(nt||(nt={}));class gt extends q{constructor(t,e=""){super(t,"text",e),this._layout=nt.TOP,this._dirty=!0,this._text="",this.setAttr("text-anchor","middle")}get text(){return this._text}set text(t){(t=t||"")!==this._text&&(this._dirty=!0,this.dom.textContent=this._text=t,this.layoutText())}get anchor(){return this.getAttr("text-anchor")}set anchor(t){t!==this.anchor&&this.setAttr("text-anchor",t)}get layout(){return this._layout}set layout(t){t!==this._layout&&(this._layout=t,this.layoutText())}get svg(){return this.dom.innerHTML}set svg(t){t=t||"",this.dom.innerHTML=t}get opacity(){return this.getAttr("fill-opacity")}set opacity(t){this.setAttr("fill-opacity",t)}getAscent(t){return.75*t}layoutText(t){const e=this.getBBounds(),s=this.getAscent(isNaN(t)?e.height:t);let i;switch(this._layout){case nt.MIDDLE:i=Math.floor(s/2);break;case nt.BOTTOM:i=s-e.height;break;default:i=Math.ceil(s)}this.setAttr("y",i)}isFitIn(t){return this.calcWidth()>=t}calcWidth(){const t=this._text.length;return t&&this.dom.getSubStringLength(0,t)}calcRangeWidth(t=0,e=Number.MAX_SAFE_INTEGER){return t=Math.max(0,t),(e=Math.min(this._text.length,e))>t?this.dom.getSubStringLength(t,e-t):0}truncate(t,e){let s=this._text;if(!s)return;const i=this.dom;let r,n=0,h=s.length;do{r=Math.ceil((n+h)/2);i.getSubStringLength(0,r)>t?h=r-1:n=r}while(n<h);for(this.text=s.substring(0,n)+"…";n>0&&this.calcWidth()>t;)this.text=s.substring(0,--n)+"…"}setContrast(t,e="black",s="white"){return this.setStyle("fill",pt.getContrast(getComputedStyle(t).fill,e,s)),this}clearDom(){super.clearDom(),this._dirty=!0}setStyles(t){let e=super.setStyles(t);return e&&this.layoutText(),e}setStyle(t,e){let s=super.setStyle(t,e);return s&&this.layoutText(),s}getBBounds(){return(this._dirty||this._styleDirty)&&(this._bounds=this.dom.getBBox(),this._dirty=this._styleDirty=!1),this._bounds}getBBoundsTest(){return(this._dirty||this._styleDirty)&&(this._bounds={x:this.x,y:this.y,width:100,height:30},this._dirty=this._styleDirty=!1),this._bounds}}class mt extends q{constructor(t,e=""){super(t,"g",e),this.add(this._debugRect=new _t(t))}measure(t,e,s,i,r){const n=this._doMeasure(t,this.model=e,s,i,r);return this.mw=n.width,this.mh=n.height,n}layout(t){return this._doLayout(t),this._debugRect.setBounds(0,0,this.width,this.height),this._debugRect.setStyles({fill:"transparent",stroke:"#00000018"}),this}resizeByMeasured(){return this.resize(this.mw,this.mh),this}}class yt extends mt{constructor(t){super(t,"rct-axis-title"),this.add(this._textView=new gt(t))}_doMeasure(t,e,s,i,r){return this._textView.rotation=0,this._textView.text=e.text,z(this._textView.getBBounds())}_doLayout(t){(this._isHorz=t)||this._textView.setRotaion(0,this._textView.getBBounds().height/2,270)}layout(t){return super.layout(t),this._debugRect.setBounds(-this.width/2,0,this.width,this.height),this._isHorz||this._debugRect.setRotaion(this.width/2,this.height/2,270),this}}class xt extends mt{constructor(t){super(t,"rct-axis"),this._labelViews=[],this.add(this._titleView=new yt(t)),this.add(this._labelContainer=new q(t))}checkHeight(t,e,s){const i=this.model,r=this.$_prepareChecker(t);let n=i.tick.mark.length;return n+=r?r.getBBounds().height:0,(this._titleView.visible=i.title.visible())&&(n+=this._titleView.measure(t,i.title,e,s,1).height),n}checkWidth(t,e,s){const i=this.model,r=this.$_prepareChecker(t);let n=i.tick.mark.length;return n+=r?r.getBBounds().width:0,(this._titleView.visible=i.title.visible())&&(n+=this._titleView.measure(t,i.title,e,s,1).height),n}_doMeasure(t,e,s,i,r){const n=this._isHorz,h=this._titleView,a=this._labelViews;let o=0;if(o+=this._markLen=e.tick.mark.length,this.$_prepareLabels(t,e),a.length>0){if(n)this._labelSize=a[0].getBBounds().height;else{this._labelSize=a[0].getBBounds().width;for(let t=1;t<a.length;t++)this._labelSize=Math.max(this._labelSize,a[t].getBBounds().width)}o+=this._labelSize}else this._labelSize=0;return h.visible&&(o+=h.mh),Z.create(n?s:o,n?o:i)}_doLayout(){const t=this._isHorz,e=this.model._ticks,s=this._titleView,i=this._labelViews,r=this.width,n=this.height;if(t){const t=this._markLen;i.forEach(((s,i)=>{s.anchor=rt.MIDDLE,s.translate(e[i].pos,t)}))}else{const t=r-this._markLen;i.forEach(((s,i)=>{s.translate(t-s.getBBounds().width,n-e[i].pos-s.getBBounds().height/2)}))}s.visible&&(s.resizeByMeasured().layout(t),t?s.translate(r/2,this._markLen+this._labelSize):s.translate(r-this._markLen-this._labelSize-s.height/2,(n-s.height)/2))}$_prepareChecker(t){const e=this.model._ticks[0];if(e){let s=this._labelViews[0];return s||(s=new gt(t,"rct-axis-label"),s.anchor=rt.START,this._labelContainer.add(s),this._labelViews.push(s)),s.text=e.label,s}}$_prepareLabels(t,e){const s=this.model._ticks,i=s.length,r=this._labelContainer,n=this._labelViews;for(;n.length<i;){const e=new gt(t,"rct-axis-label");e.anchor=rt.START,r.add(e),n.push(e)}for(;n.length>i;)n.pop().remove();n.forEach(((t,e)=>t.text=s[e].label))}}class wt{constructor(t){this.visible=!0,this.value=t}getProp(t){return null==(e=this.value)||isNaN(e)?this.value:this.value[t];var e}prepare(t){const e=this.value;h(e)?this._readArray(t,e):n(e)?this._readObject(t,e):this._readSingle(e)}_readArray(t,e){e.length>1?(this.x=e[l(t.xField,0)],this.y=e[l(t.yField,1)]):(this.x=this.index,this.y=e[l(t.yField,0)])}_readObject(t,e){var s,i,r,n;this.x=(s=e[t.xField],i=e.x,r=e.name,n=e.label,void 0!==s?s:void 0!==i?i:null!=r?r:n),this.y=d(e[t.yField],e.y,e.value)}_readSingle(t){this.x=this.index,this.y=t}}class ft{constructor(t){this._points=[],this._owner=t}get count(){return this._points.length}isEmpty(){return this._points.length<1}get(t){return this._points[t]}load(t){h(t)?(t=t.sort(((t,e)=>h(t)||n(t)?0:-1)),this._points=t.map((t=>this._owner.createPoint(t)))):this._points=[]}getProps(t){return this._points.map((e=>e.getProp(t)))}getValues(t){return this._points.map((e=>e[t]))}prepare(){const t=this._owner;this._points.forEach(((e,s)=>{e.index=s,e.prepare(t)}))}forEach(t){for(let e=0,s=this._points.length;e<s&&!0!==t(this._points[e],e);e++);}getVisibles(){return this._points}}class bt extends J{constructor(t){super(null==t?void 0:t.chart),this.axis=t}}class vt extends bt{constructor(){super(...arguments),this.text="Axis Title",this.margin=8}_doLoadSimple(t){if(a(t))return this.text=t,!0}}class At extends bt{constructor(){super(...arguments),this.circular=!1,this.startVisible=!0,this.endVisible=!0}}class Mt extends bt{constructor(){super(...arguments),this.length=7}}class St extends bt{constructor(t){super(t),this.mark=this._createMark()}getTick(t){if(null!=t){let e=String(t);return this.prefix&&(e=this.prefix+e),this.suffix&&(e+=this.suffix),e}return""}_createMark(){return new Mt(this.axis)}}class Pt extends J{constructor(t,e){super(t),this.opposite=!1,this.reversed=!1,this.minPadding=0,this.maxPadding=0,this.tickStart=!1,this.tickEnd=!1,this.valueUnit=1,this._series=[],this.name=e,this.title=new vt(this),this.tick=this._createTick(),this.grid=new At(this)}_createTick(){return new St(this)}prepareRender(){this._reversed=this.chart.isInverted(),this._doPrepareRender();let t=[];this._series.forEach((e=>{t=t.concat(e.collectValues(this))})),this._range=this._doCalcluateRange(t)}buildTicks(t){this._ticks=this._doBuildTicks(this._range.min,this._range.max,this._length=t)}getValue(t){return+t}contains(t){return t>=this._range.min&&t<=this._range.max}_connect(t){t&&!this._series.includes(t)&&this._series.push(t)}_doCalcluateRange(t){return{min:Math.min(...t)||0,max:Math.max(...t)||0}}}class Tt{constructor(t,e){this._items=[],this._map=new Map,this.chart=t,this.isX=e}get count(){return this._items.length}get first(){return this._items[0]}get items(){return this._items.slice(0)}load(t){const e=this.chart,s=this._items;h(t)?t.forEach(((t,i)=>s.push(this.$_loadAxis(e,t,i)))):n(t)&&s.push(this.$_loadAxis(e,t,0))}get(t){return this._map.get(t)}prepareRender(){this._items.forEach((t=>t.prepareRender()))}buildTicks(t){this._items.forEach((e=>e.buildTicks(t)))}connect(t){const e=this._items,s=this.isX?t.xAxis:t.yAxis;let i;return o(s)&&s>=0&&e.length?i=e[s]:a(s)&&(i=e.find((t=>t.name===s))),i||(i=e[0]),i&&i._connect(t),i}forEach(t){for(let e=0,s=this._items.length;e<s&&!0!==t(this._items[e],e);e++);}$_loadAxis(t,e,s){let i=t._getAxisType(e.type);if(!i){let r;if(h(e.categories))r="category";else if(this.isX){for(const i of t._getSeries().items())if(i.isCategorized()){if(e.name&&i.xAxis===e.name){r="category";break}if(o(i.xAxis)&&i.xAxis===s){r="category";break}}!r&&t.series.isCategorized()&&(r="category")}r&&(i=t._getAxisType(r))}i||(i=t._getAxisType("linear"));const r=new i(t,e.name);return r._isX=this.isX,r.load(e),r}}!function(t){t.TICK="tick",t.EDGE="edge"}(ht||(ht={}));class Lt extends Mt{constructor(){super(...arguments),this.position=ht.TICK}}class kt extends St{constructor(){super(...arguments),this.steps=1,this.showLast=!1}_createMark(){return new Lt(this.axis)}}class Et extends Pt{constructor(){super(...arguments),this._map=new Map}getCategories(){return this._cats}getWdith(t,e){return 0}_createTick(){return new kt(this)}_doPrepareRender(){this._collectCategories(this._series)}_doBuildTicks(t,e,s){const i=this._cats,r=i.length,n=[];this._minPad=l(this.minPadding,0),this._maxPad=l(this.maxPadding,0),t=this._min=Math.floor(t);const h=(e=this._max=Math.ceil(e))-t+1;this._interval=s/(h+this._minPad+this._maxPad);for(let h=t;h<=e;h++)n.push({pos:this.getPosition(s,h),value:h,label:this.tick.getTick(h<r?i[h]:h)});return n}getPosition(t,e){return this._minPad*this._interval+e*this._interval+this._interval/2}getPointWidth(t,e,s){return t/e.getPoints().count}getValue(t){return o(t)?t:this._map.get(t)}_collectCategories(t){const e=this.categories;if(h(e)&&e.length>0)this._cats=e.map((t=>null==t?null:t.toString()));else{const e=this._cats=[];if(h(t))for(const s of t){const t=s.collectCategories(this);for(const s of t)e.includes(s)||e.push(s)}}this._map.clear(),this._cats.forEach(((t,e)=>this._map.set(t,e)))}}class Nt extends St{constructor(){super(...arguments),this.stepPixels=72,this.integral=!1}buildSteps(t,e,s,i){let r;return r=Array.isArray(this.steps)?this.steps.slice(0):this.stepCount>0?this._getStepsByCount(this.stepCount,e,s,i):this.stepSize>0?this._getStepsBySize(this.stepSize,e,s,i):this.stepPixels>0?this._getStepsByPixels(t,this.stepPixels,e,s,i):[s,i],r}_getStepsByCount(t,e,s,i){s>e?(s=e,e=NaN):i<e&&(i=e,e=NaN),isNaN(e)&&this.integral;let r=(i-s)/(t-1);const n=Math.pow(10,Math.floor(Math.log10(r))),h=[];if(r=Math.ceil(r/n)*n,isNaN(e))s>Math.floor(s/n)*n?s=Math.floor(s/n)*n:s<Math.ceil(s/n)*n&&(s=Math.ceil(s/n)*n);else{for(A(s<e&&i>e,"base error"),t=Math.max(3,t);;){if(!(x((e-s)/r)+x((i-e)/r)+1>t))break;r+=n}s=e-x((e-s)/r)*r}h.push(s);for(let e=1;e<t;e++)h.push(w(h[e-1]+r));return h}_getStepsBySize(t,e,s,i){const r=[];let n;if(isNaN(e))for(r.push(n=s);n<i;)r.push(n+=t);else{for(r.push(n=e);n>s;)r.unshift(n-=t);for(n=e;n<i;)r.push(n+=t)}return r}_getStepMultiples(t){return[1,2,2.5,5,10]}_getStepsByPixels(t,e,s,i,r){i>=s?(i=s,s=NaN):r<=s&&(r=s,s=NaN);const n=r-i;if(0===n)return[];let h=Math.floor(t/this.stepPixels)+1,a=n/(h-1);const o=Math.pow(10,Math.floor(Math.log10(a))),l=this._getStepMultiples(a),c=[];let d;if(a/=o,l)if(a>l[0]){let t=0;for(;t<l.length-1;t++)if(a>l[t]&&a<l[t+1]){a=l[t+1];break}t>=l.length&&(a=l[l.length-1])}else a=l[0];if(a*=o,isNaN(s))i>Math.floor(i/o)*o?i=Math.floor(i/o)*o:i<Math.ceil(i/o)*o&&(i=Math.ceil(i/o)*o);else{for(A(i<s&&r>s,"base error"),h=Math.max(3,h);;){if(!(x((s-i)/a)+x((r-s)/a)+1>h))break;a+=o}i=s-x((s-i)/a)*a}for(c.push(w(d=i));d<r;)c.push(w(d+=a));return c}}class Vt extends Pt{constructor(t,e){super(t,e),this.nullable=!0,this.baseValue=0,this.syncMinMax=!1}contains(t){return!isNaN(t)}_createTick(){return new Nt(this)}_doPrepareRender(){this._hardMin=this.minValue,isNaN(this.baseValue)||null===this.baseValue||this._series.find((t=>t.ignoreAxisBase(this)))?this._base=NaN:this._base=+this.baseValue}_doBuildTicks(t,e,s){const i=this.tick;let{min:r,max:n}=this.$_adjustMinMax(t,e);const h=i.buildSteps(s,this._base,r,n);r=this._min=Math.min(r,h[0]),n=this._max=Math.max(n,h[h.length-1]);const a=[];for(let t=0;t<h.length;t++)a.push({pos:this.getPosition(s,h[t]),value:h[t],label:String(h[t])});return a}getPosition(t,e){return t*(e-this._min)/(this._max-this._min)}getPointWidth(t,e,s){}$_adjustMinMax(t,e){const s=this._base,i=this.minPadding,r=this.maxPadding;if(!isNaN(s)){if(this.syncMinMax&&t<=s&&e>=s){const i=Math.max(Math.abs(t),Math.abs(e));e=s+i,t=s-i}isNaN(this._hardMin)||(t=this._hardMin),isNaN(this._hardMax)||(e=this._hardMax)}let n=Math.max(0,e-t);return isNaN(i)||(t-=n*i),isNaN(r)||(e+=n*r),{min:t,max:e}}}!function(t){t.AUTO="auto",t.INSIDE="inside",t.OUTSIDE="outside",t.INSIDE_FIRST="insideFirst",t.OUTSIDE_FIRST="outsideFirst"}(at||(at={}));class Ct extends J{constructor(t,e){super(t),this.pointStart=0,this.pointStep=1,this.index=-1,this.name=e,this._points=new ft(this)}isInverted(){return!1}getPoints(){return this._points}isEmpty(){return this._points.isEmpty()}isPolar(){return!1}isCategorized(){return!1}legendColor(){return this.color}legendLabel(){return this.name}legendVisible(){return this.visible()}ignoreAxisBase(t){return!1}createPoint(t){return new wt(t)}getValue(t,e){const s=t.value;if(null==s)return NaN;s[this._getField(e)]}prepareRender(){this._xAxisObj=this.chart._connectSeries(this,!0),this._yAxisObj=this.chart._connectSeries(this,!1),this._points.prepare(),this._visPoints=this._points.getVisibles(),this._doPrepareRender()}collectCategories(t){if(t instanceof Et){let e=t.categoryField;return null!=e?this._points.getProps(e):this._points.getValues(t===this._xAxisObj?"x":"y").filter((t=>a(t)))}}collectValues(t){const e=t===this._xAxisObj?"x":"y",s=e+"Value",i=t instanceof Vt,r=[];let n=0;return this._visPoints.forEach(((h,a)=>{let o=t.getValue(h[e]);isNaN(o)&&i&&"x"===e&&(o=n,n+=t.valueUnit),isNaN(o)||r.push(h[s]=o)})),r}isVisible(t){return this._xAxisObj.contains(t.x)&&this._yAxisObj.contains(t.y)}getLegendSources(t){t.push(this)}_getField(t){return t===this._xAxisObj?this.xField:this.yField}_doLoad(t){super._doLoad(t);const e=t[this.dataProp||"data"];h(e)&&this._doLoadPoints(e)}_doLoadPoints(t){this._points.load(t)}_doPrepareRender(){}}Ct.Defaults={};class Ot{constructor(t){this._items=[],this._map=new Map,this.chart=t}get first(){return this._items[0]}isEmpty(){if(this._items.length>0)for(const t of this._items)if(!t.isEmpty())return!1;return!0}items(){return this._items.slice(0)}visibles(){return this._items.filter((t=>t.visible()))}isInverted(){for(const t of this._items)if(t.visible()&&t.isInverted())return!0}isPolar(){for(const t of this._items)if(t.visible()&&!t.isPolar())return!1;return!0}load(t){const e=this.chart;this._items=[],h(t)?t.forEach(((t,s)=>this._items.push(this.$_loadSeries(e,t,s)))):n(t)&&this._items.push(this.$_loadSeries(e,t,0))}get(t){return this._map.get(t)}getLegendSources(){const t=[];return this._items.forEach((e=>{e.visible()&&e.getLegendSources(t)})),t}forEach(t){for(let e=0,s=this._items.length;e<s&&!0!==t(this._items[e],e);e++);}prepareRender(){const t=this.chart.colors;this._items.forEach(((e,s)=>{e.visible()&&(e.color=t[s%t.length],e.prepareRender())}))}$_loadSeries(t,e,s){let i=t._getSeriesType(e.type);i||(i=t._getSeriesType(t.type));const r=new i(t,e.name||`Series ${s+1}`);return r.load(e),r.index=s,r}}!function(t){t.DEFAULT="default",t.OVERLAP="overlap",t.STACK="stack",t.FILL="fill"}(ot||(ot={}));new class extends s{constructor(){super(...arguments),this.layout=ot.DEFAULT,this.groupWidth=1,this.padding=.2,this._groupWidth=1}load(t){for(const e in t)this.hasOwnProperty(e)&&(this[e]=t[e])}prepareRender(){}},function(t){t.DEFAULT="default",t.VISIBLE="visible",t.HIDDEN="hidden"}(lt||(lt={}));class Rt extends J{constructor(t){super(t.chart),this.series=t,this.radius=3}}class Dt extends Ct{constructor(){super(...arguments),this.startAngle=0}}class Bt extends Ct{constructor(){super(...arguments),this.pointWidth=1,this.padding=.2}isCategorized(){return!0}}class It extends Bt{isInverted(){return!0}}class Ft extends wt{_readArray(t,e){const s=e.length>5?1:0;this.min=e[l(t.minField,0+s)],this.low=e[l(t.lowField,1+s)],this.mid=e[l(t.midField,2+s)],this.high=e[l(t.highField,3+s)],this.y=e[l(t.yField,4+s)],this.x=s>0?e[l(t.xField,0)]:this.index}_readObject(t,e){super._readObject(t,e),this.min=c(e[t.minField],e.min),this.low=c(e[t.lowField],e.low),this.mid=c(e[t.midField],e.mid),this.high=c(e[t.highField],e.high),this.y=d(e[t.yField],e.y,e.value)}_readSingle(t){super._readSingle(t),this.min=this.low=this.mid=this.high=this.y}prepare(t){super.prepare(t),this.minValue=+this.min,this.lowValue=+this.low,this.midValue=+this.mid,this.highValue=+this.high}}class zt extends Bt{createPoint(t){return new Ft(t)}}class $t extends wt{prepare(t){super.prepare(t),this.zValue=+this.z}_readArray(t,e){const s=e.length>2?1:0;this.y=e[l(t.yField,0+s)],this.z=e[l(t.zField,1+s)],this.x=s>0?e[l(t.xField,0)]:this.index}_readObject(t,e){super._readObject(t,e),this.z=c(e[t.zField],e.z)}_readSingle(t){super._readSingle(t),this.z=this.y}}class Ht extends Rt{}!function(t){t.WIDTH="width",t.AREA="area"}(ct||(ct={}));class jt extends Ct{constructor(t,e){super(t,e),this.sizeMode=ct.AREA,this.minSize=8,this.maxSize="20%",this.marker=new Ht(this)}getPxMinMax(t){return{min:b(this._minDim,t),max:b(this._maxDim,t)}}getRadius(t,e,s){let i=(t-this._zMin)/(this._zMax-this._zMin);return this.sizeMode==ct.AREA&&(i=Math.sqrt(i)),i=Math.ceil(e+i*(s-e))/2,i}createPoint(t){return new $t(t)}load(t){super.load(t),this._minDim=f(this.minSize,!0),this._maxDim=f(this.maxSize,!0)}_doPrepareRender(){this._zMin=Number.MAX_VALUE,this._zMax=Number.MIN_VALUE,this._visPoints.forEach((t=>{this._zMin=Math.min(this._zMin,t.zValue),this._zMax=Math.max(this._zMax,t.zValue)}))}}class Wt extends wt{prepare(t){super.prepare(t);const e=this.value;this.min=e.min,this.max=e.max}}!function(t){t.SQURE_ROOT="squreRoot",t.STURGES="struges",t.RICE="rice"}(dt||(dt={}));const Gt={squreRoot:function(t){return Math.ceil(Math.sqrt(t))},struges:function(t){return Math.ceil(Math.log(t)*Math.LOG2E)},rice:function(t){return Math.ceil(2*Math.pow(t,1/3))}};class qt extends Ct{constructor(){super(...arguments),this.binsNumber=dt.SQURE_ROOT}getBinCount(t){const e=l(this.binWidth,0);if(e>0)return t/e;return l(this.binsNumber,0)<1?Gt[this.binsNumber||dt.SQURE_ROOT](t):void 0}ignoreAxisBase(t){return t===this._xAxisObj}createPoint(t){return new Wt(t)}_doLoadPoints(t){function e(t){let e;return e=h(t)?t[l(this.yField,0)]:n(t)?d(t[this.yField],t.y,t.value):t,+e}let s=[];for(let i=0;i<t.length;i++){const r=e(t[i]);isNaN(r)||s.push(r)}if(s.length>0){s=s.sort(((t,e)=>t-e)),this.minValue<s[0]&&s.unshift(this.minValue),this.maxValue>s[s.length-1]&&s.push(this.maxValue);const t=s.length,e=s[0],i=s[t-1],r=this.getBinCount(t),n=this._binInterval=(i-e)/r;let h=0,a=e,o=a+n;const l=[];for(let e=0;e<r;e++){let c=0;if(e==r-1)c=t-h;else for(;h<t&&s[h]<o;)c++,h++;l.push({x:a,y:c,min:a,max:e===r-1?i:o}),a=o,o=a+n}this._points.load(l)}}collectValues(t){const e=super.collectValues(t);return t===this._xAxisObj&&e.push(this._visPoints[this._visPoints.length-1].max),e}}class Ut extends wt{}class Xt extends Rt{constructor(){super(...arguments),this.radius=4,this.firstVisible=lt.DEFAULT,this.lastVisible=lt.DEFAULT,this.minVisible=lt.DEFAULT,this.maxVisible=lt.DEFAULT}}class Yt extends Ct{constructor(t,e){super(t,e),this.curved=!1,this.baseValue=0,this.connectNulls=!1,this.marker=new Xt(this)}createPoint(t){return new Ut(t)}}class Zt extends Yt{}class Kt extends Ut{prepare(t){super.prepare(t),this.y=this.high=c(this.high,this.low),this.lowValue=+this.low,this.highValue=this.yValue=+this.high}_readArray(t,e){const s=e.length>2?1:0;this.low=e[l(t.lowField,0+s)],this.high=e[l(t.highField,1+s)],this.x=s>0?e[l(t.xField,0)]:this.index}_readObject(t,e){super._readObject(t,e),this.low=c(e[t.lowField],e.low),this.high=c(e[t.lowField],e.high)}_readSingle(t){super._readSingle(t),this.low=this.y}}class Qt extends Zt{createPoint(t){return new Kt(t)}}class Jt extends wt{constructor(){super(...arguments),this.sliced=!1,this.startAngle=0,this.angle=0}get endAngle(){return this.startAngle+this.angle}legendColor(){return this.color}legendLabel(){return this.x}legendVisible(){return this.visible}}class te extends Dt{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.singleColor=!1,this.innerSize=0,this.slicedOffset=10,this.labelDistance=25,this.exclusive=!0,this.sliceDuration=300}isPolar(){return!0}createPoint(t){return new Jt(t)}getLegendSources(t){this._visPoints.forEach((e=>{t.push(e)}))}_doPrepareRender(){super._doPrepareRender();const t=this.chart.colors;this._visPoints.forEach(((e,s)=>{e.color||(e.color=t[s%t.length])}))}}class ee extends wt{}class se extends Rt{constructor(){super(...arguments),this.radius=5}}class ie extends Ct{constructor(t,e){super(t,e),this.marker=new se(this)}createPoint(t){return new ee(t)}}const re=function(t){return isNaN(t)?0:t};class ne{constructor(){this._path=[]}clear(){return this._path=[],this}end(t=!1){t&&this._path.push("Z");const e=this._path.join(" ");return this._path=[],e}move(t,e){return o(t)?this._path.push("M",re(t),re(e)):this._path.push("M",re(t.x),re(t.y)),this}moveBy(t,e){return o(t)?this._path.push("m",re(t),re(e)):this._path.push("m",re(t.x),re(t.y)),this}line(t,e){return o(t)?this._path.push("L",re(t),re(e)):this._path.push("L",re(t.x),re(t.y)),this}curve(t,e,s,i,r,n){return this._path.push("C",t,e,s,i,r,n),this}q(t,e,s,i){return this._path.push("Q",t,e,s,i),this}rect(t,e,s,i){return this._path.push("M",t,e,"l",s,0,"l",0,i,"l",-s,0),this}lines(...t){if(o(t[0]))for(let e=0;e<t.length;e+=2)this._path.push("L",re(t[e]),re(t[e+1]));else for(let e=0;e<t.length;e++)this._path.push("L",re(t[e].x),re(t[e].y));return this}polygon(...t){return this.lines(...t),this._path.push("Z"),this}}class he extends s{constructor(t,e,s,i=0){super(),this.removeDelay=0,this._pool=[],this._views=[],this._removes=[],this._owner=t,this._creator=e,this._styleName=s,this.removeDelay=i}_doDestory(){this._owner=null,this._creator=null,super._doDestory()}get isEmpty(){return 0===this._views.length}get count(){return this._views.length}get first(){return this._views[0]}get last(){return this._views[this._views.length-1]}get(t){return this._views[t]}getAll(){return this._views.slice()}elementOf(t){for(let e of this._views)if(e.dom.contains(t))return e}$_create(t,e=-1,s=0){let i=this._pool.pop();return i||(i=new this._creator(t,this._styleName)),this._owner.add(i),i}prepare(t,e,s){const i=this._owner.doc,r=this._pool,n=this._views;for(let t of n)t.parent||this._owner.add(t);for(;n.length>t;)r.push(n.pop().remove());for(;n.length<t;){const e=this.$_create(i);n.push(e),null==s||s(e,n.length-1,t)}return e&&this.forEach(e),this}reprepare(t,e,s,i,r,n){const h=this._owner.doc,a=this._pool,o=this._views,l=[];for(let t=this._removes.length-1;t>=0;t--)if(!this._removes[t].parent){const e=this._removes.splice(t,1)[0];a.push(e)}for(let i=0,n=e.length;i<n;i++){const a=e[i];let c=-1;if(t)for(let e=0,i=o.length;e<i;e++){const i=o[e][t];if(s&&i===a[s]||!s&&i===a){l.push(o[e]),c=e;break}}if(c>=0){const t=o.splice(c,1)[0];t.parent||this._owner.add(t)}else{const t=this.$_create(h,i,n);l.push(t),null==r||r(t,i,n)}}for(let t=0,e=o.length;t<e;t++){const s=o[t];s.removing||(this.removeDelay>0?this._removes.push(s.removeLater(!1,this.removeDelay)):a.push(s.remove()),null==i||i(s,t,e))}return this._views=l,n&&this.forEach(n),this}borrow(){const t=this._pool.pop()||new this._creator(this._owner.doc,this._styleName);return this._owner.add(t),t}free(t,e=0){if(t){e>0?t.removeLater(!1,e):t.remove(),this._pool.push(t);const s=this._views.indexOf(t);s>=0&&this._views.splice(s,1)}}freeAll(t,e=0){for(let s of t)this.free(s,e)}fadeout(t,e,s){if(t){t.fadeout(e,s),this._pool.push(t);const i=this._views.indexOf(t);i>=0&&this._views.splice(i,1)}}forEach(t){const e=this._views;for(let s=0,i=e.length;s<i;s++)t(e[s],s,i)}visit(t){const e=this._views.length;let s=0;for(;s<e&&!1!==t(this._views[s],s,e);s++);return s===e}find(t){const e=this._views;for(let s=0,i=e.length;s<i;s++)if(t(e[s]))return e[s]}sort(t){return this._views=this._views.sort(t),this}map(t){return this._views.map(t)}}class ae extends mt{constructor(t,e){super(t,"rct-series "+e)}_doMeasure(t,e,s,i,r){return this._prepareSeries(t,e),Z.create(s,i)}_doLayout(){this._renderSeries(this.width,this.height)}}class oe extends X{constructor(t){super(t,null,"rct-series-bar"),this.labelViews=[]}}class le extends X{constructor(t){super(t,null,"rct-line-series-marker")}}class ce extends ae{constructor(t,e){super(t,e),this.add(this._lineContainer=new q(t)),this._lineContainer.add(this._line=new X(t,null,"rct-line-series-line")),this.add(this._markerContainer=new q(t)),this._markers=new he(this._markerContainer,le)}_prepareSeries(t,e){this.$_prepareMarkser(e._visPoints)}_renderSeries(t,e){this._layoutMarkers(this.model._visPoints),this._layoutLines(this.model._visPoints)}_markersPerPoint(){return 1}$_prepareMarkser(t){const e=this.model;e.baseValue;const s=e.marker;s.visible();const i=this._markersPerPoint(),r=t.length;this._markers.prepare(r*i,((e,i)=>{const n=t[i%r];n.radius=s.radius,n.shape=s.shape,e.point=n}))}_layoutMarker(t,e,s){const i=t.point,r=i.shape,n=i.radius;let h;switch(r){case"square":case"diamond":case"triangle":case"itriangle":e-=n,s-=n,h=j[r](0,0,2*n,2*n);break;default:h=j.circle(0,0,n)}t.translate(e,s),t.setPath(h)}_layoutMarkers(t){const e=this.model,s=e._xAxisObj,i=e._yAxisObj;for(let e=0,r=t.length;e<r;e++){const r=t[e];r.xPos=s.getPosition(this.width,r.xValue),r.yPos=this.height-i.getPosition(this.height,r.yValue),this._layoutMarker(this._markers.get(e),r.xPos,r.yPos)}}_layoutLines(t){const e=new ne;e.move(t[0].xPos,t[0].yPos);for(let s=1;s<t.length;s++)e.line(t[s].xPos,t[s].yPos);this._line.setPath(e.end())}}class de extends ce{constructor(t){super(t,"rct-area-series"),this.insertFirst(this._areaContainer=new q(t)),this._areaContainer.add(this._area=new X(t,null,"rct-area-series-area"))}_layoutLines(t){super._layoutLines(t),this._layoutArea(this._area,t)}_layoutArea(t,e){const s=this.model,i=this.height,r=I.isNotEmpty(s.baseValue)?s._yAxisObj.getPosition(i,s.baseValue):i,n=new ne;n.move(e[0].xPos,r),n.line(e[0].xPos,e[0].yPos);for(let t=1;t<e.length;t++)n.line(e[t].xPos,e[t].yPos);n.line(e[e.length-1].xPos,r),t.setPath(n.end())}}let ue=class extends oe{render(t,e){this.setPath(j.rect({x:t,y:e-this.wPoint/2,width:this.hPoint,height:this.wPoint}))}};class _e extends K{layout(){const t=this.point,e=this.width,s=this.height,i=t.yValue-t.minValue,r=e/2;const n=0+s-s*(t.lowValue-t.minValue)/i,h=0+s-s*(t.highValue-t.minValue)/i;this._back.setBounds(0,0,e,s),this._stemUp.setVLine(r,0,h),this._stemDown.setVLine(r,n,s),this._min.setHLine(0,e/4,3*e/4),this._max.setHLine(0+s,e/4,3*e/4),this._box.setBounds(0,h,e,s*(t.highValue-t.lowValue)/i),this._mid.setHLine(0+s-s*(t.midValue-t.minValue)/i,0,e)}_doInitChildren(t){this.add(this._back=new _t(t,null,"rct-boxplot-series-back")),this.add(this._stemUp=new Q(t,null,"rct-boxplot-series-stem")),this.add(this._stemDown=new Q(t,null,"rct-boxplot-series-stem")),this.add(this._box=new _t(t,null,"rct-boxplot-series-box")),this.add(this._mid=new Q(t,null,"rct-boxplot-series-mid")),this.add(this._min=new Q(t,null,"rct-boxplot-series-min")),this.add(this._max=new Q(t,null,"rct-boxplot-series-max"))}}let pe=class extends X{constructor(t){super(t,null,"rct-bubble-series-marker")}};let ge=class extends oe{render(t,e){this.setPath(j.rect({x:t-this.wPoint/2,y:e,width:this.wPoint,height:-this.hPoint}))}};class me extends oe{render(t,e){this.setPath(j.rect({x:t-this.wPoint/2,y:e,width:this.wPoint,height:-this.hPoint}))}}class ye extends q{constructor(t,e,s,i,r=""){super(t,"circle",r),"number"==typeof e&&this.setCircle(e,s,i)}setCircle(t,e,s){this.setAttrs({cx:t,cy:e,r:s})}}class xe extends X{static create(t,e,s,i,r,n,h,a=!0,o=""){return new xe(t,{cx:e,cy:s,rx:i,ry:r,innerRadius:0,start:n,angle:h,clockwise:a},o)}static createInner(t,e,s,i,r,n,h,a,o=!0,l=""){return new xe(t,{cx:e,cy:s,rx:i,ry:r,innerRadius:n,start:h,angle:a,clockwise:o},l)}constructor(t,e,s=""){super(t,null,s),this.cx=0,this.cy=0,this.rx=0,this.ry=0,this.innerRadius=0,this.start=0,this.angle=0,this.clockwise=!0,this.rate=1,e&&this._assignShape(e)}equals(t){return t.cx===this.cx&&t.cy===this.cy&&t.rx===this.rx&&t.ry===this.ry&&t.innerRadius===this.innerRadius&&t.start===this.start&&t.angle===this.angle&&t.clockwise===this.clockwise}setSector(t){this._assignShape(t)}_getShape(){return{cx:this.cx,cy:this.cy,rx:this.rx,ry:this.ry,innerRadius:this.innerRadius,start:this.start,angle:this.angle,clockwise:this.clockwise}}_assignShape(t){this.cx=t.cx,this.cy=t.cy,this.rx=t.rx,this.ry=t.ry,this.innerRadius=t.innerRadius,this.start=t.start,this.angle=t.angle,this.clockwise=t.clockwise,this._updateShape()}_updateShape(){this.setPath(j.sector(this.cx,this.cy,this.rx*this.rate,this.ry*this.rate,this.innerRadius||0,this.start,this.start+this.angle,this.clockwise))}}class we extends xe{setSectorEx(t,e,s,i=!1){let r=!1;return i?r=!0:this._assignShape(s),r}}class fe extends X{constructor(t){super(t,null,"rct-scatter-series-marker")}}const be=new Map([[zt,class extends ae{constructor(t){super(t,"rct-boxplot-series"),this._boxes=new he(this,_e)}_prepareSeries(t,e){this.$_prepareBoxes(e._visPoints)}_renderSeries(t,e){this.$_layoutBoxes(t,e)}$_prepareBoxes(t){this._boxes.prepare(t.length,((e,s)=>{e.point=t[s]}))}$_layoutBoxes(t,e){const s=this.model,i=s._xAxisObj,r=s._yAxisObj;this._boxes.forEach((n=>{const h=n.point,a=h.xPos=i.getPosition(this.width,h.xValue),o=h.yPos=this.height-r.getPosition(this.height,h.yValue),l=i.getPointWidth(t,s,h)*(1-2*s.padding),c=Math.abs(r.getPosition(e,h.minValue)-o);n.setBounds(a,o,l,c),n.layout()}))}}],[It,class extends ae{constructor(t){super(t,"rct-bar-series"),this._bars=new he(this,ue)}_prepareSeries(t,e){this.$_parepareBars(t,e._visPoints)}_renderSeries(t,e){const s=this.model,i=this.model._xAxisObj,r=this.model._yAxisObj;this._bars.forEach(((n,h)=>{const a=e-i.getPosition(e,h);n.wPoint=i.getPointWidth(e,s,n.point)*(1-2*s.padding),n.hPoint=r.getPosition(t,n.point.yValue),n.render(0,a)}))}$_parepareBars(t,e){const s=this.model.color;this._bars.prepare(e.length,((t,i)=>{t.point=e[i],t.setStyle("fill",s)}))}}],[Bt,class extends ae{constructor(t){super(t,"rct-column-series"),this._bars=new he(this,ge)}_prepareSeries(t,e){this.$_parepareBars(t,e._visPoints)}_renderSeries(t,e){const s=this.model,i=this.model._xAxisObj,r=this.model._yAxisObj,n=this.height;this._bars.forEach(((h,a)=>{const o=i.getPosition(t,a);h.wPoint=i.getPointWidth(t,s,h.point)*(1-2*s.padding),h.hPoint=r.getPosition(e,h.point.yValue),h.render(o,n)}))}$_parepareBars(t,e){const s=this.model.color;this._bars.prepare(e.length,((t,i)=>{t.point=e[i],t.setStyle("fill",s)}))}}],[Qt,class extends de{constructor(t){super(t),this._lineContainer.add(this._lowerLine=new X(t,null,"rct-line-series-line"))}_markersPerPoint(){return 2}_layoutArea(t,e){this.model,this.height;const s=new ne,i=e.length;s.move(e[0].xPos,e[0].yPos);for(let t=1;t<e.length;t++)s.line(e[t].xPos,e[t].yPos);s.line(e[i-1].xPos,e[i-1].yLow);for(let t=i-2;t>=0;t--)s.line(e[t].xPos,e[t].yLow);t.setPath(s.end())}_layoutLines(t){super._layoutLines(t);const e=new ne,s=t.length;e.move(t[s-1].xPos,t[s-1].yLow);for(let i=s-2;i>=0;i--)e.line(t[i].xPos,t[i].yLow);this._lowerLine.setPath(e.end())}_layoutMarkers(t){super._layoutMarkers(t);const e=this.model._yAxisObj;for(let s=0,i=t.length;s<i;s++){const r=t[s];r.yLow=this.height-e.getPosition(this.height,r.lowValue),this._layoutMarker(this._markers.get(s+i),r.xPos,r.yLow)}}}],[Zt,de],[Yt,class extends ce{constructor(t){super(t,"rct-line-series")}}],[jt,class extends ae{constructor(t){super(t,"rct-bubble-series"),this.add(this._markerContainer=new q(t)),this._markers=new he(this._markerContainer,pe)}_prepareSeries(t,e){e.getPoints().getVisibles(),this.$_prepareMarkser(e._visPoints)}_renderSeries(t,e){this.$_layoutMarkers()}$_prepareMarkser(t){const e=this.model,s=(e._xAxisObj._length<e._yAxisObj._length?e._xAxisObj:e._yAxisObj)._length,i=e.marker,r=t.length,{min:n,max:h}=e.getPxMinMax(s);this._markers.prepare(r,((s,r)=>{const a=t[r];a.radius=e.getRadius(a.zValue,n,h),a.shape=i.shape,s.point=a}))}$_layoutMarkers(){const t=this.model,e=t._xAxisObj,s=t._yAxisObj;this._markers.forEach(((t,i)=>{const r=t.point;if(!isNaN(r.zValue)){const i=r.xPos=e.getPosition(this.width,r.xValue),n=r.yPos=this.height-s.getPosition(this.height,r.yValue),h=r.shape,a=1*r.radius;let o;switch(h){case"square":case"diamond":case"triangle":case"itriangle":o=j[h](0-a,0-a,2*a,2*a);break;default:o=j.circle(0,0,a)}t.setPath(o),t.translate(i,n)}}))}}],[ie,class extends ae{constructor(t){super(t,"rct-scatter-series"),this.add(this._markerContainer=new q(t)),this._markers=new he(this._markerContainer,fe)}_prepareSeries(t,e){this.$_prepareMarkser(e._visPoints)}_renderSeries(t,e){this.$_layoutMarkers()}$_prepareMarkser(t){this.model.marker;const e=t.length;this._markers.prepare(e,((e,s)=>{const i=t[s];e.point=i}))}$_layoutMarkers(){const t=this.model,e=t.marker,s=t._xAxisObj,i=t._yAxisObj;this._markers.forEach(((t,r)=>{const n=t.point,h=n.xPos=s.getPosition(this.width,n.xValue),a=n.yPos=this.height-i.getPosition(this.height,n.yValue),o=e.shape,l=e.radius;let c;switch(o){case"square":case"diamond":case"triangle":case"itriangle":c=j[o](0-l,0-l,2*l,2*l);break;default:c=j.circle(0,0,l)}t.setPath(c),t.translate(h,a)}))}}],[qt,class extends ae{constructor(t){super(t,"rct-histogram-series"),this._bars=new he(this,me)}_prepareSeries(t,e){this.$_parepareBars(t,e._visPoints)}_renderSeries(t,e){const s=this.model._xAxisObj,i=this.model._yAxisObj,r=this.height;this._bars.forEach(((n,h)=>{const a=n.point,o=s.getPosition(t,a.min),l=s.getPosition(t,a.max),c=o+(l-o)/2;n.wPoint=Math.max(1,l-o-1),n.hPoint=i.getPosition(e,n.point.yValue),n.render(c,r)}))}$_parepareBars(t,e){this._bars.prepare(e.length,((t,s)=>{t.point=e[s]}))}}],[te,class extends ae{constructor(t){super(t,"rct-pie-series"),this._sectors=new he(this,we,null,.5),this._cx=0,this._cy=0,this._rd=0,this._rdInner=0,this._slicedOff=0,this.add(this._circle=new ye(t)),this._circle.setStyles({stroke:"#aaa",fill:"none",strokeDasharray:"2"})}_prepareSeries(t,e){this.$_prepareSectors(e._visPoints)}_renderSeries(t,e){const s=this.$_getSize(t,e);this._rd=Math.floor(s/2),this._rdInner=0,this._cx=Math.floor(t/2),this._cy=Math.floor(e/2),this._circle.setCircle(this._cx,this._cy,this._rd),this.$_layoutSectors()}$_getSize(t,e){return.8*e}$_prepareSectors(t){this.model.chart.colors;const e=t.length,s=t.map((t=>t.yValue)).reduce(((t,e)=>t+e),0);let i=y+this.model.startAngle*Math.PI*2/360;t.forEach((t=>{const e=2*t.y*Math.PI/s;t.startAngle=i,t.angle=e,i+=e})),this._sectors.prepare(e,((s,i)=>{const r=i<e-1?t[i+1].startAngle:t[i].endAngle;s.start=r,s.angle=0,s.point=t[i],s.setStyle("fill",t[i].color),s.setStyle("stroke","white")}))}$_layoutSectors(){this._sectors.forEach((t=>{const e=t.point,s=e.startAngle;let i=this._cx,r=this._cy;t.setSectorEx(null,null,{cx:i+0,cy:r+0,rx:this._rd,ry:this._rd,innerRadius:this._rdInner,start:s,angle:e.angle,clockwise:!0},!1)}))}}]]);class ve extends mt{constructor(t){super(t,"rct-body"),this._polar=!1,this._seriesViews=[],this._seriesMap=new Map,this.add(this._background=new _t(t)),this.add(this._gridContainer=new q(t)),this.add(this._seriesContainer=new q(t))}setPolar(t){t!==this._polar&&(this._polar=t)}_doMeasure(t,e,s,i,r){return this.$_prepareSeries(t,e.chart._getSeries().visibles()),this._seriesViews.forEach(((e,n)=>{e.measure(t,this._series[n],s,i,r)})),Z.create(s,i)}_doLayout(){this._seriesViews.forEach((t=>{t.resize(this.width,this.height),t.layout()}))}$_createSeriesView(t,e){for(const s of be.keys())if(e instanceof s)return new(be.get(s))(t)}$_prepareSeries(t,e){const s=this._seriesContainer,i=this._seriesMap,r=this._seriesViews;this._series=e,r.forEach((t=>t.remove())),r.length=0,e.forEach((e=>{let s=i.get(e);s?i.delete(e):s=this.$_createSeriesView(t,e),r.push(s)})),i.clear(),r.forEach(((t,r)=>{s.add(t),i.set(e[r],t)}))}}class Ae extends mt{constructor(t){super(t,"rct-legend-item"),this._enabled=!0,this.add(this._marker=_t.create(t,0,0,12,12,6,"rct-legend-item-marker")),this.add(this._label=new gt(t,"rct-legend-item-label")),this._label.anchor=rt.START}_doMeasure(t,e,s,i,r){return this._label.text=e.text(),Z.create(70,30)}_doLayout(){this._marker.translate(0,(this.height-this._marker.height)/2),this._label.translate(16,(this.height-this._label.getBBounds().height)/2)}}class Me extends mt{constructor(t){super(t,"rct-legend"),this._itemViews=[],this.add(this._background=new _t(t))}_doMeasure(t,e,s,i,r){const n=e.items(),h=this.vertical=e.getLayout()===it.VERTICAL,a=e.itemGap,o=this._itemViews;let l=0,c=0;return this.$_prepareItems(t,n),o.forEach(((e,a)=>{e._marker.setStyle("fill",n[a].source.legendColor());const o=e.measure(t,n[a],s,i,r);h?(l=Math.max(l,o.width),c+=o.height):(c=Math.max(c,o.height),l+=o.width)})),h?c+=(o.length-1)*a:l+=(o.length-1)*a,Z.create(l,c)}_doLayout(){const t=this.model.itemGap;let e=0;this._background.setBounds(0,0,this.width,this.height),this._itemViews.forEach((s=>{s.resizeByMeasured().layout(),s.translate(e,0),e+=s.width+t}))}$_prepareItems(t,e){const s=this._itemViews;for(;s.length<e.length;)s.push(this.add(new Ae(t)));for(;s.length>e.length;)s.pop().remove()}}class Se extends mt{constructor(t,e){super(t,e?"rct-subtitle":"rct-title"),this.add(this._textView=new gt(t)),this._textView.anchor=rt.START}_doMeasure(t,e,s,i,r){return this._textView.text=this.model.text,z(this._textView.getBBounds())}_doLayout(){this._textView.layoutText()}}class Pe extends K{measure(t,e,s,i,r){const n=this._doMeasure(t,e,s,i,r);return this.mw=n.width,this.mh=n.height,n}resizeByMeasured(){return this.resize(this.mw,this.mh),this}layout(){this._doLayout()}}class Te extends Pe{_doInitChildren(t){this.add(this.titleView=new Se(t,!1)),this.add(this.subtitleView=new Se(t,!0))}_doMeasure(t,e,s,i,r){let n,h=s,a=0;return(this.titleView.visible=e.title.visible())&&(n=this.titleView.measure(t,e.title,s,i,r),a+=n.height,i-=n.height),(this.subtitleView.visible=e.subtitle.visible())&&(n=this.subtitleView.measure(t,e.subtitle,s,i,r),a+=n.height,i-=n.height),{width:h,height:a}}_doLayout(){this.titleView.resizeByMeasured().layout().translate((this.width-this.titleView.width)/2,0)}}class Le extends Pe{_doInitChildren(t){this.add(this._legendView=new Me(t))}_doMeasure(t,e,s,i,r){return this._legendView.measure(t,e.legend,s,i,r)}_doLayout(){this._legendView.resize(this.width,this.height),this._legendView.layout()}}class ke extends Pe{constructor(t,e){super(t),this.dir=e,this.views=[]}prepare(t,e,s,i){if(e)this.visible=!1;else{const e=this.views;for(;e.length<s.length;){const s=new xt(t);this.add(s),e.push(s)}for(;e.length>s.length;)e.pop().remove();e.forEach(((t,e)=>{t.model=s[e],t._isHorz=i})),this.axes=s,this.visible=e.length>0}}checkHeights(t,e,s){let i=0;return this.views.forEach((r=>{i+=r.checkHeight(t,e,s)})),i}checkWidths(t,e,s){let i=0;return this.views.forEach((r=>{i+=r.checkWidth(t,e,s)})),i}_doMeasure(t,e,s,i,r){const n=this.axes;let h=0,a=0;return this.views.forEach(((e,o)=>{const l=e.measure(t,n[o],s,i,r);h+=l.width,a+=l.height})),Z.create(h,a)}_doLayout(){this.views.forEach((t=>{t.resize(this.width,this.height),t.layout()}))}}class Ee extends K{}class Ne extends q{constructor(t){super(t),this._inverted=!1,this._axisSectionViews=new Map,this.add(this._titleSectionView=new Te(t)),this.add(this._legendSectionView=new Le(t)),this.add(this._hAxisLine=new Q(t,null,"rct-axis-line")),this.add(this._vAxisLine=new Q(t,null,"rct-axis-line")),Object.values(L).forEach((e=>{if(o(e)){const s=new ke(t,e);this.add(s),this._axisSectionViews.set(e,s)}})),this.add(this._bodyView=new ve(t))}titleView(){return this._titleSectionView.titleView}subtitleView(){return this._titleSectionView.subtitleView}bodyView(){return this._bodyView}measure(t,e,s,i,r){if(e&&1==r&&e.prepareRender(),this.$_checkEmpty(t,e,s,i))return;const n=this._model=e,h=n.isPolar(),a=n.legend;let o,l=s,c=i;if(this._inverted=n._getSeries().isInverted(),o=this._titleSectionView.measure(t,n,l,c,r),c-=o.height,this._legendSectionView.visible=a.visible()&&!a.isEmpty())switch(o=this._legendSectionView.measure(t,n,l,c,r),a.position){case et.TOP:case et.BOTTOM:c-=o.height;break;case et.RIGHT:case et.LEFT:l-=o.width}this.$_measurePlot(t,n,h,l,c,1)}layout(){var t;let e=this.width,s=this.height,i=0,r=0,n=0;if(null===(t=this._emptyView)||void 0===t?void 0:t.visible)return void this._emptyView.resize(e,s);this._model;const h=r;let a;this._titleSectionView.resizeByMeasured().layout(),r+=this._titleSectionView.height,s-=this._titleSectionView.height,this._legendSectionView.visible&&(this._legendSectionView.resizeByMeasured().layout(),s-=n=this._legendSectionView.height,a=this.height-n);const o=new Map(this._axisSectionViews);let l;(l=o.get(L.LEFT))&&l.visible?e-=l.mw:o.delete(L.LEFT),(l=o.get(L.BOTTOM))&&l.visible?s-=l.mh:o.delete(L.BOTTOM),r=this.height-n,(l=o.get(L.LEFT))&&(l.resize(l.mw,s),l.layout(),i+=l.mw),(l=o.get(L.BOTTOM))&&(l.resize(e,l.mh),l.layout(),r-=l.mh);const c=this._org=Y.create(i,r);this._plotWidth=e,this._plotHeight=s,(this._vAxisLine.visible=!!(l=o.get(L.LEFT)))&&(this._vAxisLine.setVLineC(c.x,c.y,c.y-s),l.translate(c.x-l.mw,c.y-l.height)),(this._hAxisLine.visible=!!(l=o.get(L.BOTTOM)))&&(this._hAxisLine.setHLineC(c.y,c.x,c.x+e),l.translate(c.x,c.y)),this._bodyView.resize(this._plotWidth,this._plotHeight),this._bodyView.layout().translate(c.x,c.y-this._plotHeight);let d=this._titleSectionView;i=c.x,d.visible&&d.translate(i+(e-d.width)/2,h),d=this._legendSectionView,d.visible&&d.translate(i+(e-d.width)/2,a)}$_checkEmpty(t,e,s,i){if(!e||e.isEmpty())return this._emptyView||(this._emptyView=new Ee(t)),this._emptyView.resize(s,i),!0;this._emptyView&&(this._emptyView.visible=!1)}$_prepareAxes(t,e,s){const i=this._axisSectionViews;for(const r of i.keys()){const n=i.get(r),h=e.getAxes(r);n.prepare(t,s,h,r===L.BOTTOM||r===L.TOP)}}$_measurePlot(t,e,s,i,r,n){const h=this._axisSectionViews,a=i,o=r;this.$_prepareAxes(t,e,s),e.layoutAxes(i,r,this._inverted,n),i-=h.get(L.LEFT).checkWidths(t,i,r),i-=h.get(L.RIGHT).checkWidths(t,i,r),r-=h.get(L.BOTTOM).checkHeights(t,i,r),r-=h.get(L.TOP).checkHeights(t,i,r),e.layoutAxes(i,r,this._inverted,n);for(const s of h.keys()){const a=h.get(s);a.visible&&a.measure(t,e,i,r,n)}i=a,r=o;for(const t of h.keys()){const e=h.get(t);e.visible&&(t===L.LEFT?i-=e.mw:t===L.BOTTOM&&(r-=e.mh))}e.layoutAxes(i,r,this._inverted,n),this._bodyView.measure(t,e.body,i,r,n)}}class Ve extends G{constructor(t,e){super(t,e,Ve.CLASS_NAME),this.addElement(this._chartView=new Ne(t))}get model(){return this._model}set model(t){t!==this._model&&(this._model=t,this.invalidateLayout())}chartView(){return this._chartView}useImage(t){}_creatDefaultTool(){}_doRender(t){console.time("render chart"),this._model,this._chartView.measure(this.doc(),this._model,t.width,t.height,1),this._chartView.resize(t.width,t.height),this._chartView.layout(),console.timeEnd("render chart")}}Ve.CLASS_NAME="rtc-control";class Ce extends J{constructor(){super(...arguments),this.startAngle=0,this.endAngle=360,this.centerX="50%",this.centerY="50%",this.size="80%"}}class Oe extends J{constructor(){super(...arguments),this.text="Title"}_doLoadSimple(t){if(a(t))return this.text=t,!0}}var Re;!function(t){t.BOTTOM="bottom",t.RIGHT="right",t.LEFT="left",t.TOP="top"}(Re||(Re={}));class De extends Nt{buildSteps(t,e,s,i){return s=Math.log10(s),i=Math.log10(i),super.buildSteps(t,e,s,i)}}const Be=[1,1e3,6e4,36e5,864e5,6048e5,24192e5,314496e5],Ie=[[1,2,5,10,20,25,50,100,200,250,500],[1,2,5,10,15,30],[1,2,3,4,6,8,12],[1,2,3],[1,2],[1,2,3,4,6]];class Fe extends Nt{_getStepMultiples(t){for(let e=0;e<7;e++)if(t<=Be[e])return Ie[e];return null}}class ze extends Vt{constructor(t,e){super(t,e),this.baseValue=NaN}_createTick(){return new Fe(this)}_doBuildTicks(t,e,s){const i=super._doBuildTicks(t,e,s);return i.forEach((t=>{t.pos=t.pos-32500,t.label=String(+t.label/3600/24/30/365>>0)})),i}}const $e={bar:It,column:Bt,line:Yt,area:Zt,arearange:Qt,boxplot:zt,bubble:jt,scatter:ie,histogram:qt,pie:te},He={linear:Vt,category:Et,time:ze,date:ze,log:class extends Vt{_createTick(){return new De(this)}_doBuildTicks(t,e,s){}getPosition(t,e){}}};class je extends s{constructor(t){super(),this.type="column",this._groups=new Map,this.colors=["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e12"],this._title=new Oe(this),this._subtitle=new Oe(this,!1),this._legend=new ut(this),this._series=new Ot(this),this._xAxes=new Tt(this,!0),this._yAxes=new Tt(this,!1),this._body=new Ce(this),t&&this.load(t)}get title(){return this._title}get subtitle(){return this._subtitle}get series(){return this._series.first}get legend(){return this._legend}get xAxis(){return this._xAxes.first}get yAxis(){return this._yAxes.first}get body(){return this._body}isPolar(){return this._series.isPolar()}_getSeries(){return this._series}_getXAxes(){return this._xAxes}_getYAxes(){return this._yAxes}isInverted(){return this._series.isInverted()}isEmpty(){return this._series.isEmpty()}seriesByBame(t){return this._series.get(t)}axisByName(t){return this._xAxes.get(t)||this._yAxes.get(t)}getGroup(t){return this._groups.get(t)}getAxes(t){const e=this._xAxes.items,s=this._yAxes.items;let i;if(this.isInverted())switch(t){case L.LEFT:i=e.filter((t=>!t.opposite));break;case L.RIGHT:i=e.filter((t=>t.opposite));break;case L.BOTTOM:i=s.filter((t=>!t.opposite));break;case L.TOP:i=s.filter((t=>t.opposite))}else switch(t){case L.LEFT:i=s.filter((t=>!t.opposite));break;case L.RIGHT:i=s.filter((t=>t.opposite));break;case L.BOTTOM:i=e.filter((t=>!t.opposite));break;case L.TOP:i=e.filter((t=>t.opposite))}return i||[]}_getLegendSources(){return this._series.getLegendSources()}load(t){this._title.load(t.title),this._subtitle.load(t.subtitle),this._legend.load(t.legend),this._series.load(t.series),this._xAxes.load(t.xAxes||t.xAxis||{}),this._yAxes.load(t.yAxes||t.yAxis||{}),this._body.load(t.body)}_connectSeries(t,e){return e?this._xAxes.connect(t):this._yAxes.connect(t)}prepareRender(){this._series.prepareRender(),this._xAxes.prepareRender(),this._yAxes.prepareRender(),this._legend.prepareRender()}layoutAxes(t,e,s,i){this._xAxes.buildTicks(s?e:t),this._yAxes.buildTicks(s?t:e)}update(){}_getSeriesType(t){return $e[t]}_getAxisType(t){return He[t]}_visibleChanged(t){}_modelChanged(t){}}class We{static getVersion(){return"0.0.1"}static createChartControl(t,e){return new Ve(t,e)}static loadChart(t){return new je(t)}}const Ge=We.getVersion,qe=We.createChartControl,Ue=We.loadChart;t.Chart=je,t.ChartControl=Ve,t.createChartControl=qe,t.getVersion=Ge,t.loadChart=Ue}));
