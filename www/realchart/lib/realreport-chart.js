
/** 
 * RealReport-Chart v0.0.1
 * Copyright (C) 2023-2023 WooriTech Inc.
 * All Rights Reserved. 
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).RealChart={})}(this,(function(t){"use strict";let e=0;class i{static destroy(t){return t&&t.destroy()}constructor(t){this.$_destroyed=!1,this.$_destroying=!1,t||(this.$_hash=String(e++))}destroy(){return this.$_destroyed||this.$_destroying||(this.$_destroyed=!0,this.$_destroying=!0,this._doDestory()),null}_doDestory(){}get destroying(){return this.$_destroying}get hash(){return this.$_hash}isMe(t){return t===this.$_hash}toString(){return this.constructor.name}toBool(t){return"string"==typeof t?"true"===t:t}toNum(t,e=NaN){return t=parseFloat(t),isNaN(t)?e:t}}class s extends i{wrapper(){return this._wrapper}wrapperOrThis(){return this._wrapper||this}createWrapper(t){const e=this._wrapper=new t;return e.$_c=this,e}setWrapper(t){return this._wrapper=t,t.$_c=this,t}isWrapper(t){return t===this._wrapper}}const r="http://www.w3.org/2000/svg",n=function(t){return t&&"object"==typeof t&&!Array.isArray(t)},h=Array.isArray,a=function(t){return"string"==typeof t},o=function(t){return"number"==typeof t},l=function(t,e){return t=parseFloat(t),isNaN(t)?parseFloat(e):t},c=function(t,e){return void 0!==t?t:e},d=function(t,e,i){return void 0!==t?t:void 0!==e?e:i};class u{static setLogging(t=!0){this._logging=t}static log(...t){this._logging&&console.log.apply(console,t)}}u._logging=!1;class _{static setDebugging(t=!0){this._debugging=t}static debugging(){this._debugging}}_._debugging=!1;const p={ko:{dateFormat:"yyyy.MM.dd",am:"오전",pm:"오후",notExistsDataField:"존재하지 않는 필드입니다: %1",notSpecifiedDataField:"하나 이상의 데이터필드가 설정돼야 합니다.",invalidFieldName:"잘못된 데이터필드 이름입니다: %1",invalidFieldIndex:"잘못된 데이터필드 index입니다: %1",invalidRowIndex:"잘못된 데이터행 index입니다: %1",canNotModifyData:"읽기 전용 데이터를 변경할 수 없습니다.",canNotModifyDeleted:"삭제 상태 행을 변경할 수 없습니다: %1",requiredField:"반드시 값을 지정해야 하는 필드입니다: %1",invalidValueInDomain:"값이 필드 값 도메인에 포함되지 않습니다: %1",invalidValueInRange:"값이 필드 값 범위에 포함되지 않습니다: %1",invalidToIndex:"잘못된 'to' index입니다.: %1",requireSourceData:"원본 data가 반드시 지정돼야 합니다.",requireFilterName:"필터 이름이 반드시 지정돼야 합니다.",alreadyEditing:"이미 데이터 편집 중입니다.",invalidDateFormat:"잘못된 시간 날짜 형식입니다: %1",invalidSizeValue:"잘못된 Size 값입니다: %1",invalidOuterDiv:"잘못된 외부 div 입니다: %1",canNotHorzGrouping:"수평 모드일 때 그룹핑할 수 없습니다.",dataMustSet:"데이터가 먼저 설정돼야 합니다.",requireGroupingInfos:"하나 이상의 행 그룹핑 정보가 설정돼야 합니다.",canNotRowGrouping:"데이터링크 view에 대해 행그룹핑 할 수 없습니다. dataGroupBy()를 사용하세요.",canNotDataGrouping:"데이터링크 view가 아니면 데이터그룹핑할 수 없습니다. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"그룹핑 상태일 때 수평모드로 변경할 수 없습니다.",unknownLayoutType:"잘못된 layout 종류입니다: %1",layoutMustSet:"레이아웃 모델이 반드시 설정돼야 합니다.",unknownItemViewType:"잘못된 item view 종류입니다: %1",requireCommandName:"Command 이름이 지정돼야 합니다.",commandNameDuplicated:"이미 존재하는 command 이름입니다: %1",requireDataOrGroup:"데이터소스나 그룹 모델이 반드시 지정돼야 합니다.",requireTableName:"테이블모델의 이름이 지정돼야 합니다.",alreadyTableExists:"이미 존해하는 테이블모델입니다: %1",selectEditRowFirst:"수정하거나 삽입할 행을 먼저 선택하세요."},en:{dateFormat:"M/d/yyyy",am:"AM",pm:"PM",notExistsDataField:"A data field is not exists: %1",notSpecifiedDataField:"At least one datafield must be set.",invalidFieldName:"Invalid field name: %1",invalidFieldIndex:"Invalid field index: %1",invalidRowIndex:"Invalid row index: %1",canNotModifyData:"Can not modify a readonly data.",canNotModifyDeleted:"Can not modify a deleted row: %1",requiredField:"Required field: %1",invalidValueInDomain:"The value is not int the domain: %1",invalidValueInRange:"The value is not int the range: %1",invalidToIndex:"Invalid 'to' index: %1",requireSourceData:"A source data must be set.",requireFilterName:"A filter name must be set.",alreadyEditing:"DataView is already editing.",invalidDateFormat:"Invalid datetime format: %1",invalidSizeValue:"Invalid size value: %1",invalidOuterDiv:"Invalid outer div element: %1",canNotHorzGrouping:"Can not row grouping in horz mode.",dataMustSet:"A data must be set first.",requireGroupingInfos:"At least one grouping info must be set.",canNotRowGrouping:"Can not row grouping by data link view. use dataGroupBy().",canNotDataGrouping:"Can not data grouping without data link view. rowGroupBy()를 사용하세요.",canNotHorzInGrouping:"Can not change to horz mode while grouping",unknownLayoutType:"Invalid layout: %1",layoutMustSet:"A layout model must be set.",unknownItemViewType:"Unknow item view type: %1",requireCommandName:"Command name must be supplied.",commandNameDuplicated:"Command name is already exists: %1",requireDataOrGroup:"A data or group view must be set.",requireTableName:"The name of table model is required.",alreadyTableExists:"A table model is already exists: %1",selectEditRowFirst:"First select the row you want to edit or insert."}};let g=p.ko;const m="%".charCodeAt(0),y=-Math.PI/2,x=Math.ceil;function w(t){return parseFloat(t.toPrecision(12))}function f(t,e){let i,s;if(null==t||Number.isNaN(t)){if(e)return null;s=0,i=!0}else if(!(i=!isNaN(s=+t))){const i=t.trim();if(i.charCodeAt(i.length-1)===m&&(s=1===i.length?NaN:parseFloat(i)),isNaN(s)){if(e)return null;S(g.invalidSizeValue,t)}}return{size:s,fixed:i}}function b(t,e){return t?t.fixed?t.size:t.size*e/100:NaN}class v extends Error{}const A=function(t,e){if(!t)throw new v(e)};var M;!function(t){t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right"}(M||(M={}));const S=(t,e)=>{throw new Error(((t,e)=>t.replace("%1",e))(t,e))};var P,T,L;!function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right"}(P||(P={})),function(t){t.TOP="top",t.MIDDLE="middle",t.BOTTOM="bottom"}(T||(T={})),function(t){t[t.LEFT=0]="LEFT",t[t.TOP=1]="TOP",t[t.BOTTOM=2]="BOTTOM",t[t.RIGHT=3]="RIGHT"}(L||(L={}));let k=651212;class N{static getWin(t){return t.defaultView||t.parentWindow}static isVisible(t){return t&&"none"!==t.style.display}static setVisible(t,e,i=""){return t.style.display=e?i||"":"none",e}static hide(t){t.style.display="none"}static show(t,e=""){t.style.display=e}static addClass(t,e){if(e){e.split(/\s+/g).forEach((e=>t.classList.add(e)))}return t}static removeClass(t,e){if(e){e.split(/\s+/g).forEach((e=>t.classList.remove(e)))}return t}static getImageUrl(t){const e=t.backgroundImage;if(e&&e.startsWith('url("'))return e.substring(5,e.length-2)}static getFocused(){let t=document.getSelection().focusNode;for(;t;){if(t instanceof HTMLElement)return t;t=t.parentElement}}static isAncestorOf(t,e){let i=e;for(;i;){if(i==t)return!0;i=i.parentElement}return!1}static getOffset(t){const e=t.ownerDocument,i=e.defaultView,s=t.getBoundingClientRect(),r=e.body,n=e.documentElement,h=i.pageYOffset||n.scrollTop||r.scrollTop,a=i.pageXOffset||n.scrollLeft||r.scrollLeft,o=n.clientTop||r.clientTop||0,l=n.clientLeft||r.clientLeft||0,c=s.left+a-l,d=s.top+h-o;return{x:Math.round(c),y:Math.round(d)}}static getSize(t){const e=t.getBoundingClientRect();return{width:e.width,height:e.height}}static moveX(t,e){t.style.left=e+"px"}static moveY(t,e){t.style.top=e+"px"}static move(t,e,i){t.style.left=e+"px",t.style.top=i+"px"}static moveI(t,e,i){t.style.left=(e>>>0)+"px",t.style.top=(i>>>0)+"px"}static resize(t,e,i){t.style.width=e+"px",t.style.height=i+"px"}static resizeSVG(t,e,i){t.setAttribute("viewBox",`0 0 ${e} ${i}`)}static setWidth(t,e){t.style.width=e+"px"}static setHeight(t,e){t.style.height=e+"px"}static getBrowserSize(t){const e=t?t.ownerDocument:document,i=e.defaultView;return{width:i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:i.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}}static setRect(t,e){const i=t.style;i.left=e.x+"px",i.top=e.y+"px",i.width=e.width+"px",i.height=e.height+"px"}static setBounds(t,e,i,s,r){const n=t.style;n.left=e+"px",n.top=i+"px",n.width=s+"px",n.height=r+"px"}static setBoundsEx(t,e,i,s,r){const n=t.style;!isNaN(e)&&(n.left=e+"px"),!isNaN(i)&&(n.top=i+"px"),!isNaN(e)&&(n.width=s+"px"),!isNaN(e)&&(n.height=r+"px")}static getClientRect(t){const e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e}static getChildIndex(t){if(t){const e=t.parentNode;if(e){const i=e.children;for(let e=i.length;e--;)if(i[e]===t)return e}}return-1}static clearChildren(t){let e;for(;e=t.lastChild;)t.removeChild(e)}static clearElements(t){let e;for(;e=t.lastChild;)N.clearElements(e),t.removeChild(e)}static append(t,e){e.parentNode!==t&&t.appendChild(e)}static addChild(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)}static removeChild(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)}static removeChildren(t,e){e.forEach((e=>{e instanceof Element?e.parentNode===t&&t.removeChild(e):e&&e.dom().parentNode==t&&t.removeChild(e.dom())}))}static remove(t){const e=t&&t.parentElement;return e&&e.removeChild(t),null}static clearStyle(t){t.style.cssText=""}static removeStyles(t,e){if(e)for(const i in e)t[i]=""}static setStyle(t,e){e&&Object.assign(t.style,e)}static replaceStyle(t,e,i){if(e!=i){if(i)for(const e in i)t[e]="";return e&&Object.assign(t,e),e}return i}static createElement(t,e,i){const s=t.createElement(e);return i&&Object.assign(s.style,i),s}static htmlEncode(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML}static setData(t,e,i){null==i||""===i?delete t.dataset[e]:t.dataset[e]=i}static toggleData(t,e,i){i?t.dataset[e]="1":delete t.dataset[e]}static getData(t,e){return t.dataset[e]}static hasData(t,e){return void 0!==t.dataset[e]}static setVar(t,e,i){t.style.setProperty(e,i)}static animate(t,e,i,s,r=150,n="none"){const h={},a={};return h[e]=i,a[e]=s,t.animate([h,a],{duration:r,fill:n})}static setAttr(t,e,i){null!=i&&""!==i?t.setAttribute(e,i):t.removeAttribute(e)}static setAttrs(t,e){for(const i in e)t.setAttribute(i,e[i])}static getDomId(){return"-rtc-"+k++}static createBR(t,e){const i=t.createElement("br");return i.className=e,i}static createSpan(t,e){const i=t.createElement("span");return e&&Object.assign(i.style,e),i}static createCheckBox(t,e){const i=t.createElement("input");return i.type="checkbox",e&&Object.assign(i.style,e),i}static createRadio(t,e){const i=t.createElement("input");return i.type="radio",e&&Object.assign(i.style,e),i}static getPadding(t){const e=getComputedStyle(t);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0}}static getPaddingEx(t){const e=this.getPadding(t);return e.horz=e.left+e.right,e.vert=e.top+e.bottom,e}static getPaddingBorder(t){const e=getComputedStyle(t);return{left:parseFloat(e.paddingLeft)||0,right:parseFloat(e.paddingRight)||0,top:parseFloat(e.paddingTop)||0,bottom:parseFloat(e.paddingBottom)||0,borderLeft:parseFloat(e.borderLeftWidth)||0,borderRight:parseFloat(e.borderRightWidth)||0,borderTop:parseFloat(e.borderTopWidth)||0,borderBottom:parseFloat(e.borderBottomWidth)||0}}static stopAnimation(t){if(t)try{t.finish()}catch(t){_.debugging(),console.error(t)}return null}static childByPath(t,e){let i=t;if(e){let t=0;for(;t<e.length;)i=i.childNodes[e[t++]]}return i}static childByClass(t,e){return t.getElementsByClassName(e)[0]}static setDisabled(t,e){this.setAttr(t,"disabled",!!e||void 0)}static setImportantStyle(t,e,i){t.setProperty(e,i,"important")}}const E=(new Date).getTime();Element.prototype.animate||(Element.prototype.animate=function(t){});const V=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,C=!!window.chrome&&!V;Object.prototype.toString.call(HTMLElement).indexOf("Constructor")>0||!C&&!V&&navigator.userAgent.indexOf("Safari"),navigator.userAgent.toLocaleLowerCase().indexOf("samsungbrowser"),navigator.userAgent.toLocaleLowerCase().indexOf("miuibrowser");const O=/"([^"]*(?="))"/,R=/'([^']*(?='))'/,D='"'.charCodeAt(0),B="'".charCodeAt(0);class I{static now(){return+new Date}static stopEvent(t,e=!1){t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()}static getErrorStack(t){const e=t.stack;return e?e.split("\n").map((t=>t+"<br/>")):""}static getBaseClassName(t){return Object.getPrototypeOf(t.constructor).name}static isObject(t){return t&&"object"==typeof t&&!h(t)}static assign(t,e){this.isObject(e)&&Object.assign(t,e)}static isValidObject(t){if(this.isObject(t))for(let e in t)if(t.hasOwnProperty(e))return!0}static copyObject(t){if(t&&"object"==typeof t&&!h(t))return Object.assign({},t)}static checkArray(t){return h(t)?t:void 0}static makeArray(t,e=!1){return null!=t?h(t)?t:[t]:e?[]:void 0}static makeNumArray(t){return h(t)?t.map((t=>+t)):null!=t?[+t]:[]}static getIntArray(t,e=0){const i=[];for(let s=e,r=e+t;s<r;s++)i.push(s);return i}static isValueArray(t){if(h(t)){for(let e=t.length-1;e>=0;e--)if(null!=t[e]&&"object"==typeof t[e])return!1;return!0}return!1}static toArray(t){return h(t)?t:null!=t?[t]:null}static copyArray(t){return h(t)?t.slice(0):null!=t?[t]:void 0}static push(t,e){if(e&&e.length>0)for(let i=0,s=e.length;i<s;i++)t.push(e[i])}static isDefined(t){return null!=t}static isNotDefined(t){return null==t}static isNumber(t){return"number"==typeof t}static isValidNumber(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}static getNumber(t,e=0){const i=parseFloat(t);return isFinite(i)?i:e}static toNumber(t,e=0){return isNaN(t)||null===t||""===t?e:+t}static getEnumValues(t){return Object.keys(t).map((e=>t[e]))}static compareText(t,e,i=!1){return t=t||"",e=e||"",i&&(t=t.toLocaleLowerCase(),e=e.toLocaleLowerCase()),t>e?1:t<e?-1:0}static getTimeF(){return(new Date).getTime()/1e3}static getTimer(){return(new Date).getTime()-E}static isWhiteSpace(t){return!t||!t.trim()}static pad(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t}static pad16(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-t.toString(16).length+1).join(i)+t.toString(16)}static pick(...t){const e=t.length;let i;for(let s=0;s<e;s++)if(i=t[s],null!=i)return i}static pickNum(...t){const e=t.length;for(let i=0;i<e;i++)if(!isNaN(t[i])&&null!==t[i])return t[i];return NaN}static included(t,...e){const i=e.length;for(let s=0;s<i;s++)if(e[s]==t)return!0;return!1}static compareTextValue(t,e,i,s){if(t===e)return!0;let r=String(t),n=null==e?void 0:String(e);return!r&&!n||!(!r||!n)&&(i||(r=r.toLowerCase(),n=n.toLowerCase()),s?n.indexOf(r)>=0:r==n)}static cast(t,e){return t instanceof e?t:null}static irandom(t,e){if(void 0!==e){const i=t>>0,s=e>>0;return Math.random()*(s-i)+i>>>0}{const e=t>>0;return Math.random()*e>>0}}static irandomExcept(t,e,i){if(0===t&&1===e&&isNaN(i))throw new Error("Invalid irandom2");for(;;){const s=this.irandom(e,i);if(s!==t)return s}}static brandom(){return Math.random()>.5}static srandom(t,e){let i="";const s=this.irandom(t,e);for(let t=0;t<s;t++)i+=String.fromCharCode(this.irandom(97,123));return i}static erandom(t){const e=Object.values(t);return e[this.irandom(e.length)]}static arandom(t){return t[Math.random()*t.length>>0]}static iarandom(t,e,i){const s=new Array;for(let i=t;i<e;i++)s.push(i);for(;s.length>i;)s.splice(I.irandom(s.length),1);return s}static alert(t){window.alert(t)}static toInt(t,e){const i=parseInt(t,e||10);return isNaN(i)?0:i}static toFloat(t){const e=parseFloat(t);return isNaN(e)?0:e}static toEven(t){return 1&t?t+1:t}static hex(t,e=2,i="0"){e=Math.max(e||2,1);const s=t.toString(16);return i=i||"0",new Array(e-s.length+1).join(i)+s}static toStr(t){return Number.isNaN(t)||null==t?"":String(t)}static extend(t,e){t=t||{};for(let i in e)t[i]=e[i];return t}static equalNumbers(t,e){return isNaN(t)==isNaN(e)&&!isNaN(t)&&t==e}static equalArrays(t,e){if(t===e)return!0;if(null==t||null==e)return!1;const i=t.length;if(i!=e.length)return!1;for(let s=0;s<i;++s)if(t[s]!==e[s])return!1;return!0}static equalObjects(t,e){if(t===e)return!0;if(!t&&!e)return!0;if(!t||!e)return!1;for(var i in t)if(t.hasOwnProperty(i)&&t[i]!==e[i])return!1;for(var i in e)if(e.hasOwnProperty(i)&&t[i]!==e[i])return!1;return!0}static parseDate(t,e){const i=new Date(t);return isNaN(i.getTime())?e||new Date:i}static isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static incMonth(t,e){const i=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,I.month_days[I.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t}static minDate(t,e){return null!==t?t:null!==e?e:t.getTime()<e.getTime()?t:e}static maxDate(t,e){return null!==t?e:null!==e||t.getTime()>e.getTime()?t:e}static getTextLength2(t){let e=0,i=0,s=0;for(;s=t.charCodeAt(i++);e+=s>>7?2:1);return e}static getClassName(t){if(t&&t.constructor)return t.constructor.name||function(t){let e=t.toString();return e=e.substring(9),e=e.substring(0,e.indexOf("(")),e}(t.constructor)}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isEmpty(t){if(t)for(let e in t)return!1;return!0}static isNotEmpty(t){if(t)for(let e in t)return!0;return!1}static capitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return e>="A"&&e<="Z"?t:e.toUpperCase()+t.slice(1)}static uncapitalize(t){if("string"!=typeof t)return"";const e=t.charAt(0);return e>="a"&&e<="z"?t:e.toLowerCase()+t.slice(1)}static labelize(t){if("string"!=typeof t)return"";const e=t.charAt(0);let i=(t=e>="A"&&e<="Z"?t:e.toUpperCase()+t.slice(1)).charAt(0);for(let e=1;e<t.length;e++){const s=t.charAt(e);s>="A"&&s<="Z"&&(i+=" "),i+=s}return i}static deepClone(t){if(t instanceof Date)return new Date(t);if(null==t||"object"!=typeof t)return t;{const e=h(t)?[]:{};for(let i of Object.keys(t))e[i]=I.deepClone(t[i]);return e}}static getArray(t,e){const i=[];for(let s=0;s<t;s++)i.push(e);return i}static getNumArray(t,e=0){const i=[];for(let s=0;s<t;s++)i.push(e);return i}static hasSetter(t,e){for(;t;){const i=Reflect.getOwnPropertyDescriptor(t,e);if(i)return i.writable||!!i.set;t=Object.getPrototypeOf(t)}return!1}static dataUriToBinary(t){const e=";base64,",i=t.indexOf(e)+8,s=t.substring(i),r=window.atob(s),n=r.length,h=new Uint8Array(new ArrayBuffer(n));for(let t=0;t<n;t++)h[t]=r.charCodeAt(t);return h}static assignProps(t,e){let i=!1;if(e)for(let s in e)e[s]!==t[s]&&(t[s]=e[s],i=!0);return i}static assignStyleAndProps(t,e){let i=!1;if(e)for(let s in e)("style"===s||t.hasOwnProperty(s))&&(t[s]=e[s],i=!0);return i}static dedupe(t,e){for(let i=(t=t.sort(e||((t,e)=>t>e?1:t<e?-1:0))).length-1;i>0;i--)t[i]===t[i-1]&&t.splice(i,1);return t}static isUnique(t,e){for(let i=(t=t.sort(e||((t,e)=>t>e?1:t<e?-1:0))).length-1;i>0;i--)if(t[i]===t[i-1])return!1;return!0}static sortNum(t){return t.sort(((t,e)=>t-e))}static logElapsed(t,e){const i=+new Date;e(),console.log(t,+new Date-i+"ms")}static clamp(t,e,i){return isNaN(i)||(t=Math.min(t,i)),isNaN(e)||(t=Math.max(t,e)),t}static splice(t,e,i,s){const r=[e,i].concat(s);Array.prototype.splice.apply(t,r)}static makeIntArray(t,e){const i=new Array(Math.max(0,e-t));for(let s=t;s<e;s++)i[s-t]=s;return i}static setInterval(t,e){return setInterval(t,e)}static clearInterval(t){clearInterval(t)}static isStringArray(t){return h(t)&&t.every((t=>"string"==typeof t))}static isNumberArray(t){return h(t)&&t.every((t=>"number"==typeof t))}static makeLineSeparator(t){if(h(t)){if(t.length>0){let e=t[0];for(let i=1,s=t.length;i<s;i++)e+="|"+t[i];return new RegExp(e,"g")}}else if(t)return new RegExp(t,"g")}static stripQuotes(t){const e=t.charCodeAt(0);return e===D?t=t.replace(O,"$1"):e===B&&(t=t.replace(R,"$1")),t}static isDate(t){return"[object Date]"===Object.prototype.toString.call(t)}static isValidDate(t){return t.getTime()==t.getTime()}static asFunction(t){return"function"==typeof t?t:void 0}static getFieldProp(t){const e=t.indexOf(".");if(e>=0)return{field:t.substring(0,e),props:t.substring(e+1).split(".")}}static watch(){return new F}static startsWith(t,e){if(t&&e)return 0===t.indexOf(e)}static endsWith(t,e){if(t&&e)return t.indexOf(e,-t.length)===t.length-e.length}static scaleNumber(t,e,i){const s=Math.abs(t);if(s>=1e3){let r=e.length-1;for(;r;){const n=Math.pow(1e3,r--);if(n<=Math.pow(10,Math.log(s)*Math.LOG10E)&&(i||10*s%n==0))return{value:t/n,symbol:e[r]}}}}}I.week_days=["일","월","화","수","목","금","토"],I.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],I.uniqueKey=function(){let t=Math.random().toString(36).substring(2,9)+"-",e=0;return function(){return"rr-chart-"+t+e++}}();class F{constructor(){this._started=+new Date}elapsed(t=!1){const e=+new Date-this._started;return t&&(this._started=+new Date),e}elapsedText(t=!1,e="ms."){return this.elapsed(t)+e}}function z(t){return{width:t.width,height:t.height}}class ${static create(t,e,i,s){return I.isObject(t)?new $(t.x,t.y,t.width,t.height):I.isEmpty(e)?new $(t,t,t,t):I.isEmpty(i)?new $(t,e,t,e):new $(t,e,i,s)}constructor(t=0,e=0,i=0,s=0){this.x=t,this.y=e,this.width=i,this.height=s}get left(){return this.x}set left(t){const e=t-this.x;this.x+=e,this.width-=e}get right(){return this.x+this.width}set right(t){const e=t-(this.x+this.width);this.width+=e}get top(){return this.y}set top(t){const e=t-this.y;this.y+=e,this.height-=e}get bottom(){return this.y+this.height}set bottom(t){const e=t-(this.y+this.height);this.height+=e}get isEmpty(){return 0===this.width||0===this.height}get isValid(){return t=this,!(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height));var t}clone(){return new $(this.x,this.y,this.width,this.height)}getInner(){return new $(0,0,this.width,this.height)}equals(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}leftBy(t){return this.x+=t,this.width-=t,this}rightBy(t){return this.width+=t,this}topBy(t){return this.y+=t,this.height-=t,this}bottomBy(t){return this.height+=t,this}shrink(t,e){return this.width-=t,this.height-=e,this}expand(t,e){return this.width+=t,this.height+=e,this}contains(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}setEmpty(){return this.width=this.height=0,this}move(t=0,e=0){return this.x=t,this.y=e,this}set(t,e,i,s){return this.x=t,this.y=e,this.width=i,this.height=s,this}setWidth(t){return this.width=t,this}copy(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyHorz(t){return this.x=t.x,this.width=t.width,this}copyVert(t){return this.y=t.y,this.height=t.height,this}inflate(t=0,e=void 0,i=void 0,s=void 0){return e=void 0!==e?e:t,i=void 0!==i?i:t,s=void 0!==s?s:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),i&&(this.right=this.right+i),s&&(this.bottom=this.bottom+s),this}offset(t,e){return this.x+=t,this.y+=e,this}round(){const t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t}union(t){const e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e}normalize(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this}toString(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"}}var H;$.Empty=new $,$.Temp=new $,function(t){t.LINE="line",t.LINES="lines",t.CIRCLE="circle",t.DIAMOND="diamond",t.RECTANGLE="rectangle",t.SQUARE="square",t.TRIANGLE="triangle",t.ITRIANGLE="itriangle"}(H||(H={})),I.getEnumValues(H);class j{static line(t,e,i,s){return["M",t,e,"L",i,s]}static lines(t){let e=0;const i=["M",t[e],t[e+1]];for(;e<t.length;e++)i.push("L",t[e++],t[e]);return i.push("Z"),i}static rect(t){return this.rectangle(t.x,t.y,t.width,t.height)}static rectangle(t,e,i,s){return["M",t,e,"L",t+i,e,"L",t+i,e+s,"L",t,e+s,"Z"]}static square(t,e,i,s){const r=Math.min(i,s);return["M",t+=(i-r)/2,e+=(s-r)/2,"L",t+r,e,"L",t+r,e+r,"L",t,e+r,"Z"]}static circle(t,e,i){return this.arc(t,e,i,i,0,2*Math.PI,!1)}static arc(t,e,i,s,r,n,h){const a=.001,o=Math.abs(n-r-2*Math.PI)<a;n-=a,h=I.pick(h,o);const l=Math.cos(r),c=Math.sin(r),d=Math.cos(n),u=Math.sin(n),_=n-r-Math.PI<a?0:1,p=[];return p.push("M",t+i*l,e+s*c,"A",i,s,0,_,1,t+i*d,e+s*u),h||p.push("Z"),p}static sector(t,e,i,s,r,n,h,a){const o=.001,l=Math.abs(h-n-2*Math.PI)<o;h-=o;const c=Math.cos(n),d=Math.sin(n),u=Math.cos(h),_=Math.sin(h),p=a?1:0,g=h-n-Math.PI<o?0:1,m=i*r,y=s*r,x=[];return x.push("M",t+i*c,e+s*d,"A",i,s,0,g,p,t+i*u,e+s*_),l?x.push("M",t+m*u,e+y*_):x.push("L",t+m*u,e+y*_),x.push("A",m,y,0,g,1-p,t+m*c,e+y*d),l||x.push("Z"),x}static diamond(t,e,i,s){return["M",t+i/2,e,"L",t+i,e+s/2,"L",t+i/2,e+s,"L",t,e+s/2,"Z"]}static triangle(t,e,i,s){return["M",t+i/2,e,"L",t+i,e+s,"L",t,e+s,"Z"]}static itriangle(t,e,i,s){return["M",t,e,"L",t+i,e,"L",t+i/2,e+s,"Z"]}}const W={background:"fill",border:"stroke",borderWidth:"strokeWidth",borderRadius:"borderRadius"};class G extends s{constructor(t,e,i){super(),this._inited=!1,this._testing=!1,this._dirty=!0,this._invalidElements=[],this._toAnimation=0,this._invalidateLock=!1,this._lockDirty=!1,this._cssVars={},this._windowResizeHandler=t=>{this._windowResized()},this._clickHandler=t=>{var e;this._doClick(t),null===(e=this._tool)||void 0===e||e.click(t)},this._dblClickHandler=t=>{var e;this._doDblClick(t),null===(e=this._tool)||void 0===e||e.dblClick(t)},this._touchMoveHandler=t=>{var e;this._doTouchMove(t),null===(e=this._tool)||void 0===e||e.touchMove(t)},this._pointerDownHandler=t=>{var e;this._doPointerDown(t)||null===(e=this._tool)||void 0===e||e.pointerDown(t)},this._pointerMoveHandler=t=>{var e;this._doPointerMove(t),null===(e=this._tool)||void 0===e||e.pointerMove(t)},this._pointerUpHandler=t=>{var e;this._doPointerUp(t),null===(e=this._tool)||void 0===e||e.pointerUp(t)},this._pointerCancelHandler=t=>{var e;this._doPointerCancel(t),null===(e=this._tool)||void 0===e||e.pointerCancel(t)},this._pointerLeaveHandler=t=>{var e;this._doPointerLeave(t),null===(e=this._tool)||void 0===e||e.pointerLeave(t)},this._keyPressHandler=t=>{var e;this._doKeyPress(t),null===(e=this._tool)||void 0===e||e.keyPress(t)},this._wheelHandler=t=>{var e;this._doWheel(t),null===(e=this._tool)||void 0===e||e.wheel(t)},!t&&e instanceof HTMLDivElement&&(t=e.ownerDocument),this.$_initControl(t||document,e,i),this._resigterEventHandlers(this._dom),this._inited=!0,this.invalidate(!0)}_doDestory(){this._unresigterEventHandlers(this._dom),N.remove(this._dom),this._dom=null,this._container=null}isInited(){return this._inited}isTesting(){return this._testing}doc(){return this._dom.ownerDocument}dom(){return this._dom}width(){return this._container.offsetWidth}height(){return this._container.offsetHeight}activeTool(){return this._activeTool||this._tool}setSctiveTool(t){t!==this._activeTool&&(this._activeTool=t,this._tool=t||this._defaultTool)}appendDom(t){t&&this._htmlRoot.append(t)}addElement(t){t&&this._root.add(t)}removeElement(t){this._root.removeChild(t)}invalidate(t=!1){t||!this._invalidateLock&&!this._dirty&&this._inited?(this._dirty=!0,this._requestTimer||this._testing||this.$_requestRender()):this._invalidateLock&&(this._lockDirty=!0)}invalidateLayout(t=!1){this.invalidate(t)}setLock(){this._invalidateLock=!0}releaseLock(t=!0){this._invalidateLock&&(this._invalidateLock=!1),this._lockDirty&&t&&this.invalidate(),this._lockDirty=!1}lock(t){this.setLock();try{t(this)}finally{this.releaseLock()}}silentLock(t){this.setLock();try{t(this)}finally{this.releaseLock(!1)}}getBounds(){return this._dom.getBoundingClientRect()}setAnimation(t){this._toAnimation=t||0}fling(t,e){}getCssVar(t){let e=this._cssVars[t];return t in this._cssVars?this._cssVars[t]:(e=getComputedStyle(this._root.dom).getPropertyValue(t),this._cssVars[t]=e,e)}_setTesting(){this._testing=!0,q.TESTING=!0}_setSize(t,e){isNaN(t)||(this._container.style.width=t+"px"),isNaN(e)||(this._container.style.height=e+"px")}$_addListener(t,e,i){t.addEventListener(e,i)}_resigterEventHandlers(t){window.addEventListener("resize",this._windowResizeHandler),this.$_addListener(t,"click",this._clickHandler),this.$_addListener(t,"dblclick",this._dblClickHandler),this.$_addListener(t,"touchmove",this._touchMoveHandler),this.$_addListener(t,"pointerdown",this._pointerDownHandler),this.$_addListener(t,"pointermove",this._pointerMoveHandler),this.$_addListener(t,"pointerup",this._pointerUpHandler),this.$_addListener(t,"pointercancel",this._pointerCancelHandler),this.$_addListener(t,"pointerleave",this._pointerLeaveHandler),this.$_addListener(t,"keypress",this._keyPressHandler),this.$_addListener(t,"wheel",this._wheelHandler)}_unresigterEventHandlers(t){window.removeEventListener("resize",this._windowResizeHandler),t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblClickHandler),t.removeEventListener("touchmove",this._touchMoveHandler),t.removeEventListener("pointerdown",this._pointerDownHandler),t.removeEventListener("pointermove",this._pointerMoveHandler),t.removeEventListener("pointerup",this._pointerUpHandler),t.removeEventListener("pointercancel",this._pointerCancelHandler),t.removeEventListener("pointerleave",this._pointerLeaveHandler),t.removeEventListener("keypress",this._keyPressHandler),t.removeEventListener("wheel",this._wheelHandler)}_prepareRenderers(t){}$_initControl(t,e,i){if(this._inited)return;e instanceof HTMLDivElement?this._container=e:this._container=t.getElementById(e),this._container instanceof HTMLDivElement||S(g.invalidOuterDiv,e);const s=this._container.ownerDocument,n=this._dom=s.createElement("div");Object.assign(n.style,{position:"relative",width:"100%",height:"100%",boxSizing:"border-box",overflow:"hidden","-webkit-touch-callout":"none","-webkit-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"}),n.className=i,this._container.appendChild(n);const h=this._svg=s.createElementNS(r,"svg");h.style.setProperty("overflow","visible","important"),h.setAttribute("width","100%"),h.setAttribute("height","100%");const a=s.createElement("desc");a.textContent="Created with RealReport-Chart 1.0.0",h.appendChild(a);const o=this._defs=s.createElementNS(r,"defs");h.appendChild(o),n.appendChild(h),this._root=new U(this),h.appendChild(this._root._dom),this._htmlRoot=s.createElement("div"),n.appendChild(this._htmlRoot),Object.assign(this._htmlRoot.style,{position:"absolute"}),this._defaultTool=this._tool=this._creatDefaultTool()}_render(){this.$_render()}$_invalidateElement(t){this._invalidElements.push(t),this.invalidate()}$_requestRender(){window.requestAnimationFrame?this._requestTimer=requestAnimationFrame((()=>this.$_render())):setTimeout((()=>{this.$_render()}),0)}updateNow(){this.$_render()}$_render(){const t=+new Date;if(t<=this._toAnimation)this.$_requestRender();else{try{this._doBeforeRender();const t=this._dom.getBoundingClientRect(),e=this._svg.getBoundingClientRect(),i=this._svg.clientWidth,s=this._svg.clientHeight;this._htmlRoot.style.left=e.left-t.left+"px",this._htmlRoot.style.top=e.top-t.top+"px",this._doRender({x:0,y:0,width:i,height:s})}finally{this._dirty=!1,this._requestTimer=null,this._invalidElements=[],this._doAfterRender()}u.log("render in "+(+new Date-t)+"ms.")}}_doBeforeRender(){}_doAfterRender(){}_doClick(t){}_doDblClick(t){}_doTouchMove(t){return!1}_doPointerDown(t){return!1}_doPointerMove(t){}_doPointerUp(t){}_doPointerCancel(t){}_doPointerLeave(t){}_doKeyPress(t){}_doWheel(t){}_windowResized(){this.invalidateLayout()}}class q extends i{constructor(t,e="g",i=""){super(),this._visible=!0,this._zIndex=0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._styles={},this._styleDirty=!1,this._dom=t.createElementNS(r,e),i&&this.setAttr("class",i)}_doDestory(){this.remove()}get doc(){return this._dom.ownerDocument}get dom(){return this._dom}get parent(){return this._parent}get control(){return this._parent&&this._parent.control}get zIndex(){return this._zIndex}set zIndex(t){t!==this._zIndex&&(this._zIndex=t)}get x(){return this._x}set x(t){t!==this._x&&(this._x=t,this.setAttr("x",this._x))}get y(){return this._x}set y(t){t!==this._y&&(this._y=t,this.setAttr("y",this._y))}get width(){return this._width}set width(t){t!==this._width&&(this._width=t,this.setAttr("width",isNaN(t)?"":t))}get height(){return this._height}set height(t){t!==this._height&&(this._height=t,this.setAttr("height",isNaN(t)?"":t))}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?"":"none"))}get rotation(){return this._rotation}set rotation(t){t!=this._rotation&&(this._rotation=t,this._updateTransform())}setRotaion(t,e,i){return t===this._originX&&e===this._originY&&i===this._rotation||(this._originX=t,this._originY=e,this._rotation=i,this._updateTransform()),this}getStyle(t){return window.getComputedStyle(this._dom).getPropertyValue(t)}hasStyle(t){return this.dom.classList.contains(t)}add(t){return t&&t._parent!==this&&(t._parent=this,this._dom.appendChild(t._dom),t._doAttached(this)),t}insertChild(t,e){return t&&t._parent!==this&&(t._parent=this,this._dom.insertBefore(t._dom,e._dom),t._doAttached(this)),t}insertFirst(t){return t&&t._parent!==this&&(t._parent=this,this._dom.insertBefore(t._dom,this._dom.firstChild),t._doAttached(this)),t}removeChild(t){t&&t._parent===this&&(this._dom.removeChild(t._dom),t._parent=null,t._doDetached(this))}remove(){return this._parent&&this._parent.removeChild(this),this}getAttr(t){return this.dom.getAttribute(t)}setAttr(t,e){return this.dom.setAttribute(t,e),this}setAttrs(t){for(let e in t)this.dom.setAttribute(e,t[e]);return this}unsetAttr(t){return this.dom.removeAttribute(t),this}setBounds(t,e,i,s){return this.translate(t,e),this.resize(i,s),this}setRect(t){return this.translate(t.x,t.y),this.resize(t.width,t.height),this}getRect(){return $.create(this._translateX,this._translateY,this.width,this.height)}translate(t,e){t===this._translateX&&e===this._translateY||(I.isValidNumber(t)&&(this._translateX=t),I.isValidNumber(e)&&(this._translateY=e),this._updateTransform())}resize(t,e,i=!0){return t!==this._width&&i&&this.setAttr("width",this._width=t),e!==this._height&&i&&this.setAttr("height",this._height=e),this}appendDom(t){return t&&this._dom.appendChild(t),t}insertDom(t,e){return t&&this._dom.insertBefore(t,e),t}clearDom(){const t=this._dom;let e;for(;e=t.lastChild;)t.removeChild(e)}clearStyles(){const t=this.dom.style;let e=!1;for(let i in this._styles)t.removeProperty(i),e=!0;return this._styles={},e&&(this._styleDirty=!0),e}clearStyle(t){const e=this.dom.style;let i=!1;if(t){for(let s of t)s in this._styles&&(e.removeProperty(s),delete this._styles[s],i=!0);i&&(this._styleDirty=!0)}return i}setStyles(t){const e=this.dom.style;let i=!1;if(t){for(let s in t)s in W||this._styles[s]===t[s]||(e[s]=this._styles[s]=t[s],i=!0);i&&(this._styleDirty=!0)}return i}resetStyles(t){const e=this.clearStyles();return this.setStyles(t)||e}_setBackgroundBorderRadius(t){}setBackStyles(t){const e=this.dom.style;let i=!1;if(t){for(let s in t)if(s in W&&this._styles[s]!==t[s]){if("borderRadius"===s)this._setBackgroundBorderRadius(l(parseFloat(t[s]),0)),this._styles[s]=t[s];else if(s in W){const i=W[s];e[i]=this._styles[i]=t[s]}i=!0}i&&(this._styleDirty=!0)}return i}setStyle(t,e){let i=!1;return t in W||e===this._styles[t]||(i=this._styleDirty=!0,this._styles[t]=e,this.dom.style[t]=e),i}setBackStyle(t,e){let i=!1;return t in W&&e!==this._styles[t]&&(i=this._styleDirty=!0,this._styles[t]=e,this.dom.style[t]=e),i}putStyles(t,e){if(e=e||{},t)for(let i in t)e[i]=t[i];return e}putStyle(t,e,i){return(i=i||{})[t]=e,i}removeLater(t=!0,e=.5){return this}fadeout(t,e){return this}_testing(){return q.TESTING}_doAttached(t){}_doDetached(t){}_updateTransform(){const t=this._dom;let e=this._translateX,i=this._translateY,s=[];(I.isValidNumber(e)||I.isValidNumber(i))&&(e=e||0,i=i||0,s=["translate("+e+","+i+")"]),I.isNotEmpty(this._matrix)&&s.push("matrix("+this._matrix.join(",")+")"),this._rotation&&s.push("rotate("+this._rotation+" "+I.pick(this._originX,t.getAttribute("x"),0)+" "+I.pick(this._originY,t.getAttribute("y")||0)+")");const r=I.getNumber(this._scaleX,1),n=I.getNumber(this._scaleY,1);1===r&&1===n||s.push("scale("+r+" "+n+")"),s.length&&this._dom.setAttribute("transform",s.join(" "))}}q.TESTING=!1,q.DEBUGGING=!1;class U extends q{constructor(t){super(t.doc()),this._control=t}get control(){return this._control}}class X extends q{constructor(t,e=null,i=""){super(t,"path",i),e&&this.setPath(e)}setPath(t){t!==this._path&&(this._path=t,a(t)?this.setAttr("d",t):this.setAttr("d",t.join(" ")))}renderShape(t,e,i,s){let r;switch(t){case"squre":case"diamond":case"triangle":case"itriangle":r=j[t](e-s,i-s,2*s,2*s);break;default:r=j.circle(e,i,s)}this.setPath(r)}}class Y{static empty(){return new Y}static create(t=0,e=0){return new Y(t,e)}constructor(t=0,e=0){this.x=t,this.y=e}get isEmpty(){return 0===this.x||0===this.y}clone(){return new Y(this.x,this.y)}equals(t){return t===this||t&&this.x===t.x&&this.y===t.y}setEmpty(){return this.x=this.y=0,this}set(t,e){return this.x=t,this.y=e,this}round(){const t=this.clone();return t.x>>>=0,t.y>>>=0,t}toString(){return"{x: "+this.x+", y: "+this.y+"}"}}class Z{static empty(){return new Z}static create(t=0,e=0){return new Z(t,e)}constructor(t=0,e=0){this.width=t,this.height=e}get isEmpty(){return 0===this.width||0===this.height}clone(){return new Z(this.width,this.height)}equals(t){return t===this||t&&this.width===t.width&&this.height===t.height}setEmpty(){return this.width=this.height=0,this}set(t,e){return this.width=t,this.height=e,this}round(){const t=this.clone();return t.width>>>=0,t.height>>>=0,t}toString(){return"{width: "+this.width+", height: "+this.height+"}"}}Z.EMPTY=new Z;class Q extends q{constructor(t,e=""){super(t,"g",e),this._doInitChildren(t)}_movable(){return!1}setAttr(t,e){return Q.IGNORE_ATTRS.hasOwnProperty(t)||super.setAttr(t,e),this}_doInitChildren(t){}}Q.IGNORE_ATTRS={width:"",height:""};class K extends X{constructor(t,e,i=""){super(t,null,i),this.setLine(e)}setLine(t,e,i,s){I.isNumber(t)?this.setPath(j.line(t,e,i,s)):t&&this.setPath(j.line(t.x1,t.y1,t.x2,t.y2))}setVLine(t,e,i){this.setPath(j.line(t,e,t,i))}setVLineC(t,e,i){const s=parseFloat(this.getStyle("stroke-width"));isNaN(s)||(t=Math.round(t)-s%2/2),this.setPath(j.line(t,e,t,i))}setHLine(t,e,i){this.setPath(j.line(e,t,i,t))}setHLineC(t,e,i){const s=parseFloat(this.getStyle("stroke-width"));isNaN(s)||(t=Math.round(t)-s%2/2),this.setPath(j.line(e,t,i,t))}}class J extends i{constructor(t,e=!0){super(),this.chart=t,this._visible=e}visible(){return this._visible}setVisible(t){var e;t!==this._visible&&(this._visible=t,null===(e=this.chart)||void 0===e||e._visibleChanged(this))}load(t){this._doLoadSimple(t)||this._doLoad(t)}prepareRender(){this._doPrepareRender(this.chart)}_changed(){var t;null===(t=this.chart)||void 0===t||t._modelChanged(this)}_doLoadSimple(t){return!1}_doLoad(t){for(const e in t){let i=t[e];h(i)?this[e]=i.slice(0):this[e]instanceof J?this[e].load(i):n(i)?this[e]=Object.assign({},i):this[e]=i}}_doPrepareRender(t){}}class tt extends J{constructor(t,e){super(t.chart),this.source=e}text(){return this.source.legendLabel()}}var et,it,st,rt,nt,ht,at,ot,lt,ct;!function(t){t.BOTTOM="bottom",t.TOP="top",t.RIGHT="right",t.LEFT="left",t.PLOT="plot"}(et||(et={})),function(t){t.CHART="chart",t.PLOT="plot"}(it||(it={})),function(t){t.AUTO="auto",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(st||(st={}));class dt extends J{constructor(){super(...arguments),this.position=et.BOTTOM,this.layout=st.AUTO,this.alignBase=it.PLOT,this.align=P.CENTER,this.verticalAlign=T.MIDDLE,this.offsetX=0,this.offsetY=0,this.margin=10,this.padding=5,this.itemGap=12}items(){return this._items.slice(0)}isEmpty(){return!this._items||this._items.length<1}getLayout(){if(this.layout!==st.AUTO||this.position===et.PLOT)return this.layout;switch(this.position){case et.BOTTOM:case et.TOP:return st.HORIZONTAL;default:return st.VERTICAL}}prepareRender(){this._items=this.$_collectItems()}_doLoad(t){super._doLoad(t)}$_collectItems(){return this.chart._getLegendSources().map((t=>new tt(this,t)))}}class ut extends q{static create(t,e,i,s,r,n=0,h=""){return new ut(t,{x:e,y:i,width:s,height:r,r:n},h)}constructor(t,e=null,i=""){super(t,"rect",i),this.rect=e}get rect(){return this._rect&&Object.assign({},this._rect)}set rect(t){if(t!==this._rect&&(this._rect=t&&Object.assign({},t),t)){this.setRect(t);let e=t.rx||t.r,i=t.ry||t.r;e>0&&this.dom.setAttribute("rx",String(e)),i>0&&this.dom.setAttribute("rx",String(i))}}setBounds(t,e,i,s,r=0){return this.rect={x:t,y:e,width:i,height:s,r:r},this}setRadius(t){t>0&&(this._rect&&(this._rect.rx=this._rect.ry=t),this.dom.setAttribute("rx",String(t)),this.dom.setAttribute("ry",String(t)))}_setBackgroundBorderRadius(t){this.setRadius(t)}}class _t{static getContrast(t,e,i){return new _t(t).getContrast(e,i)}static interpolate(t,e,i){const s=(16711680&t)>>16,r=(65280&t)>>8,n=255&t;return(s+(((16711680&e)>>16)-s)*i<<16)+(r+(((65280&e)>>8)-r)*i<<8)+(n+((255&e)-n)*i)}constructor(t){this.r=0,this.g=0,this.b=0,this.a=1,(t=t&&t.trim())&&(I.startsWith(t,"rgb(")&&I.endsWith(t,")")?this.$_parseRgb(t.substring(4,t.length-1)):I.startsWith(t,"rgba(")&&I.endsWith(t,")")?this.$_parseRgb(t.substring(5,t.length-1)):I.startsWith(t,"#")&&this.$_parseNumber(t.substr(1)))}get rgba(){return"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"}getContrast(t,e){return.299*this.r+.587*this.g+.114*this.b>140?t||"#000000":e||"#FFFFFF"}brighten(t,e=null){return(e=e||new _t(null)).r=Math.ceil(this.r+(255-this.r)*t),e.g=Math.ceil(this.g+(255-this.g)*t),e.b=Math.ceil(this.b+(255-this.b)*t),e.a=this.a,e}toString(){return this.rgba}$_parseRgb(t){const e=t.split(/\,\s*/);e.length>=3&&(this.r=+e[0],this.g=+e[1],this.b=+e[2],e.length>=4?this.a=+e[3]:this.a=1)}$_parseNumber(t){}}!function(t){t.START="start",t.MIDDLE="middle",t.END="end"}(rt||(rt={})),function(t){t.TOP="top",t.MIDDLE="middle",t.BOTTOM="bottom"}(nt||(nt={}));class pt extends q{constructor(t,e=""){super(t,"text",e),this._layout=nt.TOP,this._dirty=!0,this._text="",this.setAttr("text-anchor","middle")}get text(){return this._text}set text(t){(t=t||"")!==this._text&&(this._dirty=!0,this.dom.textContent=this._text=t,this.layoutText())}get anchor(){return this.getAttr("text-anchor")}set anchor(t){t!==this.anchor&&this.setAttr("text-anchor",t)}get layout(){return this._layout}set layout(t){t!==this._layout&&(this._layout=t,this.layoutText())}get svg(){return this.dom.innerHTML}set svg(t){t=t||"",this.dom.innerHTML=t}get opacity(){return this.getAttr("fill-opacity")}set opacity(t){this.setAttr("fill-opacity",t)}getAscent(t){return.75*t}layoutText(t){const e=this.getBBounds(),i=this.getAscent(isNaN(t)?e.height:t);let s;switch(this._layout){case nt.MIDDLE:s=Math.floor(i/2);break;case nt.BOTTOM:s=i-e.height;break;default:s=Math.ceil(i)}this.setAttr("y",s)}isFitIn(t){return this.calcWidth()>=t}calcWidth(){const t=this._text.length;return t&&this.dom.getSubStringLength(0,t)}calcRangeWidth(t=0,e=Number.MAX_SAFE_INTEGER){return t=Math.max(0,t),(e=Math.min(this._text.length,e))>t?this.dom.getSubStringLength(t,e-t):0}truncate(t,e){let i=this._text;if(!i)return;const s=this.dom;let r,n=0,h=i.length;do{r=Math.ceil((n+h)/2);s.getSubStringLength(0,r)>t?h=r-1:n=r}while(n<h);for(this.text=i.substring(0,n)+"…";n>0&&this.calcWidth()>t;)this.text=i.substring(0,--n)+"…"}setContrast(t,e="black",i="white"){return this.setStyle("fill",_t.getContrast(getComputedStyle(t).fill,e,i)),this}clearDom(){super.clearDom(),this._dirty=!0}setStyles(t){let e=super.setStyles(t);return e&&this.layoutText(),e}setStyle(t,e){let i=super.setStyle(t,e);return i&&this.layoutText(),i}getBBounds(){return(this._dirty||this._styleDirty)&&(this._bounds=this.dom.getBBox(),this._dirty=this._styleDirty=!1),this._bounds}getBBoundsTest(){return(this._dirty||this._styleDirty)&&(this._bounds={x:this.x,y:this.y,width:100,height:30},this._dirty=this._styleDirty=!1),this._bounds}}class gt extends q{constructor(t,e=""){super(t,"g",e),this.add(this._debugRect=new ut(t))}measure(t,e,i,s,r){const n=this._doMeasure(t,this.model=e,i,s,r);return this.mw=n.width,this.mh=n.height,n}layout(t){return this._doLayout(t),this._debugRect.setBounds(0,0,this.width,this.height),this._debugRect.setStyles({fill:"transparent",stroke:"#00000018"}),this}resizeByMeasured(){return this.resize(this.mw,this.mh),this}}class mt extends gt{constructor(t){super(t,"rct-axis-title"),this.add(this._textView=new pt(t))}_doMeasure(t,e,i,s,r){return this._textView.rotation=0,this._textView.text=e.text,z(this._textView.getBBounds())}_doLayout(t){(this._isHorz=t)||this._textView.setRotaion(0,this._textView.getBBounds().height/2,270)}layout(t){return super.layout(t),this._debugRect.setBounds(-this.width/2,0,this.width,this.height),this._isHorz||this._debugRect.setRotaion(this.width/2,this.height/2,270),this}}class yt extends gt{constructor(t){super(t,"rct-axis"),this._labelViews=[],this.add(this._titleView=new mt(t)),this.add(this._labelContainer=new q(t))}checkHeight(t,e,i){const s=this.model,r=this.$_prepareChecker(t);let n=s.tick.mark.length;return n+=r?r.getBBounds().height:0,(this._titleView.visible=s.title.visible())&&(n+=this._titleView.measure(t,s.title,e,i,1).height),n}checkWidth(t,e,i){const s=this.model,r=this.$_prepareChecker(t);let n=s.tick.mark.length;return n+=r?r.getBBounds().width:0,(this._titleView.visible=s.title.visible())&&(n+=this._titleView.measure(t,s.title,e,i,1).height),n}_doMeasure(t,e,i,s,r){const n=this._isHorz,h=this._titleView,a=this._labelViews;let o=0;if(o+=this._markLen=e.tick.mark.length,this.$_prepareLabels(t,e),a.length>0){if(n)this._labelSize=a[0].getBBounds().height;else{this._labelSize=a[0].getBBounds().width;for(let t=1;t<a.length;t++)this._labelSize=Math.max(this._labelSize,a[t].getBBounds().width)}o+=this._labelSize}else this._labelSize=0;return h.visible&&(o+=h.mh),Z.create(n?i:o,n?o:s)}_doLayout(){const t=this._isHorz,e=this.model._ticks,i=this._titleView,s=this._labelViews,r=this.width,n=this.height;if(t){const t=this._markLen;s.forEach(((i,s)=>{i.anchor=rt.MIDDLE,i.translate(e[s].pos,t)}))}else{const t=r-this._markLen;s.forEach(((i,s)=>{i.translate(t-i.getBBounds().width,n-e[s].pos-i.getBBounds().height/2)}))}i.visible&&(i.resizeByMeasured().layout(t),t?i.translate(r/2,this._markLen+this._labelSize):i.translate(r-this._markLen-this._labelSize-i.height/2,(n-i.height)/2))}$_prepareChecker(t){const e=this.model._ticks[0];if(e){let i=this._labelViews[0];return i||(i=new pt(t,"rct-axis-label"),i.anchor=rt.START,this._labelContainer.add(i),this._labelViews.push(i)),i.text=e.label,i}}$_prepareLabels(t,e){const i=this.model._ticks,s=i.length,r=this._labelContainer,n=this._labelViews;for(;n.length<s;){const e=new pt(t,"rct-axis-label");e.anchor=rt.START,r.add(e),n.push(e)}for(;n.length>s;)n.pop().remove();n.forEach(((t,e)=>t.text=i[e].label))}}class xt{constructor(t){this.visible=!0,this.value=t}getProp(t){return null==(e=this.value)||isNaN(e)?this.value:this.value[t];var e}prepare(t){const e=this.value;h(e)?this._readArray(t,e):n(e)?this._readObject(t,e):this._readSingle(e)}_readArray(t,e){e.length>1?(this.x=e[l(t.xField,0)],this.y=e[l(t.yField,1)]):(this.x=this.index,this.y=e[l(t.yField,0)])}_readObject(t,e){var i,s,r,n;this.x=(i=e[t.xField],s=e.x,r=e.name,n=e.label,void 0!==i?i:void 0!==s?s:null!=r?r:n),this.y=d(e[t.yField],e.y,e.value)}_readSingle(t){this.x=this.index,this.y=t}}class wt{constructor(t){this._points=[],this._owner=t}get count(){return this._points.length}isEmpty(){return this._points.length<1}get(t){return this._points[t]}load(t){h(t)?(t=t.sort(((t,e)=>h(t)||n(t)?0:-1)),this._points=t.map((t=>this._owner.createPoint(t)))):this._points=[]}getProps(t){return this._points.map((e=>e.getProp(t)))}getValues(t){return this._points.map((e=>e[t]))}prepare(){const t=this._owner;this._points.forEach(((e,i)=>{e.index=i,e.prepare(t)}))}forEach(t){for(let e=0,i=this._points.length;e<i&&!0!==t(this._points[e],e);e++);}getVisibles(){return this._points}}class ft extends J{constructor(t){super(null==t?void 0:t.chart),this.axis=t}}class bt extends ft{constructor(){super(...arguments),this.text="Axis Title",this.margin=8}_doLoadSimple(t){if(a(t))return this.text=t,!0}}class vt extends ft{constructor(){super(...arguments),this.circular=!1,this.startVisible=!0,this.endVisible=!0}}class At extends ft{constructor(){super(...arguments),this.length=7}}class Mt extends ft{constructor(t){super(t),this.mark=this._createMark()}getTick(t){if(null!=t){let e=String(t);return this.prefix&&(e=this.prefix+e),this.suffix&&(e+=this.suffix),e}return""}_createMark(){return new At(this.axis)}}class St extends J{constructor(t,e){super(t),this.opposite=!1,this.reversed=!1,this.minPadding=0,this.maxPadding=0,this.tickStart=!1,this.tickEnd=!1,this.valueUnit=1,this._series=[],this.name=e,this.title=new bt(this),this.tick=this._createTick(),this.grid=new vt(this)}_createTick(){return new Mt(this)}prepareRender(){this._reversed=this.chart.isInverted(),this._doPrepareRender();let t=[];this._series.forEach((e=>{t=t.concat(e.collectValues(this))})),this._range=this._doCalcluateRange(t)}buildTicks(t){this._ticks=this._doBuildTicks(this._range.min,this._range.max,this._length=t)}getValue(t){return+t}contains(t){return t>=this._range.min&&t<=this._range.max}_connect(t){t&&!this._series.includes(t)&&this._series.push(t)}_doCalcluateRange(t){return{min:Math.min(...t)||0,max:Math.max(...t)||0}}}class Pt{constructor(t,e){this._items=[],this._map=new Map,this.chart=t,this.isX=e}get count(){return this._items.length}get first(){return this._items[0]}get items(){return this._items.slice(0)}load(t){const e=this.chart,i=this._items;h(t)?t.forEach(((t,s)=>i.push(this.$_loadAxis(e,t,s)))):n(t)&&i.push(this.$_loadAxis(e,t,0))}get(t){return this._map.get(t)}prepareRender(){this._items.forEach((t=>t.prepareRender()))}buildTicks(t){this._items.forEach((e=>e.buildTicks(t)))}connect(t){const e=this._items,i=this.isX?t.xAxis:t.yAxis;let s;return o(i)&&i>=0&&e.length?s=e[i]:a(i)&&(s=e.find((t=>t.name===i))),s||(s=e[0]),s&&s._connect(t),s}forEach(t){for(let e=0,i=this._items.length;e<i&&!0!==t(this._items[e],e);e++);}$_loadAxis(t,e,i){let s=t._getAxisType(e.type);if(!s){let r;if(h(e.categories))r="category";else if(this.isX){for(const s of t._getSeries().items())if(s.isCategorized()){if(e.name&&s.xAxis===e.name){r="category";break}if(o(s.xAxis)&&s.xAxis===i){r="category";break}}!r&&t.series.isCategorized()&&(r="category")}r&&(s=t._getAxisType(r))}s||(s=t._getAxisType("linear"));const r=new s(t,e.name);return r._isX=this.isX,r.load(e),r}}!function(t){t.TICK="tick",t.EDGE="edge"}(ht||(ht={}));class Tt extends At{constructor(){super(...arguments),this.position=ht.TICK}}class Lt extends Mt{constructor(){super(...arguments),this.steps=1,this.showLast=!1}_createMark(){return new Tt(this.axis)}}class kt extends St{constructor(){super(...arguments),this._map=new Map}getCategories(){return this._cats}getWdith(t,e){return 0}_createTick(){return new Lt(this)}_doPrepareRender(){this._collectCategories(this._series)}_doBuildTicks(t,e,i){const s=this._cats,r=s.length,n=[];this._minPad=l(this.minPadding,0),this._maxPad=l(this.maxPadding,0),t=this._min=Math.floor(t);const h=(e=this._max=Math.ceil(e))-t+1;this._interval=i/(h+this._minPad+this._maxPad);for(let h=t;h<=e;h++)n.push({pos:this.getPosition(i,h),value:h,label:this.tick.getTick(h<r?s[h]:h)});return n}getPosition(t,e){return this._minPad*this._interval+e*this._interval+this._interval/2}getPointWidth(t,e,i){return t/e.getPoints().count}getValue(t){return o(t)?t:this._map.get(t)}_collectCategories(t){const e=this.categories;if(h(e)&&e.length>0)this._cats=e.map((t=>null==t?null:t.toString()));else{const e=this._cats=[];if(h(t))for(const i of t){const t=i.collectCategories(this);for(const i of t)e.includes(i)||e.push(i)}}this._map.clear(),this._cats.forEach(((t,e)=>this._map.set(t,e)))}}class Nt extends Mt{constructor(){super(...arguments),this.stepPixels=72,this.integral=!1}buildSteps(t,e,i,s){let r;return r=Array.isArray(this.steps)?this.steps.slice(0):this.stepCount>0?this._getStepsByCount(this.stepCount,e,i,s):this.stepSize>0?this._getStepsBySize(this.stepSize,e,i,s):this.stepPixels>0?this._getStepsByPixels(t,this.stepPixels,e,i,s):[i,s],r}_getStepsByCount(t,e,i,s){i>e?(i=e,e=NaN):s<e&&(s=e,e=NaN),isNaN(e)&&this.integral;let r=(s-i)/(t-1);const n=Math.pow(10,Math.floor(Math.log10(r))),h=[];if(r=Math.ceil(r/n)*n,isNaN(e))i>Math.floor(i/n)*n?i=Math.floor(i/n)*n:i<Math.ceil(i/n)*n&&(i=Math.ceil(i/n)*n);else{for(A(i<e&&s>e,"base error"),t=Math.max(3,t);;){if(!(x((e-i)/r)+x((s-e)/r)+1>t))break;r+=n}i=e-x((e-i)/r)*r}h.push(i);for(let e=1;e<t;e++)h.push(w(h[e-1]+r));return h}_getStepsBySize(t,e,i,s){const r=[];let n;if(isNaN(e))for(r.push(n=i);n<s;)r.push(n+=t);else{for(r.push(n=e);n>i;)r.unshift(n-=t);for(n=e;n<s;)r.push(n+=t)}return r}_getStepMultiples(t){return[1,2,2.5,5,10]}_getStepsByPixels(t,e,i,s,r){s>=i?(s=i,i=NaN):r<=i&&(r=i,i=NaN);const n=r-s;if(0===n)return[];let h=Math.floor(t/this.stepPixels)+1,a=n/(h-1);const o=Math.pow(10,Math.floor(Math.log10(a))),l=this._getStepMultiples(a),c=[];let d;if(a/=o,l)if(a>l[0]){let t=0;for(;t<l.length-1;t++)if(a>l[t]&&a<l[t+1]){a=l[t+1];break}t>=l.length&&(a=l[l.length-1])}else a=l[0];if(a*=o,isNaN(i))s>Math.floor(s/o)*o?s=Math.floor(s/o)*o:s<Math.ceil(s/o)*o&&(s=Math.ceil(s/o)*o);else{for(A(s<i&&r>i,"base error"),h=Math.max(3,h);;){if(!(x((i-s)/a)+x((r-i)/a)+1>h))break;a+=o}s=i-x((i-s)/a)*a}for(c.push(w(d=s));d<r;)c.push(w(d+=a));return c}}class Et extends St{constructor(t,e){super(t,e),this.nullable=!0,this.baseValue=0,this.syncMinMax=!1}contains(t){return!isNaN(t)}_createTick(){return new Nt(this)}_doPrepareRender(){this._hardMin=this.minValue,isNaN(this.baseValue)||null===this.baseValue||this._series.find((t=>t.ignoreAxisBase(this)))?this._base=NaN:this._base=+this.baseValue}_doBuildTicks(t,e,i){const s=this.tick;let{min:r,max:n}=this.$_adjustMinMax(t,e);const h=s.buildSteps(i,this._base,r,n);r=this._min=Math.min(r,h[0]),n=this._max=Math.max(n,h[h.length-1]);const a=[];for(let t=0;t<h.length;t++)a.push({pos:this.getPosition(i,h[t]),value:h[t],label:String(h[t])});return a}getPosition(t,e){return t*(e-this._min)/(this._max-this._min)}getPointWidth(t,e,i){}$_adjustMinMax(t,e){const i=this._base,s=this.minPadding,r=this.maxPadding;if(!isNaN(i)){if(this.syncMinMax&&t<=i&&e>=i){const s=Math.max(Math.abs(t),Math.abs(e));e=i+s,t=i-s}isNaN(this._hardMin)||(t=this._hardMin),isNaN(this._hardMax)||(e=this._hardMax)}let n=Math.max(0,e-t);return isNaN(s)||(t-=n*s),isNaN(r)||(e+=n*r),{min:t,max:e}}}!function(t){t.AUTO="auto",t.INSIDE="inside",t.OUTSIDE="outside",t.INSIDE_FIRST="insideFirst",t.OUTSIDE_FIRST="outsideFirst"}(at||(at={}));class Vt extends J{constructor(t,e){super(t),this.pointStart=0,this.pointStep=1,this.index=-1,this.name=e,this._points=new wt(this)}isInverted(){return!1}getPoints(){return this._points}isEmpty(){return this._points.isEmpty()}isPolar(){return!1}isCategorized(){return!1}legendColor(){return"red"}legendLabel(){return this.name}legendVisible(){return this.visible()}ignoreAxisBase(t){return!1}createPoint(t){return new xt(t)}getValue(t,e){const i=t.value;if(null==i)return NaN;i[this._getField(e)]}prepareRender(){this._xAxisObj=this.chart._connectSeries(this,!0),this._yAxisObj=this.chart._connectSeries(this,!1),this._points.prepare(),this._visPoints=this._points.getVisibles(),this._doPrepareRender()}collectCategories(t){if(t instanceof kt){let e=t.categoryField;return null!=e?this._points.getProps(e):this._points.getValues(t===this._xAxisObj?"x":"y").filter((t=>a(t)))}}collectValues(t){const e=t===this._xAxisObj?"x":"y",i=e+"Value",s=t instanceof Et,r=[];let n=0;return this._visPoints.forEach(((h,a)=>{let o=t.getValue(h[e]);isNaN(o)&&s&&"x"===e&&(o=n,n+=t.valueUnit),isNaN(o)||r.push(h[i]=o)})),r}isVisible(t){return this._xAxisObj.contains(t.x)&&this._yAxisObj.contains(t.y)}getLegendSources(t){t.push(this)}_getField(t){return t===this._xAxisObj?this.xField:this.yField}_doLoad(t){super._doLoad(t);const e=t[this.dataProp||"data"];h(e)&&this._doLoadPoints(e)}_doLoadPoints(t){this._points.load(t)}_doPrepareRender(){}}Vt.Defaults={};class Ct{constructor(t){this._items=[],this._map=new Map,this.chart=t}get first(){return this._items[0]}isEmpty(){if(this._items.length>0)for(const t of this._items)if(!t.isEmpty())return!1;return!0}items(){return this._items.slice(0)}visibles(){return this._items.filter((t=>t.visible()))}isInverted(){for(const t of this._items)if(t.visible()&&t.isInverted())return!0}isPolar(){for(const t of this._items)if(t.visible()&&!t.isPolar())return!1;return!0}load(t){const e=this.chart;h(t)?t.forEach(((t,i)=>this._items.push(this.$_loadSeries(e,t,i)))):n(t)&&this._items.push(this.$_loadSeries(e,t,0))}get(t){return this._map.get(t)}getLegendSources(){const t=[];return this._items.forEach((e=>{e.visible()&&e.getLegendSources(t)})),t}forEach(t){for(let e=0,i=this._items.length;e<i&&!0!==t(this._items[e],e);e++);}prepareRender(){this._items.forEach((t=>t.prepareRender()))}$_loadSeries(t,e,i){let s=t._getSeriesType(e.type);s||(s=t._getSeriesType(t.type));const r=new s(t,e.name||`Series ${i+1}`);return r.load(e),r.index=i,r}}!function(t){t.DEFAULT="default",t.VISIBLE="visible",t.HIDDEN="hidden"}(ot||(ot={}));class Ot extends J{constructor(t){super(t.chart),this.series=t,this.radius=3}}class Rt extends Vt{constructor(){super(...arguments),this.startAngle=0}}class Dt extends Vt{constructor(){super(...arguments),this.pointWidth=Dt.POINT_WIDTH}isCategorized(){return!0}}Dt.POINT_WIDTH=.45;class Bt extends Dt{isInverted(){return!0}}class It extends xt{_readArray(t,e){const i=e.length>5?1:0;this.min=e[l(t.minField,0+i)],this.low=e[l(t.lowField,1+i)],this.mid=e[l(t.midField,2+i)],this.high=e[l(t.highField,3+i)],this.y=e[l(t.yField,4+i)],this.x=i>0?e[l(t.xField,0)]:this.index}_readObject(t,e){super._readObject(t,e),this.min=c(e[t.minField],e.min),this.low=c(e[t.lowField],e.low),this.mid=c(e[t.midField],e.mid),this.high=c(e[t.highField],e.high),this.y=d(e[t.yField],e.y,e.value)}_readSingle(t){super._readSingle(t),this.min=this.low=this.mid=this.high=this.y}prepare(t){super.prepare(t),this.minValue=+this.min,this.lowValue=+this.low,this.midValue=+this.mid,this.highValue=+this.high}}class Ft extends Dt{createPoint(t){return new It(t)}}class zt extends xt{prepare(t){super.prepare(t),this.zValue=+this.z}_readArray(t,e){const i=e.length>2?1:0;this.y=e[l(t.yField,0+i)],this.z=e[l(t.zField,1+i)],this.x=i>0?e[l(t.xField,0)]:this.index}_readObject(t,e){super._readObject(t,e),this.z=c(e[t.zField],e.z)}_readSingle(t){super._readSingle(t),this.z=this.y}}class $t extends Ot{}!function(t){t.WIDTH="width",t.AREA="area"}(lt||(lt={}));class Ht extends Vt{constructor(t,e){super(t,e),this.sizeMode=lt.AREA,this.minSize=8,this.maxSize="20%",this.marker=new $t(this)}getPxMinMax(t){return{min:b(this._minDim,t),max:b(this._maxDim,t)}}getRadius(t,e,i){let s=(t-this._zMin)/(this._zMax-this._zMin);return this.sizeMode==lt.AREA&&(s=Math.sqrt(s)),s=Math.ceil(e+s*(i-e))/2,s}createPoint(t){return new zt(t)}load(t){super.load(t),this._minDim=f(this.minSize,!0),this._maxDim=f(this.maxSize,!0)}_doPrepareRender(){this._zMin=Number.MAX_VALUE,this._zMax=Number.MIN_VALUE,this._visPoints.forEach((t=>{this._zMin=Math.min(this._zMin,t.zValue),this._zMax=Math.max(this._zMax,t.zValue)}))}}class jt extends xt{prepare(t){super.prepare(t);const e=this.value;this.min=e.min,this.max=e.max}}!function(t){t.SQURE_ROOT="squreRoot",t.STURGES="struges",t.RICE="rice"}(ct||(ct={}));const Wt={squreRoot:function(t){return Math.ceil(Math.sqrt(t))},struges:function(t){return Math.ceil(Math.log(t)*Math.LOG2E)},rice:function(t){return Math.ceil(2*Math.pow(t,1/3))}};class Gt extends Vt{constructor(){super(...arguments),this.binsNumber=ct.SQURE_ROOT}getBinCount(t){const e=l(this.binWidth,0);if(e>0)return t/e;return l(this.binsNumber,0)<1?Wt[this.binsNumber||ct.SQURE_ROOT](t):void 0}ignoreAxisBase(t){return t===this._xAxisObj}createPoint(t){return new jt(t)}_doLoadPoints(t){function e(t){let e;return e=h(t)?t[l(this.yField,0)]:n(t)?d(t[this.yField],t.y,t.value):t,+e}let i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);isNaN(r)||i.push(r)}if(i.length>0){i=i.sort(((t,e)=>t-e)),this.minValue<i[0]&&i.unshift(this.minValue),this.maxValue>i[i.length-1]&&i.push(this.maxValue);const t=i.length,e=i[0],s=i[t-1],r=this.getBinCount(t),n=this._binInterval=(s-e)/r;let h=0,a=e,o=a+n;const l=[];for(let e=0;e<r;e++){let c=0;if(e==r-1)c=t-h;else for(;h<t&&i[h]<o;)c++,h++;l.push({x:a,y:c,min:a,max:e===r-1?s:o}),a=o,o=a+n}this._points.load(l)}}collectValues(t){const e=super.collectValues(t);return t===this._xAxisObj&&e.push(this._visPoints[this._visPoints.length-1].max),e}}class qt extends xt{}class Ut extends Ot{constructor(){super(...arguments),this.radius=4,this.firstVisible=ot.DEFAULT,this.lastVisible=ot.DEFAULT,this.minVisible=ot.DEFAULT,this.maxVisible=ot.DEFAULT}}class Xt extends Vt{constructor(t,e){super(t,e),this.curved=!1,this.baseValue=0,this.connectNulls=!1,this.marker=new Ut(this)}createPoint(t){return new qt(t)}}class Yt extends Xt{}class Zt extends qt{prepare(t){super.prepare(t),this.y=this.high=c(this.high,this.low),this.lowValue=+this.low,this.highValue=this.yValue=+this.high}_readArray(t,e){const i=e.length>2?1:0;this.low=e[l(t.lowField,0+i)],this.high=e[l(t.highField,1+i)],this.x=i>0?e[l(t.xField,0)]:this.index}_readObject(t,e){super._readObject(t,e),this.low=c(e[t.lowField],e.low),this.high=c(e[t.lowField],e.high)}_readSingle(t){super._readSingle(t),this.low=this.y}}class Qt extends Yt{createPoint(t){return new Zt(t)}}class Kt extends xt{constructor(){super(...arguments),this.sliced=!1,this.startAngle=0,this.angle=0}get endAngle(){return this.startAngle+this.angle}legendColor(){return"red"}legendLabel(){return this.x}legendVisible(){return this.visible}}class Jt extends Rt{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.singleColor=!1,this.innerSize=0,this.slicedOffset=10,this.labelDistance=25,this.exclusive=!0,this.sliceDuration=300}isPolar(){return!0}createPoint(t){return new Kt(t)}getLegendSources(t){this._visPoints.forEach((e=>{t.push(e)}))}_doPrepareRender(){super._doPrepareRender();const t=this.chart.colors;this._visPoints.forEach(((e,i)=>{e.color||(e.color=t[i%t.length])}))}}class te extends xt{}class ee extends Ot{constructor(){super(...arguments),this.radius=5}}class ie extends Vt{constructor(t,e){super(t,e),this.marker=new ee(this)}createPoint(t){return new te(t)}}const se=function(t){return isNaN(t)?0:t};class re{constructor(){this._path=[]}clear(){return this._path=[],this}end(t=!1){t&&this._path.push("Z");const e=this._path.join(" ");return this._path=[],e}move(t,e){return o(t)?this._path.push("M",se(t),se(e)):this._path.push("M",se(t.x),se(t.y)),this}moveBy(t,e){return o(t)?this._path.push("m",se(t),se(e)):this._path.push("m",se(t.x),se(t.y)),this}line(t,e){return o(t)?this._path.push("L",se(t),se(e)):this._path.push("L",se(t.x),se(t.y)),this}curve(t,e,i,s,r,n){return this._path.push("C",t,e,i,s,r,n),this}q(t,e,i,s){return this._path.push("Q",t,e,i,s),this}rect(t,e,i,s){return this._path.push("M",t,e,"l",i,0,"l",0,s,"l",-i,0),this}lines(...t){if(o(t[0]))for(let e=0;e<t.length;e+=2)this._path.push("L",se(t[e]),se(t[e+1]));else for(let e=0;e<t.length;e++)this._path.push("L",se(t[e].x),se(t[e].y));return this}polygon(...t){return this.lines(...t),this._path.push("Z"),this}}class ne extends i{constructor(t,e,i,s=0){super(),this.removeDelay=0,this._pool=[],this._views=[],this._removes=[],this._owner=t,this._creator=e,this._styleName=i,this.removeDelay=s}_doDestory(){this._owner=null,this._creator=null,super._doDestory()}get isEmpty(){return 0===this._views.length}get count(){return this._views.length}get first(){return this._views[0]}get last(){return this._views[this._views.length-1]}get(t){return this._views[t]}getAll(){return this._views.slice()}elementOf(t){for(let e of this._views)if(e.dom.contains(t))return e}$_create(t,e=-1,i=0){let s=this._pool.pop();return s||(s=new this._creator(t,this._styleName)),this._owner.add(s),s}prepare(t,e,i){const s=this._owner.doc,r=this._pool,n=this._views;for(let t of n)t.parent||this._owner.add(t);for(;n.length>t;)r.push(n.pop().remove());for(;n.length<t;){const e=this.$_create(s);n.push(e),null==i||i(e,n.length-1,t)}return e&&this.forEach(e),this}reprepare(t,e,i,s,r,n){const h=this._owner.doc,a=this._pool,o=this._views,l=[];for(let t=this._removes.length-1;t>=0;t--)if(!this._removes[t].parent){const e=this._removes.splice(t,1)[0];a.push(e)}for(let s=0,n=e.length;s<n;s++){const a=e[s];let c=-1;if(t)for(let e=0,s=o.length;e<s;e++){const s=o[e][t];if(i&&s===a[i]||!i&&s===a){l.push(o[e]),c=e;break}}if(c>=0){const t=o.splice(c,1)[0];t.parent||this._owner.add(t)}else{const t=this.$_create(h,s,n);l.push(t),null==r||r(t,s,n)}}for(let t=0,e=o.length;t<e;t++){const i=o[t];i.removing||(this.removeDelay>0?this._removes.push(i.removeLater(!1,this.removeDelay)):a.push(i.remove()),null==s||s(i,t,e))}return this._views=l,n&&this.forEach(n),this}borrow(){const t=this._pool.pop()||new this._creator(this._owner.doc,this._styleName);return this._owner.add(t),t}free(t,e=0){if(t){e>0?t.removeLater(!1,e):t.remove(),this._pool.push(t);const i=this._views.indexOf(t);i>=0&&this._views.splice(i,1)}}freeAll(t,e=0){for(let i of t)this.free(i,e)}fadeout(t,e,i){if(t){t.fadeout(e,i),this._pool.push(t);const s=this._views.indexOf(t);s>=0&&this._views.splice(s,1)}}forEach(t){const e=this._views;for(let i=0,s=e.length;i<s;i++)t(e[i],i,s)}visit(t){const e=this._views.length;let i=0;for(;i<e&&!1!==t(this._views[i],i,e);i++);return i===e}find(t){const e=this._views;for(let i=0,s=e.length;i<s;i++)if(t(e[i]))return e[i]}sort(t){return this._views=this._views.sort(t),this}map(t){return this._views.map(t)}}class he extends gt{constructor(t,e){super(t,"rct-series "+e)}_doMeasure(t,e,i,s,r){return this._prepareSeries(t,e),Z.create(i,s)}_doLayout(){this._renderSeries(this.width,this.height)}}class ae extends X{constructor(t){super(t,null,"rct-series-bar"),this.labelViews=[]}}class oe extends X{constructor(t){super(t,null,"rct-line-series-marker")}}class le extends he{constructor(t,e){super(t,e),this.add(this._lineContainer=new q(t)),this._lineContainer.add(this._line=new X(t,null,"rct-line-series-line")),this.add(this._markerContainer=new q(t)),this._markers=new ne(this._markerContainer,oe)}_prepareSeries(t,e){this.$_prepareMarkser(e._visPoints)}_renderSeries(t,e){this._layoutMarkers(this.model._visPoints),this._layoutLines(this.model._visPoints)}_markersPerPoint(){return 1}$_prepareMarkser(t){const e=this.model;e.baseValue;const i=e.marker;i.visible();const s=this._markersPerPoint(),r=t.length;this._markers.prepare(r*s,((e,s)=>{const n=t[s%r];n.radius=i.radius,n.shape=i.shape,e.point=n}))}_layoutMarker(t,e,i){const s=t.point,r=s.shape,n=s.radius;let h;switch(r){case"square":case"diamond":case"triangle":case"itriangle":e-=n,i-=n,h=j[r](0,0,2*n,2*n);break;default:h=j.circle(0,0,n)}t.translate(e,i),t.setPath(h)}_layoutMarkers(t){const e=this.model,i=e._xAxisObj,s=e._yAxisObj;for(let e=0,r=t.length;e<r;e++){const r=t[e];r.xPos=i.getPosition(this.width,r.xValue),r.yPos=this.height-s.getPosition(this.height,r.yValue),this._layoutMarker(this._markers.get(e),r.xPos,r.yPos)}}_layoutLines(t){const e=new re;e.move(t[0].xPos,t[0].yPos);for(let i=1;i<t.length;i++)e.line(t[i].xPos,t[i].yPos);this._line.setPath(e.end())}}class ce extends le{constructor(t){super(t,"rct-area-series"),this.insertFirst(this._areaContainer=new q(t)),this._areaContainer.add(this._area=new X(t,null,"rct-area-series-area"))}_layoutLines(t){super._layoutLines(t),this._layoutArea(this._area,t)}_layoutArea(t,e){const i=this.model,s=this.height,r=I.isNotEmpty(i.baseValue)?i._yAxisObj.getPosition(s,i.baseValue):s,n=new re;n.move(e[0].xPos,r),n.line(e[0].xPos,e[0].yPos);for(let t=1;t<e.length;t++)n.line(e[t].xPos,e[t].yPos);n.line(e[e.length-1].xPos,r),t.setPath(n.end())}}let de=class extends ae{render(t,e){this.setPath(j.rect({x:t,y:e-this.wPoint/2,width:this.hPoint,height:this.wPoint}))}};class ue extends Q{layout(){const t=this.point,e=this.width,i=this.height,s=t.yValue-t.minValue,r=e/2;const n=0+i-i*(t.lowValue-t.minValue)/s,h=0+i-i*(t.highValue-t.minValue)/s;this._back.setBounds(0,0,e,i),this._stemUp.setVLine(r,0,h),this._stemDown.setVLine(r,n,i),this._min.setHLine(0,e/4,3*e/4),this._max.setHLine(0+i,e/4,3*e/4),this._box.setBounds(0,h,e,i*(t.highValue-t.lowValue)/s),this._mid.setHLine(0+i-i*(t.midValue-t.minValue)/s,0,e)}_doInitChildren(t){this.add(this._back=new ut(t,null,"rct-boxplot-series-back")),this.add(this._stemUp=new K(t,null,"rct-boxplot-series-stem")),this.add(this._stemDown=new K(t,null,"rct-boxplot-series-stem")),this.add(this._box=new ut(t,null,"rct-boxplot-series-box")),this.add(this._mid=new K(t,null,"rct-boxplot-series-mid")),this.add(this._min=new K(t,null,"rct-boxplot-series-min")),this.add(this._max=new K(t,null,"rct-boxplot-series-max"))}}let _e=class extends X{constructor(t){super(t,null,"rct-bubble-series-marker")}};let pe=class extends ae{render(t,e){this.setPath(j.rect({x:t-this.wPoint/2,y:e,width:this.wPoint,height:-this.hPoint}))}};class ge extends ae{render(t,e){this.setPath(j.rect({x:t-this.wPoint/2,y:e,width:this.wPoint,height:-this.hPoint}))}}class me extends q{constructor(t,e,i,s,r=""){super(t,"circle",r),"number"==typeof e&&this.setCircle(e,i,s)}setCircle(t,e,i){this.setAttrs({cx:t,cy:e,r:i})}}class ye extends X{static create(t,e,i,s,r,n,h,a=!0,o=""){return new ye(t,{cx:e,cy:i,rx:s,ry:r,innerRadius:0,start:n,angle:h,clockwise:a},o)}static createInner(t,e,i,s,r,n,h,a,o=!0,l=""){return new ye(t,{cx:e,cy:i,rx:s,ry:r,innerRadius:n,start:h,angle:a,clockwise:o},l)}constructor(t,e,i=""){super(t,null,i),this.cx=0,this.cy=0,this.rx=0,this.ry=0,this.innerRadius=0,this.start=0,this.angle=0,this.clockwise=!0,this.rate=1,e&&this._assignShape(e)}equals(t){return t.cx===this.cx&&t.cy===this.cy&&t.rx===this.rx&&t.ry===this.ry&&t.innerRadius===this.innerRadius&&t.start===this.start&&t.angle===this.angle&&t.clockwise===this.clockwise}setSector(t){this._assignShape(t)}_getShape(){return{cx:this.cx,cy:this.cy,rx:this.rx,ry:this.ry,innerRadius:this.innerRadius,start:this.start,angle:this.angle,clockwise:this.clockwise}}_assignShape(t){this.cx=t.cx,this.cy=t.cy,this.rx=t.rx,this.ry=t.ry,this.innerRadius=t.innerRadius,this.start=t.start,this.angle=t.angle,this.clockwise=t.clockwise,this._updateShape()}_updateShape(){this.setPath(j.sector(this.cx,this.cy,this.rx*this.rate,this.ry*this.rate,this.innerRadius||0,this.start,this.start+this.angle,this.clockwise))}}class xe extends ye{setSectorEx(t,e,i,s=!1){let r=!1;return s?r=!0:this._assignShape(i),r}}class we extends X{constructor(t){super(t,null,"rct-scatter-series-marker")}}const fe=new Map([[Ft,class extends he{constructor(t){super(t,"rct-boxplot-series"),this._boxes=new ne(this,ue)}_prepareSeries(t,e){this.$_prepareBoxes(e._visPoints)}_renderSeries(t,e){this.$_layoutBoxes(t,e)}$_prepareBoxes(t){this._boxes.prepare(t.length,((e,i)=>{e.point=t[i]}))}$_layoutBoxes(t,e){const i=this.model,s=i._xAxisObj,r=i._yAxisObj;this._boxes.forEach((n=>{const h=n.point,a=h.xPos=s.getPosition(this.width,h.xValue),o=h.yPos=this.height-r.getPosition(this.height,h.yValue),l=s.getPointWidth(t,i,h)*i.pointWidth,c=Math.abs(r.getPosition(e,h.minValue)-o);n.setBounds(a,o,l,c),n.layout()}))}}],[Bt,class extends he{constructor(t){super(t,"rct-bar-series")}_prepareSeries(t,e){this.$_parepareBars(t,e._visPoints)}_renderSeries(t,e){const i=this.model,s=this.model._xAxisObj,r=this.model._yAxisObj;this._bars.forEach(((n,h)=>{const a=e-s.getPosition(e,h);n.wPoint=s.getPointWidth(e,i,n.point)*i.pointWidth,n.hPoint=r.getPosition(t,n.point.yValue),n.render(0,a)}))}$_parepareBars(t,e){this._bars||(this._bars=new ne(this,de)),this._bars.prepare(e.length,((t,i)=>{t.point=e[i]}))}}],[Dt,class extends he{constructor(t){super(t,"rct-column-series")}_prepareSeries(t,e){this.$_parepareBars(t,e._visPoints)}_renderSeries(t,e){const i=this.model,s=this.model._xAxisObj,r=this.model._yAxisObj,n=this.height;this._bars.forEach(((h,a)=>{const o=s.getPosition(t,a);h.wPoint=s.getPointWidth(t,i,h.point)*i.pointWidth,h.hPoint=r.getPosition(e,h.point.yValue),h.render(o,n)}))}$_parepareBars(t,e){this._bars||(this._bars=new ne(this,pe)),this._bars.prepare(e.length,((t,i)=>{t.point=e[i]}))}}],[Qt,class extends ce{constructor(t){super(t),this._lineContainer.add(this._lowerLine=new X(t,null,"rct-line-series-line"))}_markersPerPoint(){return 2}_layoutArea(t,e){this.model,this.height;const i=new re,s=e.length;i.move(e[0].xPos,e[0].yPos);for(let t=1;t<e.length;t++)i.line(e[t].xPos,e[t].yPos);i.line(e[s-1].xPos,e[s-1].yLow);for(let t=s-2;t>=0;t--)i.line(e[t].xPos,e[t].yLow);t.setPath(i.end())}_layoutLines(t){super._layoutLines(t);const e=new re,i=t.length;e.move(t[i-1].xPos,t[i-1].yLow);for(let s=i-2;s>=0;s--)e.line(t[s].xPos,t[s].yLow);this._lowerLine.setPath(e.end())}_layoutMarkers(t){super._layoutMarkers(t);const e=this.model._yAxisObj;for(let i=0,s=t.length;i<s;i++){const r=t[i];r.yLow=this.height-e.getPosition(this.height,r.lowValue),this._layoutMarker(this._markers.get(i+s),r.xPos,r.yLow)}}}],[Yt,ce],[Xt,class extends le{constructor(t){super(t,"rct-line-series")}}],[Ht,class extends he{constructor(t){super(t,"rct-bubble-series"),this.add(this._markerContainer=new q(t)),this._markers=new ne(this._markerContainer,_e)}_prepareSeries(t,e){e.getPoints().getVisibles(),this.$_prepareMarkser(e._visPoints)}_renderSeries(t,e){this.$_layoutMarkers()}$_prepareMarkser(t){const e=this.model,i=(e._xAxisObj._length<e._yAxisObj._length?e._xAxisObj:e._yAxisObj)._length,s=e.marker,r=t.length,{min:n,max:h}=e.getPxMinMax(i);this._markers.prepare(r,((i,r)=>{const a=t[r];a.radius=e.getRadius(a.zValue,n,h),a.shape=s.shape,i.point=a}))}$_layoutMarkers(){const t=this.model,e=t._xAxisObj,i=t._yAxisObj;this._markers.forEach(((t,s)=>{const r=t.point;if(!isNaN(r.zValue)){const s=r.xPos=e.getPosition(this.width,r.xValue),n=r.yPos=this.height-i.getPosition(this.height,r.yValue),h=r.shape,a=1*r.radius;let o;switch(h){case"square":case"diamond":case"triangle":case"itriangle":o=j[h](0-a,0-a,2*a,2*a);break;default:o=j.circle(0,0,a)}t.setPath(o),t.translate(s,n)}}))}}],[ie,class extends he{constructor(t){super(t,"rct-scatter-series"),this.add(this._markerContainer=new q(t)),this._markers=new ne(this._markerContainer,we)}_prepareSeries(t,e){this.$_prepareMarkser(e._visPoints)}_renderSeries(t,e){this.$_layoutMarkers()}$_prepareMarkser(t){this.model.marker;const e=t.length;this._markers.prepare(e,((e,i)=>{const s=t[i];e.point=s}))}$_layoutMarkers(){const t=this.model,e=t.marker,i=t._xAxisObj,s=t._yAxisObj;this._markers.forEach(((t,r)=>{const n=t.point,h=n.xPos=i.getPosition(this.width,n.xValue),a=n.yPos=this.height-s.getPosition(this.height,n.yValue),o=e.shape,l=e.radius;let c;switch(o){case"square":case"diamond":case"triangle":case"itriangle":c=j[o](0-l,0-l,2*l,2*l);break;default:c=j.circle(0,0,l)}t.setPath(c),t.translate(h,a)}))}}],[Gt,class extends he{constructor(t){super(t,"rct-histogram-series"),this._bars=new ne(this,ge)}_prepareSeries(t,e){this.$_parepareBars(t,e._visPoints)}_renderSeries(t,e){const i=this.model._xAxisObj,s=this.model._yAxisObj,r=this.height;this._bars.forEach(((n,h)=>{const a=n.point,o=i.getPosition(t,a.min),l=i.getPosition(t,a.max),c=o+(l-o)/2;n.wPoint=Math.max(1,l-o-1),n.hPoint=s.getPosition(e,n.point.yValue),n.render(c,r)}))}$_parepareBars(t,e){this._bars.prepare(e.length,((t,i)=>{t.point=e[i]}))}}],[Jt,class extends he{constructor(t){super(t,"rct-pie-series"),this._sectors=new ne(this,xe,null,.5),this._cx=0,this._cy=0,this._rd=0,this._rdInner=0,this._slicedOff=0,this.add(this._circle=new me(t)),this._circle.setStyles({stroke:"#aaa",fill:"none",strokeDasharray:"2"})}_prepareSeries(t,e){this.$_prepareSectors(e._visPoints)}_renderSeries(t,e){const i=this.$_getSize(t,e);this._rd=Math.floor(i/2),this._rdInner=0,this._cx=Math.floor(t/2),this._cy=Math.floor(e/2),this._circle.setCircle(this._cx,this._cy,this._rd),this.$_layoutSectors()}$_getSize(t,e){return.8*e}$_prepareSectors(t){this.model.chart.colors;const e=t.length,i=t.map((t=>t.yValue)).reduce(((t,e)=>t+e),0);let s=y+this.model.startAngle*Math.PI*2/360;t.forEach((t=>{const e=2*t.y*Math.PI/i;t.startAngle=s,t.angle=e,s+=e})),this._sectors.prepare(e,((i,s)=>{const r=s<e-1?t[s+1].startAngle:t[s].endAngle;i.start=r,i.angle=0,i.point=t[s],i.setStyle("fill",t[s].color),i.setStyle("stroke","white")}))}$_layoutSectors(){this._sectors.forEach((t=>{const e=t.point,i=e.startAngle;let s=this._cx,r=this._cy;t.setSectorEx(null,null,{cx:s+0,cy:r+0,rx:this._rd,ry:this._rd,innerRadius:this._rdInner,start:i,angle:e.angle,clockwise:!0},!1)}))}}]]);class be extends gt{constructor(t){super(t,"rct-body"),this._polar=!1,this._seriesViews=[],this._seriesMap=new Map,this.add(this._background=new ut(t)),this.add(this._gridContainer=new q(t)),this.add(this._seriesContainer=new q(t))}setPolar(t){t!==this._polar&&(this._polar=t)}_doMeasure(t,e,i,s,r){return this.$_prepareSeries(t,e.chart._getSeries().visibles()),this._seriesViews.forEach(((e,n)=>{e.measure(t,this._series[n],i,s,r)})),Z.create(i,s)}_doLayout(){this._seriesViews.forEach((t=>{t.resize(this.width,this.height),t.layout()}))}$_createSeriesView(t,e){for(const i of fe.keys())if(e instanceof i)return new(fe.get(i))(t)}$_prepareSeries(t,e){const i=this._seriesContainer,s=this._seriesMap,r=this._seriesViews;this._series=e,r.forEach((t=>t.remove())),r.length=0,e.forEach((e=>{let i=s.get(e);i?s.delete(e):i=this.$_createSeriesView(t,e),r.push(i)})),s.clear(),r.forEach(((t,r)=>{i.add(t),s.set(e[r],t)}))}}class ve extends gt{constructor(t){super(t,"rct-legend-item"),this._enabled=!0,this.add(this._marker=ut.create(t,0,0,12,12,6,"rct-legend-item-marker")),this.add(this._label=new pt(t,"rct-legend-item-label")),this._label.anchor=rt.START}_doMeasure(t,e,i,s,r){return this._label.text=e.text(),Z.create(70,30)}_doLayout(){this._marker.translate(0,(this.height-this._marker.height)/2),this._label.translate(16,(this.height-this._label.getBBounds().height)/2)}}class Ae extends gt{constructor(t){super(t,"rct-legend"),this._itemViews=[],this.add(this._background=new ut(t))}_doMeasure(t,e,i,s,r){const n=e.items(),h=this.vertical=e.getLayout()===st.VERTICAL,a=e.itemGap,o=this._itemViews;let l=0,c=0;return this.$_prepareItems(t,n),o.forEach(((e,a)=>{const o=e.measure(t,n[a],i,s,r);h?(l=Math.max(l,o.width),c+=o.height):(c=Math.max(c,o.height),l+=o.width)})),h?c+=(o.length-1)*a:l+=(o.length-1)*a,Z.create(l,c)}_doLayout(){this._background.setBounds(0,0,this.width,this.height),this._itemViews.forEach((t=>t.resizeByMeasured().layout()))}$_prepareItems(t,e){const i=this._itemViews;for(;i.length<e.length;)i.push(this.add(new ve(t)));for(;i.length>e.length;)i.pop().remove()}}class Me extends gt{constructor(t,e){super(t,e?"rct-subtitle":"rct-title"),this.add(this._textView=new pt(t)),this._textView.anchor=rt.START}_doMeasure(t,e,i,s,r){return this._textView.text=this.model.text,z(this._textView.getBBounds())}_doLayout(){this._textView.layoutText()}}class Se extends Q{measure(t,e,i,s,r){const n=this._doMeasure(t,e,i,s,r);return this.mw=n.width,this.mh=n.height,n}resizeByMeasured(){return this.resize(this.mw,this.mh),this}layout(){this._doLayout()}}class Pe extends Se{_doInitChildren(t){this.add(this.titleView=new Me(t,!1)),this.add(this.subtitleView=new Me(t,!0))}_doMeasure(t,e,i,s,r){let n,h=i,a=0;return(this.titleView.visible=e.title.visible())&&(n=this.titleView.measure(t,e.title,i,s,r),a+=n.height,s-=n.height),(this.subtitleView.visible=e.subtitle.visible())&&(n=this.subtitleView.measure(t,e.subtitle,i,s,r),a+=n.height,s-=n.height),{width:h,height:a}}_doLayout(){this.titleView.resizeByMeasured().layout().translate((this.width-this.titleView.width)/2,0)}}class Te extends Se{_doInitChildren(t){this.add(this._legendView=new Ae(t))}_doMeasure(t,e,i,s,r){return this._legendView.measure(t,e.legend,i,s,r)}_doLayout(){this._legendView.resize(this.width,this.height),this._legendView.layout()}}class Le extends Se{constructor(t,e){super(t),this.dir=e,this.views=[]}prepare(t,e,i,s){if(e)this.visible=!1;else{const e=this.views;for(;e.length<i.length;){const i=new yt(t);this.add(i),e.push(i)}for(;e.length>i.length;)e.pop().remove();e.forEach(((t,e)=>{t.model=i[e],t._isHorz=s})),this.axes=i,this.visible=e.length>0}}checkHeights(t,e,i){let s=0;return this.views.forEach((r=>{s+=r.checkHeight(t,e,i)})),s}checkWidths(t,e,i){let s=0;return this.views.forEach((r=>{s+=r.checkWidth(t,e,i)})),s}_doMeasure(t,e,i,s,r){const n=this.axes;let h=0,a=0;return this.views.forEach(((e,o)=>{const l=e.measure(t,n[o],i,s,r);h+=l.width,a+=l.height})),Z.create(h,a)}_doLayout(){this.views.forEach((t=>{t.resize(this.width,this.height),t.layout()}))}}class ke extends Q{}class Ne extends q{constructor(t){super(t),this._inverted=!1,this._axisSectionViews=new Map,this.add(this._titleSectionView=new Pe(t)),this.add(this._legendSectionView=new Te(t)),this.add(this._hAxisLine=new K(t,null,"rct-axis-line")),this.add(this._vAxisLine=new K(t,null,"rct-axis-line")),Object.values(L).forEach((e=>{if(o(e)){const i=new Le(t,e);this.add(i),this._axisSectionViews.set(e,i)}})),this.add(this._bodyView=new be(t))}titleView(){return this._titleSectionView.titleView}subtitleView(){return this._titleSectionView.subtitleView}bodyView(){return this._bodyView}measure(t,e,i,s,r){if(e&&1==r&&e.prepareRender(),this.$_checkEmpty(t,e,i,s))return;const n=this._model=e,h=n.isPolar(),a=n.legend;let o,l=i,c=s;if(this._inverted=n._getSeries().isInverted(),o=this._titleSectionView.measure(t,n,l,c,r),c-=o.height,this._legendSectionView.visible=a.visible()&&!a.isEmpty())switch(o=this._legendSectionView.measure(t,n,l,c,r),a.position){case et.TOP:case et.BOTTOM:c-=o.height;break;case et.RIGHT:case et.LEFT:l-=o.width}this.$_measurePlot(t,n,h,l,c,1)}layout(){var t;let e=this.width,i=this.height,s=0,r=0,n=0;if(null===(t=this._emptyView)||void 0===t?void 0:t.visible)return void this._emptyView.resize(e,i);this._model;const h=r;let a;this._titleSectionView.resizeByMeasured().layout(),r+=this._titleSectionView.height,i-=this._titleSectionView.height,this._legendSectionView.visible&&(this._legendSectionView.resizeByMeasured().layout(),i-=n=this._legendSectionView.height,a=this.height-n);const o=new Map(this._axisSectionViews);let l;(l=o.get(L.LEFT))&&l.visible?e-=l.mw:o.delete(L.LEFT),(l=o.get(L.BOTTOM))&&l.visible?i-=l.mh:o.delete(L.BOTTOM),r=this.height-n,(l=o.get(L.LEFT))&&(l.resize(l.mw,i),l.layout(),s+=l.mw),(l=o.get(L.BOTTOM))&&(l.resize(e,l.mh),l.layout(),r-=l.mh);const c=this._org=Y.create(s,r);this._plotWidth=e,this._plotHeight=i,(this._vAxisLine.visible=!!(l=o.get(L.LEFT)))&&(this._vAxisLine.setVLineC(c.x,c.y,c.y-i),l.translate(c.x-l.mw,c.y-l.height)),(this._hAxisLine.visible=!!(l=o.get(L.BOTTOM)))&&(this._hAxisLine.setHLineC(c.y,c.x,c.x+e),l.translate(c.x,c.y)),this._bodyView.resize(this._plotWidth,this._plotHeight),this._bodyView.layout().translate(c.x,c.y-this._plotHeight);let d=this._titleSectionView;s=c.x,d.visible&&d.translate(s+(e-d.width)/2,h),d=this._legendSectionView,d.visible&&d.translate(s+(e-d.width)/2,a)}$_checkEmpty(t,e,i,s){if(!e||e.isEmpty())return this._emptyView||(this._emptyView=new ke(t)),this._emptyView.resize(i,s),!0;this._emptyView&&(this._emptyView.visible=!1)}$_prepareAxes(t,e,i){const s=this._axisSectionViews;for(const r of s.keys()){const n=s.get(r),h=e.getAxes(r);n.prepare(t,i,h,r===L.BOTTOM||r===L.TOP)}}$_measurePlot(t,e,i,s,r,n){const h=this._axisSectionViews,a=s,o=r;this.$_prepareAxes(t,e,i),e.layoutAxes(s,r,this._inverted,n),s-=h.get(L.LEFT).checkWidths(t,s,r),s-=h.get(L.RIGHT).checkWidths(t,s,r),r-=h.get(L.BOTTOM).checkHeights(t,s,r),r-=h.get(L.TOP).checkHeights(t,s,r),e.layoutAxes(s,r,this._inverted,n);for(const i of h.keys()){const a=h.get(i);a.visible&&a.measure(t,e,s,r,n)}s=a,r=o;for(const t of h.keys()){const e=h.get(t);e.visible&&(t===L.LEFT?s-=e.mw:t===L.BOTTOM&&(r-=e.mh))}e.layoutAxes(s,r,this._inverted,n),this._bodyView.measure(t,e.body,s,r,n)}}class Ee extends G{constructor(t,e){super(t,e,Ee.CLASS_NAME),this.addElement(this._chartView=new Ne(t))}get model(){return this._model}set model(t){t!==this._model&&(this._model=t,this.invalidateLayout())}chartView(){return this._chartView}useImage(t){}_creatDefaultTool(){}_doRender(t){console.time("render chart"),this._model,this._chartView.measure(this.doc(),this._model,t.width,t.height,1),this._chartView.resize(t.width,t.height),this._chartView.layout(),console.timeEnd("render chart")}}Ee.CLASS_NAME="rtc-control";class Ve extends J{constructor(){super(...arguments),this.startAngle=0,this.endAngle=360,this.centerX="50%",this.centerY="50%",this.size="80%"}}class Ce extends J{constructor(){super(...arguments),this.text="Title"}_doLoadSimple(t){if(a(t))return this.text=t,!0}}var Oe;!function(t){t.BOTTOM="bottom",t.RIGHT="right",t.LEFT="left",t.TOP="top"}(Oe||(Oe={}));class Re extends Nt{buildSteps(t,e,i,s){return i=Math.log10(i),s=Math.log10(s),super.buildSteps(t,e,i,s)}}const De=[1,1e3,6e4,36e5,864e5,6048e5,24192e5,314496e5],Be=[[1,2,5,10,20,25,50,100,200,250,500],[1,2,5,10,15,30],[1,2,3,4,6,8,12],[1,2,3],[1,2],[1,2,3,4,6]];class Ie extends Nt{_getStepMultiples(t){for(let e=0;e<7;e++)if(t<=De[e])return Be[e];return null}}class Fe extends Et{constructor(t,e){super(t,e),this.baseValue=NaN}_createTick(){return new Ie(this)}_doBuildTicks(t,e,i){const s=super._doBuildTicks(t,e,i);return s.forEach((t=>{t.pos=t.pos-32500,t.label=String(+t.label/3600/24/30/365>>0)})),s}}const ze={bar:Bt,column:Dt,line:Xt,area:Yt,arearange:Qt,boxplot:Ft,bubble:Ht,scatter:ie,histogram:Gt,pie:Jt},$e={linear:Et,category:kt,time:Fe,date:Fe,log:class extends Et{_createTick(){return new Re(this)}_doBuildTicks(t,e,i){}getPosition(t,e){}}};class He extends i{constructor(t){super(),this.type="column",this._groups=new Map,this.colors=["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e12"],this._title=new Ce(this),this._subtitle=new Ce(this,!1),this._legend=new dt(this),this._series=new Ct(this),this._xAxes=new Pt(this,!0),this._yAxes=new Pt(this,!1),this._body=new Ve(this),t&&this.load(t)}get title(){return this._title}get subtitle(){return this._subtitle}get series(){return this._series.first}get legend(){return this._legend}get xAxis(){return this._xAxes.first}get yAxis(){return this._yAxes.first}get body(){return this._body}isPolar(){return this._series.isPolar()}_getSeries(){return this._series}_getXAxes(){return this._xAxes}_getYAxes(){return this._yAxes}isInverted(){return this._series.isInverted()}isEmpty(){return this._series.isEmpty()}seriesByBame(t){return this._series.get(t)}axisByName(t){return this._xAxes.get(t)||this._yAxes.get(t)}getGroup(t){return this._groups.get(t)}getAxes(t){const e=this._xAxes.items,i=this._yAxes.items;let s;if(this.isInverted())switch(t){case L.LEFT:s=e.filter((t=>!t.opposite));break;case L.RIGHT:s=e.filter((t=>t.opposite));break;case L.BOTTOM:s=i.filter((t=>!t.opposite));break;case L.TOP:s=i.filter((t=>t.opposite))}else switch(t){case L.LEFT:s=i.filter((t=>!t.opposite));break;case L.RIGHT:s=i.filter((t=>t.opposite));break;case L.BOTTOM:s=e.filter((t=>!t.opposite));break;case L.TOP:s=e.filter((t=>t.opposite))}return s||[]}_getLegendSources(){return this._series.getLegendSources()}load(t){this._title.load(t.title),this._subtitle.load(t.subtitle),this._legend.load(t.legend),this._series.load(t.series),this._xAxes.load(t.xAxes||t.xAxis||{}),this._yAxes.load(t.yAxes||t.yAxis||{}),this._body.load(t.body)}_connectSeries(t,e){return e?this._xAxes.connect(t):this._yAxes.connect(t)}prepareRender(){this._series.prepareRender(),this._xAxes.prepareRender(),this._yAxes.prepareRender(),this._legend.prepareRender()}layoutAxes(t,e,i,s){this._xAxes.buildTicks(i?e:t),this._yAxes.buildTicks(i?t:e)}update(){}_getSeriesType(t){return ze[t]}_getAxisType(t){return $e[t]}_visibleChanged(t){}_modelChanged(t){}}class je{static getVersion(){return"0.0.1"}static createChartControl(t,e){return new Ee(t,e)}static loadChart(t){return new He(t)}}const We=je.getVersion,Ge=je.createChartControl,qe=je.loadChart;t.Chart=He,t.ChartControl=Ee,t.createChartControl=Ge,t.getVersion=We,t.loadChart=qe}));
