name: Create Jira issue
on:
    issues:
        types: [assigned]

jobs:
    create-issue:
        name: Create Jira issue
        if: github.event.assignee.login != 'gslim65'
        runs-on: ubuntu-latest
        steps:
            - name: Login
              uses: atlassian/gajira-login@v3
              env:
                  JIRA_BASE_URL: ${{ secrets.JIRA_BASE_URL }}
                  JIRA_API_TOKEN: ${{ secrets.JIRA_API_TOKEN }}
                  JIRA_USER_EMAIL: ${{ secrets.JIRA_USER_EMAIL }}

            - name: Create Issue
              uses: atlassian/gajira-create@v3
              with:
                  project: CHART
                  issuetype: Task
                  summary: '${{ github.event.issue.title }}'
                  description: '${{ github.event.issue.html_url }}'

    # update-status:  # jira issue 키가 필요하다..
    #   name: Update issue status
    #   if: github.event.label.name == '2. 개발'
    #   runs-on: ubuntu-latest
    #   steps:
    #   - name: Login
    #     uses: atlassian/gajira-login@v3
    #     env:
    #       JIRA_BASE_URL: ${{ secrets.JIRA_BASE_URL }}
    #       JIRA_API_TOKEN: ${{ secrets.JIRA_API_TOKEN }}
    #       JIRA_USER_EMAIL: ${{ secrets.JIRA_USER_EMAIL }}
    #   - name: Update Issue
    #     uses: atlassian/gajira-transition@v3
    #     with:
    #       issue: ${{ steps.create.outputs.issue }}
    #       transition: "Done"
